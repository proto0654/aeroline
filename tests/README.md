# Тесты для калькулятора Aeroline

## Структура тестов

```
tests/
├── setup.js                    # Настройка тестового окружения
├── mocks/
│   └── apiService.js          # Моки для API и тестовые данные
├── unit/
│   └── calculator/
│       ├── CalculatorPage.test.js      # Тесты компонента калькулятора
│       └── calculateTariffCost.test.js # Тесты логики расчета тарифов
└── e2e/                        # E2E тесты (будут добавлены позже)
```

## Установка зависимостей

```bash
npm install --save-dev vitest @vue/test-utils jsdom @vitest/ui
```

## Запуск тестов

```bash
# Запуск всех тестов
npm run test

# Запуск тестов в watch режиме
npm run test:watch

# Запуск тестов с покрытием
npm run test:coverage

# Запуск тестов в UI режиме
npm run test:ui
```

## Тестовые кейсы

Тесты основаны на кейсах из `TEST_CASES.md`:

### Кейс 1: Терминал → Терминал
- ✅ Проверка загрузки данных из API
- ✅ Поиск takeDeliverFrom для терминала Красноярска
- ✅ Поиск takeDeliverTo для терминала Новосибирска
- ✅ Поиск tariffZone для направления
- ✅ Расчет забора = 0₽ для терминала
- ✅ Расчет доставки = 0₽ для терминала

### Кейс 2: Адрес → Терминал
- ✅ Поиск billingAddress для адреса через терминал
- ✅ Поиск takeDeliver для адреса
- ✅ Расчет забора для адреса (не 0)
- ✅ Расчет доставки = 0 для терминала

### Кейс 4: Адрес → Адрес
- ✅ Поиск обоих адресов через терминалы
- ✅ Поиск takeDeliver для обоих адресов
- ✅ Расчет забора и доставки (оба не 0)

## Добавление новых тестов

1. Создайте файл теста в соответствующей директории
2. Используйте моки из `tests/mocks/apiService.js`
3. Следуйте структуре существующих тестов
4. Добавьте описание теста в этот README

## Моки данных

Все моки данных находятся в `tests/mocks/apiService.js`:
- `testCase1Data` - данные для Кейса 1
- `testCase2Data` - данные для Кейса 2
- `testCase4Data` - данные для Кейса 4

Для добавления новых тестовых данных создайте новый объект по аналогии с существующими.

