(function(){"use strict";function gt(){const n=document.getElementsByTagName("script"),t=n[n.length-1];try{const e=t.src;if(e.includes("://")){const a=new URL(e).pathname.split("/");return a.pop(),a[a.length-1]==="js"&&a[a.length-2]==="assets"?(a.pop(),a.pop()):a[a.length-1]==="assets"&&a.pop(),a.join("/")+"/"}else{const i=e.split("/");return i.pop(),i.length>=2&&i[i.length-1]==="js"&&i[i.length-2]==="assets"?(i.pop(),i.pop()):i.length>=1&&i[i.length-1]==="assets"&&i.pop(),i.join("/")+"/"}}catch(e){return console.error("Ошибка при определении базового пути:",e),"./"}}function ht(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function Mn(n,t){const e=document.createElement("script");e.src=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить скрипт: ${n}`))},document.head.appendChild(e)}function Sn(n,t){const e=document.createElement("link");e.rel="stylesheet",e.href=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить стиль: ${n}`))},document.head.appendChild(e)}function mt(){return window.innerWidth<768?"mobile":"desktop"}class In{constructor(t){this.input=t,this.init()}init(){this.input.placeholder="+7 (___) ___-__-__",this.input.addEventListener("blur",this.onBlur.bind(this)),this.input.addEventListener("input",this.onInput.bind(this))}onInput(t){const e=/[\d\+\-\(\) ]/g;let i=this.input.value.match(e);i?this.input.value=i.join(""):this.input.value="",this.input.setCustomValidity("")}onBlur(t){let e=this.input.value.replace(/[^\d\+]/g,"");if(e.startsWith("8")&&(e="+7"+e.slice(1)),e.startsWith("+7")&&e.length===12){const i=e.replace(/\D/g,"");this.input.value=`+7 (${i.slice(1,4)}) ${i.slice(4,7)}-${i.slice(7,9)}-${i.slice(9,11)}`,this.input.setCustomValidity("");return}this.input.setCustomValidity("Введите корректный номер телефона")}}class xn{constructor(){this.activeModal=null,this.init()}init(){this.bindGlobalEvents()}bindGlobalEvents(){document.addEventListener("keydown",t=>{t.key==="Escape"&&this.activeModal&&this.close(this.activeModal)}),document.addEventListener("click",t=>{t.target.classList.contains("modal-backdrop")&&this.activeModal&&this.close(this.activeModal)}),document.addEventListener("click",t=>{t.target.closest(".modal-close")&&this.activeModal&&this.close(this.activeModal)})}open(t,e={}){const i=typeof t=="string"?document.getElementById(t):t;if(!i){console.error("Модальное окно не найдено:",t);return}this.activeModal&&this.activeModal!==i&&this.close(this.activeModal),this.activeModal=i,i.classList.add("modal-open"),document.body.style.overflow="hidden",i.focus(),e.onOpen&&e.onOpen(i),console.log("Модальное окно открыто:",i.id)}close(t,e={}){const i=typeof t=="string"?document.getElementById(t):t;if(!i){console.error("Модальное окно не найдено:",t);return}i.classList.remove("modal-open"),document.body.style.overflow="",this.activeModal===i&&(this.activeModal=null),e.onClose&&e.onClose(i),console.log("Модальное окно закрыто:",i.id)}create(t={}){const{id:e="dynamic-modal",title:i="",content:a="",size:o="default",showCloseButton:c=!0,backdrop:d=!0,onOpen:u=null,onClose:m=null}=t,h=document.getElementById(e);h&&h.remove();let g="";switch(o){case"small":g="max-w-md";break;case"large":g="max-w-4xl";break;case"full":g="max-w-full w-full h-full";break;default:g="max-w-2xl"}const l=`
      <div id="${e}" class="modal">
        ${d?'<div class="modal-backdrop"></div>':""}
        <div class="modal-box ${g} bg-brand-light">
          ${c?`
            <button class="modal-close absolute right-4 top-4 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow" aria-label="Закрыть">
              <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 6l8 8M6 14L14 6" stroke-linecap="round"/></svg>
            </button>
          `:""}
          ${i?`<h3 class="font-bold text-lg mb-4">${i}</h3>`:""}
          <div class="modal-content">
            ${a}
          </div>
        </div>
      </div>
    `;document.body.insertAdjacentHTML("beforeend",l);const y=document.getElementById(e);return this.open(y,{onOpen:u,onClose:m}),y}updateContent(t,e){const i=typeof t=="string"?document.getElementById(t):t;if(!i){console.error("Модальное окно не найдено:",t);return}const a=i.querySelector(".modal-content");a&&(a.innerHTML=e)}isOpen(t){const e=typeof t=="string"?document.getElementById(t):t;return e&&e.classList.contains("modal-open")}closeAll(){document.querySelectorAll(".modal.modal-open").forEach(e=>this.close(e))}}const $=new xn;window.modalManager=$;class pt{constructor(){this.loginModal=document.getElementById("login-modal"),this.loginForm=document.getElementById("login-form"),this.basePath=gt(),this.init()}init(){!this.loginModal||!this.loginForm||(document.addEventListener("click",t=>{t.target.closest('#mobile-menu-login, a[href*="profile.html"]')&&(t.preventDefault(),modalManager.open(this.loginModal))}),this.loginForm.addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("login-email").value,i=document.getElementById("login-password").value;e==="test@aeroline.su"&&i==="password123"?(modalManager.close(this.loginModal),window.location.href=`${this.basePath}profile.html`):alert("Неверный email или пароль")}))}}document.addEventListener("DOMContentLoaded",()=>{new pt});var Be=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],se={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ge={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},j=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},J=function(n){return n===!0?1:0};function vt(n,t){var e;return function(){var i=this,a=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,a)},t)}}var Ne=function(n){return n instanceof Array?n:[n]};function z(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function q(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function be(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function yt(n,t){if(t(n))return n;if(n.parentNode)return yt(n.parentNode,t)}function Ce(n,t){var e=q("div","numInputWrapper"),i=q("input","numInput "+n),a=q("span","arrowUp"),o=q("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var c in t)i.setAttribute(c,t[c]);return e.appendChild(i),e.appendChild(a),e.appendChild(o),e}function W(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var _e=function(){},De=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},kn={D:_e,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*J(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),a=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+e.firstDayOfWeek),a},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:_e,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:_e,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},te={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},he={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[he.w(n,t,e)]},F:function(n,t,e){return De(he.n(n,t,e)-1,!1,t)},G:function(n,t,e){return j(he.h(n,t,e))},H:function(n){return j(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[J(n.getHours()>11)]},M:function(n,t){return De(n.getMonth(),!0,t)},S:function(n){return j(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return j(n.getFullYear(),4)},d:function(n){return j(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return j(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return j(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},wt=function(n){var t=n.config,e=t===void 0?se:t,i=n.l10n,a=i===void 0?ge:i,o=n.isMobile,c=o===void 0?!1:o;return function(d,u,m){var h=m||a;return e.formatDate!==void 0&&!c?e.formatDate(d,u,h):u.split("").map(function(g,l,y){return he[g]&&y[l-1]!=="\\"?he[g](d,h,e):g!=="\\"?g:""}).join("")}},He=function(n){var t=n.config,e=t===void 0?se:t,i=n.l10n,a=i===void 0?ge:i;return function(o,c,d,u){if(!(o!==0&&!o)){var m=u||a,h,g=o;if(o instanceof Date)h=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)h=new Date(o);else if(typeof o=="string"){var l=c||(e||se).dateFormat,y=String(o).trim();if(y==="today")h=new Date,d=!0;else if(e&&e.parseDate)h=e.parseDate(o,l);else if(/Z$/.test(y)||/GMT$/.test(y))h=new Date(o);else{for(var C=void 0,w=[],S=0,v=0,b="";S<l.length;S++){var E=l[S],x=E==="\\",A=l[S-1]==="\\"||x;if(te[E]&&!A){b+=te[E];var P=new RegExp(b).exec(o);P&&(C=!0)&&w[E!=="Y"?"push":"unshift"]({fn:kn[E],val:P[++v]})}else x||(b+=".")}h=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),w.forEach(function(F){var _=F.fn,U=F.val;return h=_(h,U,m)||h}),h=C?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){e.errorHandler(new Error("Invalid date provided: "+g));return}return d===!0&&h.setHours(0,0,0,0),h}}};function Z(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Pn=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},$e=function(n,t,e){return n*3600+t*60+e},Ln=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},An={DAY:864e5};function Re(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var a=n.minDate.getHours(),o=n.minDate.getMinutes(),c=n.minDate.getSeconds();t<a&&(t=a),t===a&&e<o&&(e=o),t===a&&e===o&&i<c&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var d=n.maxDate.getHours(),u=n.maxDate.getMinutes();t=Math.min(t,d),t===d&&(e=Math.min(u,e)),t===d&&e===u&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(d){d&&Object.keys(d).forEach(function(u){return n[u]=d[u]})},a=0,o=t;a<o.length;a++){var c=o[a];i(c)}return n});var R=globalThis&&globalThis.__assign||function(){return R=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},R.apply(this,arguments)},bt=globalThis&&globalThis.__spreadArrays||function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),a=0,t=0;t<e;t++)for(var o=arguments[t],c=0,d=o.length;c<d;c++,a++)i[a]=o[c];return i},Tn=300;function On(n,t){var e={config:R(R({},se),H.defaultConfig),l10n:ge};e.parseDate=He({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=w,e._setHoursFromDate=l,e._positionCalendar=Oe,e.changeMonth=ot,e.changeYear=Le,e.clear=wi,e.close=bi,e.onMouseOver=Te,e._createElement=q,e.createDay=P,e.destroy=Ci,e.isEnabled=oe,e.jumpToDate=b,e.updateValue=ee,e.open=Mi,e.redraw=wn,e.set=ki,e.setDate=Pi,e.toggle=Oi;function i(){e.utils={getDaysInMonth:function(r,s){return r===void 0&&(r=e.currentMonth),s===void 0&&(s=e.currentYear),r===1&&(s%4===0&&s%100!==0||s%400===0)?29:e.l10n.daysInMonth[r]}}}function a(){e.element=e.input=n,e.isOpen=!1,Si(),yn(),Ai(),Li(),i(),e.isMobile||A(),v(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&l(e.config.noCalendar?e.latestSelectedDateObj:void 0),ee(!1)),d();var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&r&&Oe(),N("onReady")}function o(){var r;return((r=e.calendarContainer)===null||r===void 0?void 0:r.getRootNode()).activeElement||document.activeElement}function c(r){return r.bind(e)}function d(){var r=e.config;r.weekNumbers===!1&&r.showMonths===1||r.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var s=(e.days.offsetWidth+1)*r.showMonths;e.daysContainer.style.width=s+"px",e.calendarContainer.style.width=s+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function u(r){if(e.selectedDates.length===0){var s=e.config.minDate===void 0||Z(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),f=Re(e.config);s.setHours(f.hours,f.minutes,f.seconds,s.getMilliseconds()),e.selectedDates=[s],e.latestSelectedDateObj=s}r!==void 0&&r.type!=="blur"&&Bi(r);var p=e._input.value;g(),ee(),e._input.value!==p&&e._debouncedChange()}function m(r,s){return r%12+12*J(s===e.l10n.amPM[1])}function h(r){switch(r%24){case 0:case 12:return 12;default:return r%12}}function g(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var r=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,s=(parseInt(e.minuteElement.value,10)||0)%60,f=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(r=m(r,e.amPM.textContent));var p=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Z(e.latestSelectedDateObj,e.config.minDate,!0)===0,D=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Z(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var M=$e(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),T=$e(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),k=$e(r,s,f);if(k>T&&k<M){var O=Ln(M);r=O[0],s=O[1],f=O[2]}}else{if(D){var I=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;r=Math.min(r,I.getHours()),r===I.getHours()&&(s=Math.min(s,I.getMinutes())),s===I.getMinutes()&&(f=Math.min(f,I.getSeconds()))}if(p){var L=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;r=Math.max(r,L.getHours()),r===L.getHours()&&s<L.getMinutes()&&(s=L.getMinutes()),s===L.getMinutes()&&(f=Math.max(f,L.getSeconds()))}}y(r,s,f)}}function l(r){var s=r||e.latestSelectedDateObj;s&&s instanceof Date&&y(s.getHours(),s.getMinutes(),s.getSeconds())}function y(r,s,f){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(r%24,s,f||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=j(e.config.time_24hr?r:(12+r)%12+12*J(r%12===0)),e.minuteElement.value=j(s),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[J(r>=12)]),e.secondElement!==void 0&&(e.secondElement.value=j(f)))}function C(r){var s=W(r),f=parseInt(s.value)+(r.delta||0);(f/1e3>1||r.key==="Enter"&&!/[^\d]/.test(f.toString()))&&Le(f)}function w(r,s,f,p){if(s instanceof Array)return s.forEach(function(D){return w(r,D,f,p)});if(r instanceof Array)return r.forEach(function(D){return w(D,s,f,p)});r.addEventListener(s,f,p),e._handlers.push({remove:function(){return r.removeEventListener(s,f,p)}})}function S(){N("onChange")}function v(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(f){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+f+"]"),function(p){return w(p,"click",e[f])})}),e.isMobile){Ti();return}var r=vt(Ei,50);if(e._debouncedChange=vt(S,Tn),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&w(e.daysContainer,"mouseover",function(f){e.config.mode==="range"&&Te(W(f))}),w(e._input,"keydown",mn),e.calendarContainer!==void 0&&w(e.calendarContainer,"keydown",mn),!e.config.inline&&!e.config.static&&w(window,"resize",r),window.ontouchstart!==void 0?w(window.document,"touchstart",st):w(window.document,"mousedown",st),w(window.document,"focus",st,{capture:!0}),e.config.clickOpens===!0&&(w(e._input,"focus",e.open),w(e._input,"click",e.open)),e.daysContainer!==void 0&&(w(e.monthNav,"click",Fi),w(e.monthNav,["keyup","increment"],C),w(e.daysContainer,"click",bn)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var s=function(f){return W(f).select()};w(e.timeContainer,["increment"],u),w(e.timeContainer,"blur",u,{capture:!0}),w(e.timeContainer,"click",E),w([e.hourElement,e.minuteElement],["focus","click"],s),e.secondElement!==void 0&&w(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&w(e.amPM,"click",function(f){u(f)})}e.config.allowInput&&w(e._input,"blur",Di)}function b(r,s){var f=r!==void 0?e.parseDate(r):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),p=e.currentYear,D=e.currentMonth;try{f!==void 0&&(e.currentYear=f.getFullYear(),e.currentMonth=f.getMonth())}catch(M){M.message="Invalid date supplied: "+f,e.config.errorHandler(M)}s&&e.currentYear!==p&&(N("onYearChange"),ue()),s&&(e.currentYear!==p||e.currentMonth!==D)&&N("onMonthChange"),e.redraw()}function E(r){var s=W(r);~s.className.indexOf("arrow")&&x(r,s.classList.contains("arrowUp")?1:-1)}function x(r,s,f){var p=r&&W(r),D=f||p&&p.parentNode&&p.parentNode.firstChild,M=ct("increment");M.delta=s,D&&D.dispatchEvent(M)}function A(){var r=window.document.createDocumentFragment();if(e.calendarContainer=q("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(r.appendChild(pi()),e.innerContainer=q("div","flatpickr-innerContainer"),e.config.weekNumbers){var s=yi(),f=s.weekWrapper,p=s.weekNumbers;e.innerContainer.appendChild(f),e.weekNumbers=p,e.weekWrapper=f}e.rContainer=q("div","flatpickr-rContainer"),e.rContainer.appendChild(gn()),e.daysContainer||(e.daysContainer=q("div","flatpickr-days"),e.daysContainer.tabIndex=-1),Pe(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),r.appendChild(e.innerContainer)}e.config.enableTime&&r.appendChild(vi()),z(e.calendarContainer,"rangeMode",e.config.mode==="range"),z(e.calendarContainer,"animate",e.config.animate===!0),z(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(r);var D=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!D&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var M=q("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(M,e.element),M.appendChild(e.element),e.altInput&&M.appendChild(e.altInput),M.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function P(r,s,f,p){var D=oe(s,!0),M=q("span",r,s.getDate().toString());return M.dateObj=s,M.$i=p,M.setAttribute("aria-label",e.formatDate(s,e.config.ariaDateFormat)),r.indexOf("hidden")===-1&&Z(s,e.now)===0&&(e.todayDateElem=M,M.classList.add("today"),M.setAttribute("aria-current","date")),D?(M.tabIndex=-1,dt(s)&&(M.classList.add("selected"),e.selectedDateElem=M,e.config.mode==="range"&&(z(M,"startRange",e.selectedDates[0]&&Z(s,e.selectedDates[0],!0)===0),z(M,"endRange",e.selectedDates[1]&&Z(s,e.selectedDates[1],!0)===0),r==="nextMonthDay"&&M.classList.add("inRange")))):M.classList.add("flatpickr-disabled"),e.config.mode==="range"&&qi(s)&&!dt(s)&&M.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&r!=="prevMonthDay"&&p%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(s)+"</span>"),N("onDayCreate",M),M}function F(r){r.focus(),e.config.mode==="range"&&Te(r)}function _(r){for(var s=r>0?0:e.config.showMonths-1,f=r>0?e.config.showMonths:-1,p=s;p!=f;p+=r)for(var D=e.daysContainer.children[p],M=r>0?0:D.children.length-1,T=r>0?D.children.length:-1,k=M;k!=T;k+=r){var O=D.children[k];if(O.className.indexOf("hidden")===-1&&oe(O.dateObj))return O}}function U(r,s){for(var f=r.className.indexOf("Month")===-1?r.dateObj.getMonth():e.currentMonth,p=s>0?e.config.showMonths:-1,D=s>0?1:-1,M=f-e.currentMonth;M!=p;M+=D)for(var T=e.daysContainer.children[M],k=f-e.currentMonth===M?r.$i+s:s<0?T.children.length-1:0,O=T.children.length,I=k;I>=0&&I<O&&I!=(s>0?O:-1);I+=D){var L=T.children[I];if(L.className.indexOf("hidden")===-1&&oe(L.dateObj)&&Math.abs(r.$i-I)>=Math.abs(s))return F(L)}e.changeMonth(D),V(_(D),0)}function V(r,s){var f=o(),p=Ae(f||document.body),D=r!==void 0?r:p?f:e.selectedDateElem!==void 0&&Ae(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ae(e.todayDateElem)?e.todayDateElem:_(s>0?1:-1);D===void 0?e._input.focus():p?U(D,s):F(D)}function ke(r,s){for(var f=(new Date(r,s,1).getDay()-e.l10n.firstDayOfWeek+7)%7,p=e.utils.getDaysInMonth((s-1+12)%12,r),D=e.utils.getDaysInMonth(s,r),M=window.document.createDocumentFragment(),T=e.config.showMonths>1,k=T?"prevMonthDay hidden":"prevMonthDay",O=T?"nextMonthDay hidden":"nextMonthDay",I=p+1-f,L=0;I<=p;I++,L++)M.appendChild(P("flatpickr-day "+k,new Date(r,s-1,I),I,L));for(I=1;I<=D;I++,L++)M.appendChild(P("flatpickr-day",new Date(r,s,I),I,L));for(var B=D+1;B<=42-f&&(e.config.showMonths===1||L%7!==0);B++,L++)M.appendChild(P("flatpickr-day "+O,new Date(r,s+1,B%D),B,L));var G=q("div","dayContainer");return G.appendChild(M),G}function Pe(){if(e.daysContainer!==void 0){be(e.daysContainer),e.weekNumbers&&be(e.weekNumbers);for(var r=document.createDocumentFragment(),s=0;s<e.config.showMonths;s++){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+s),r.appendChild(ke(f.getFullYear(),f.getMonth()))}e.daysContainer.appendChild(r),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Te()}}function ue(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var r=function(p){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&p<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&p>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var s=0;s<12;s++)if(r(s)){var f=q("option","flatpickr-monthDropdown-month");f.value=new Date(e.currentYear,s).getMonth().toString(),f.textContent=De(s,e.config.shorthandCurrentMonth,e.l10n),f.tabIndex=-1,e.currentMonth===s&&(f.selected=!0),e.monthsDropdownContainer.appendChild(f)}}}function mi(){var r=q("div","flatpickr-month"),s=window.document.createDocumentFragment(),f;e.config.showMonths>1||e.config.monthSelectorType==="static"?f=q("span","cur-month"):(e.monthsDropdownContainer=q("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),w(e.monthsDropdownContainer,"change",function(T){var k=W(T),O=parseInt(k.value,10);e.changeMonth(O-e.currentMonth),N("onMonthChange")}),ue(),f=e.monthsDropdownContainer);var p=Ce("cur-year",{tabindex:"-1"}),D=p.getElementsByTagName("input")[0];D.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&D.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(D.setAttribute("max",e.config.maxDate.getFullYear().toString()),D.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var M=q("div","flatpickr-current-month");return M.appendChild(f),M.appendChild(p),s.appendChild(M),r.appendChild(s),{container:r,yearElement:D,monthElement:f}}function fn(){be(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var r=e.config.showMonths;r--;){var s=mi();e.yearElements.push(s.yearElement),e.monthElements.push(s.monthElement),e.monthNav.appendChild(s.container)}e.monthNav.appendChild(e.nextMonthNav)}function pi(){return e.monthNav=q("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=q("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=q("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,fn(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(r){e.__hidePrevMonthArrow!==r&&(z(e.prevMonthNav,"flatpickr-disabled",r),e.__hidePrevMonthArrow=r)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(r){e.__hideNextMonthArrow!==r&&(z(e.nextMonthNav,"flatpickr-disabled",r),e.__hideNextMonthArrow=r)}}),e.currentYearElement=e.yearElements[0],Fe(),e.monthNav}function vi(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var r=Re(e.config);e.timeContainer=q("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var s=q("span","flatpickr-time-separator",":"),f=Ce("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=f.getElementsByTagName("input")[0];var p=Ce("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=p.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=j(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?r.hours:h(r.hours)),e.minuteElement.value=j(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():r.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(f),e.timeContainer.appendChild(s),e.timeContainer.appendChild(p),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var D=Ce("flatpickr-second");e.secondElement=D.getElementsByTagName("input")[0],e.secondElement.value=j(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():r.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(q("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(D)}return e.config.time_24hr||(e.amPM=q("span","flatpickr-am-pm",e.l10n.amPM[J((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function gn(){e.weekdayContainer?be(e.weekdayContainer):e.weekdayContainer=q("div","flatpickr-weekdays");for(var r=e.config.showMonths;r--;){var s=q("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(s)}return hn(),e.weekdayContainer}function hn(){if(e.weekdayContainer){var r=e.l10n.firstDayOfWeek,s=bt(e.l10n.weekdays.shorthand);r>0&&r<s.length&&(s=bt(s.splice(r,s.length),s.splice(0,r)));for(var f=e.config.showMonths;f--;)e.weekdayContainer.children[f].innerHTML=`
      <span class='flatpickr-weekday'>
        `+s.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function yi(){e.calendarContainer.classList.add("hasWeeks");var r=q("div","flatpickr-weekwrapper");r.appendChild(q("span","flatpickr-weekday",e.l10n.weekAbbreviation));var s=q("div","flatpickr-weeks");return r.appendChild(s),{weekWrapper:r,weekNumbers:s}}function ot(r,s){s===void 0&&(s=!0);var f=s?r:r-e.currentMonth;f<0&&e._hidePrevMonthArrow===!0||f>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=f,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,N("onYearChange"),ue()),Pe(),N("onMonthChange"),Fe())}function wi(r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,s===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var f=Re(e.config),p=f.hours,D=f.minutes,M=f.seconds;y(p,D,M)}e.redraw(),r&&N("onChange")}function bi(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),N("onClose")}function Ci(){e.config!==void 0&&N("onDestroy");for(var r=e._handlers.length;r--;)e._handlers[r].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var s=e.calendarContainer.parentNode;if(s.lastChild&&s.removeChild(s.lastChild),s.parentNode){for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.parentNode.removeChild(s)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(f){try{delete e[f]}catch{}})}function ye(r){return e.calendarContainer.contains(r)}function st(r){if(e.isOpen&&!e.config.inline){var s=W(r),f=ye(s),p=s===e.input||s===e.altInput||e.element.contains(s)||r.path&&r.path.indexOf&&(~r.path.indexOf(e.input)||~r.path.indexOf(e.altInput)),D=!p&&!f&&!ye(r.relatedTarget),M=!e.config.ignoredFocusElements.some(function(T){return T.contains(s)});D&&M&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&u(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Le(r){if(!(!r||e.config.minDate&&r<e.config.minDate.getFullYear()||e.config.maxDate&&r>e.config.maxDate.getFullYear())){var s=r,f=e.currentYear!==s;e.currentYear=s||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),f&&(e.redraw(),N("onYearChange"),ue())}}function oe(r,s){var f;s===void 0&&(s=!0);var p=e.parseDate(r,void 0,s);if(e.config.minDate&&p&&Z(p,e.config.minDate,s!==void 0?s:!e.minDateHasTime)<0||e.config.maxDate&&p&&Z(p,e.config.maxDate,s!==void 0?s:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(p===void 0)return!1;for(var D=!!e.config.enable,M=(f=e.config.enable)!==null&&f!==void 0?f:e.config.disable,T=0,k=void 0;T<M.length;T++){if(k=M[T],typeof k=="function"&&k(p))return D;if(k instanceof Date&&p!==void 0&&k.getTime()===p.getTime())return D;if(typeof k=="string"){var O=e.parseDate(k,void 0,!0);return O&&O.getTime()===p.getTime()?D:!D}else if(typeof k=="object"&&p!==void 0&&k.from&&k.to&&p.getTime()>=k.from.getTime()&&p.getTime()<=k.to.getTime())return D}return!D}function Ae(r){return e.daysContainer!==void 0?r.className.indexOf("hidden")===-1&&r.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(r):!1}function Di(r){var s=r.target===e._input,f=e._input.value.trimEnd()!==ut();s&&f&&!(r.relatedTarget&&ye(r.relatedTarget))&&e.setDate(e._input.value,!0,r.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function mn(r){var s=W(r),f=e.config.wrap?n.contains(s):s===e._input,p=e.config.allowInput,D=e.isOpen&&(!p||!f),M=e.config.inline&&f&&!p;if(r.keyCode===13&&f){if(p)return e.setDate(e._input.value,!0,s===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),s.blur();e.open()}else if(ye(s)||D||M){var T=!!e.timeContainer&&e.timeContainer.contains(s);switch(r.keyCode){case 13:T?(r.preventDefault(),u(),lt()):bn(r);break;case 27:r.preventDefault(),lt();break;case 8:case 46:f&&!e.config.allowInput&&(r.preventDefault(),e.clear());break;case 37:case 39:if(!T&&!f){r.preventDefault();var k=o();if(e.daysContainer!==void 0&&(p===!1||k&&Ae(k))){var O=r.keyCode===39?1:-1;r.ctrlKey?(r.stopPropagation(),ot(O),V(_(1),0)):V(void 0,O)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:r.preventDefault();var I=r.keyCode===40?1:-1;e.daysContainer&&s.$i!==void 0||s===e.input||s===e.altInput?r.ctrlKey?(r.stopPropagation(),Le(e.currentYear-I),V(_(1),0)):T||V(void 0,I*7):s===e.currentYearElement?Le(e.currentYear-I):e.config.enableTime&&(!T&&e.hourElement&&e.hourElement.focus(),u(r),e._debouncedChange());break;case 9:if(T){var L=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(K){return K}),B=L.indexOf(s);if(B!==-1){var G=L[B+(r.shiftKey?-1:1)];r.preventDefault(),(G||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(s)&&r.shiftKey&&(r.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&s===e.amPM)switch(r.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],g(),ee();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],g(),ee();break}(f||ye(s))&&N("onKeyDown",r)}function Te(r,s){if(s===void 0&&(s="flatpickr-day"),!(e.selectedDates.length!==1||r&&(!r.classList.contains(s)||r.classList.contains("flatpickr-disabled")))){for(var f=r?r.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),p=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),D=Math.min(f,e.selectedDates[0].getTime()),M=Math.max(f,e.selectedDates[0].getTime()),T=!1,k=0,O=0,I=D;I<M;I+=An.DAY)oe(new Date(I),!0)||(T=T||I>D&&I<M,I<p&&(!k||I>k)?k=I:I>p&&(!O||I<O)&&(O=I));var L=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+s));L.forEach(function(B){var G=B.dateObj,K=G.getTime(),we=k>0&&K<k||O>0&&K>O;if(we){B.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(fe){B.classList.remove(fe)});return}else if(T&&!we)return;["startRange","inRange","endRange","notAllowed"].forEach(function(fe){B.classList.remove(fe)}),r!==void 0&&(r.classList.add(f<=e.selectedDates[0].getTime()?"startRange":"endRange"),p<f&&K===p?B.classList.add("startRange"):p>f&&K===p&&B.classList.add("endRange"),K>=k&&(O===0||K<=O)&&Pn(K,p,f)&&B.classList.add("inRange"))})}}function Ei(){e.isOpen&&!e.config.static&&!e.config.inline&&Oe()}function Mi(r,s){if(s===void 0&&(s=e._positionElement),e.isMobile===!0){if(r){r.preventDefault();var f=W(r);f&&f.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),N("onOpen");return}else if(e._input.disabled||e.config.inline)return;var p=e.isOpen;e.isOpen=!0,p||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),N("onOpen"),Oe(s)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(r===void 0||!e.timeContainer.contains(r.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function pn(r){return function(s){var f=e.config["_"+r+"Date"]=e.parseDate(s,e.config.dateFormat),p=e.config["_"+(r==="min"?"max":"min")+"Date"];f!==void 0&&(e[r==="min"?"minDateHasTime":"maxDateHasTime"]=f.getHours()>0||f.getMinutes()>0||f.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(D){return oe(D)}),!e.selectedDates.length&&r==="min"&&l(f),ee()),e.daysContainer&&(wn(),f!==void 0?e.currentYearElement[r]=f.getFullYear().toString():e.currentYearElement.removeAttribute(r),e.currentYearElement.disabled=!!p&&f!==void 0&&p.getFullYear()===f.getFullYear())}}function Si(){var r=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=R(R({},JSON.parse(JSON.stringify(n.dataset||{}))),t),f={};e.config.parseDate=s.parseDate,e.config.formatDate=s.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(L){e.config._enable=Dn(L)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(L){e.config._disable=Dn(L)}});var p=s.mode==="time";if(!s.dateFormat&&(s.enableTime||p)){var D=H.defaultConfig.dateFormat||se.dateFormat;f.dateFormat=s.noCalendar||p?"H:i"+(s.enableSeconds?":S":""):D+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||p)&&!s.altFormat){var M=H.defaultConfig.altFormat||se.altFormat;f.altFormat=s.noCalendar||p?"h:i"+(s.enableSeconds?":S K":" K"):M+(" h:i"+(s.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:pn("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:pn("max")});var T=function(L){return function(B){e.config[L==="min"?"_minTime":"_maxTime"]=e.parseDate(B,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:T("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:T("max")}),s.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,f,s);for(var k=0;k<r.length;k++)e.config[r[k]]=e.config[r[k]]===!0||e.config[r[k]]==="true";Be.filter(function(L){return e.config[L]!==void 0}).forEach(function(L){e.config[L]=Ne(e.config[L]||[]).map(c)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var k=0;k<e.config.plugins.length;k++){var O=e.config.plugins[k](e)||{};for(var I in O)Be.indexOf(I)>-1?e.config[I]=Ne(O[I]).map(c).concat(e.config[I]):typeof s[I]>"u"&&(e.config[I]=O[I])}s.altInputClass||(e.config.altInputClass=vn().className+" "+e.config.altInputClass),N("onParseConfig")}function vn(){return e.config.wrap?n.querySelector("[data-input]"):n}function yn(){typeof e.config.locale!="object"&&typeof H.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=R(R({},H.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?H.l10ns[e.config.locale]:void 0),te.D="("+e.l10n.weekdays.shorthand.join("|")+")",te.l="("+e.l10n.weekdays.longhand.join("|")+")",te.M="("+e.l10n.months.shorthand.join("|")+")",te.F="("+e.l10n.months.longhand.join("|")+")",te.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var r=R(R({},t),JSON.parse(JSON.stringify(n.dataset||{})));r.time_24hr===void 0&&H.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=wt(e),e.parseDate=He({config:e.config,l10n:e.l10n})}function Oe(r){if(typeof e.config.position=="function")return void e.config.position(e,r);if(e.calendarContainer!==void 0){N("onPreCalendarPosition");var s=r||e._positionElement,f=Array.prototype.reduce.call(e.calendarContainer.children,function(ji,Vi){return ji+Vi.offsetHeight},0),p=e.calendarContainer.offsetWidth,D=e.config.position.split(" "),M=D[0],T=D.length>1?D[1]:null,k=s.getBoundingClientRect(),O=window.innerHeight-k.bottom,I=M==="above"||M!=="below"&&O<f&&k.top>f,L=window.pageYOffset+k.top+(I?-f-2:s.offsetHeight+2);if(z(e.calendarContainer,"arrowTop",!I),z(e.calendarContainer,"arrowBottom",I),!e.config.inline){var B=window.pageXOffset+k.left,G=!1,K=!1;T==="center"?(B-=(p-k.width)/2,G=!0):T==="right"&&(B-=p-k.width,K=!0),z(e.calendarContainer,"arrowLeft",!G&&!K),z(e.calendarContainer,"arrowCenter",G),z(e.calendarContainer,"arrowRight",K);var we=window.document.body.offsetWidth-(window.pageXOffset+k.right),fe=B+p>window.document.body.offsetWidth,Ni=we+p>window.document.body.offsetWidth;if(z(e.calendarContainer,"rightMost",fe),!e.config.static)if(e.calendarContainer.style.top=L+"px",!fe)e.calendarContainer.style.left=B+"px",e.calendarContainer.style.right="auto";else if(!Ni)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=we+"px";else{var ft=Ii();if(ft===void 0)return;var _i=window.document.body.offsetWidth,Hi=Math.max(0,_i/2-p/2),$i=".flatpickr-calendar.centerMost:before",Ri=".flatpickr-calendar.centerMost:after",Yi=ft.cssRules.length,zi="{left:"+k.left+"px;right:auto;}";z(e.calendarContainer,"rightMost",!1),z(e.calendarContainer,"centerMost",!0),ft.insertRule($i+","+Ri+zi,Yi),e.calendarContainer.style.left=Hi+"px",e.calendarContainer.style.right="auto"}}}}function Ii(){for(var r=null,s=0;s<document.styleSheets.length;s++){var f=document.styleSheets[s];if(f.cssRules){try{f.cssRules}catch{continue}r=f;break}}return r??xi()}function xi(){var r=document.createElement("style");return document.head.appendChild(r),r.sheet}function wn(){e.config.noCalendar||e.isMobile||(ue(),Fe(),Pe())}function lt(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function bn(r){r.preventDefault(),r.stopPropagation();var s=function(L){return L.classList&&L.classList.contains("flatpickr-day")&&!L.classList.contains("flatpickr-disabled")&&!L.classList.contains("notAllowed")},f=yt(W(r),s);if(f!==void 0){var p=f,D=e.latestSelectedDateObj=new Date(p.dateObj.getTime()),M=(D.getMonth()<e.currentMonth||D.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=p,e.config.mode==="single")e.selectedDates=[D];else if(e.config.mode==="multiple"){var T=dt(D);T?e.selectedDates.splice(parseInt(T),1):e.selectedDates.push(D)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=D,e.selectedDates.push(D),Z(D,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(L,B){return L.getTime()-B.getTime()}));if(g(),M){var k=e.currentYear!==D.getFullYear();e.currentYear=D.getFullYear(),e.currentMonth=D.getMonth(),k&&(N("onYearChange"),ue()),N("onMonthChange")}if(Fe(),Pe(),ee(),!M&&e.config.mode!=="range"&&e.config.showMonths===1?F(p):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var O=e.config.mode==="single"&&!e.config.enableTime,I=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(O||I)&&lt()}S()}}var qe={locale:[yn,hn],showMonths:[fn,d,gn],minDate:[b],maxDate:[b],positionElement:[En],clickOpens:[function(){e.config.clickOpens===!0?(w(e._input,"focus",e.open),w(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function ki(r,s){if(r!==null&&typeof r=="object"){Object.assign(e.config,r);for(var f in r)qe[f]!==void 0&&qe[f].forEach(function(p){return p()})}else e.config[r]=s,qe[r]!==void 0?qe[r].forEach(function(p){return p()}):Be.indexOf(r)>-1&&(e.config[r]=Ne(s));e.redraw(),ee(!0)}function Cn(r,s){var f=[];if(r instanceof Array)f=r.map(function(p){return e.parseDate(p,s)});else if(r instanceof Date||typeof r=="number")f=[e.parseDate(r,s)];else if(typeof r=="string")switch(e.config.mode){case"single":case"time":f=[e.parseDate(r,s)];break;case"multiple":f=r.split(e.config.conjunction).map(function(p){return e.parseDate(p,s)});break;case"range":f=r.split(e.l10n.rangeSeparator).map(function(p){return e.parseDate(p,s)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(r)));e.selectedDates=e.config.allowInvalidPreload?f:f.filter(function(p){return p instanceof Date&&oe(p,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(p,D){return p.getTime()-D.getTime()})}function Pi(r,s,f){if(s===void 0&&(s=!1),f===void 0&&(f=e.config.dateFormat),r!==0&&!r||r instanceof Array&&r.length===0)return e.clear(s);Cn(r,f),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),b(void 0,s),l(),e.selectedDates.length===0&&e.clear(!1),ee(s),s&&N("onChange")}function Dn(r){return r.slice().map(function(s){return typeof s=="string"||typeof s=="number"||s instanceof Date?e.parseDate(s,void 0,!0):s&&typeof s=="object"&&s.from&&s.to?{from:e.parseDate(s.from,void 0),to:e.parseDate(s.to,void 0)}:s}).filter(function(s){return s})}function Li(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var r=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);r&&Cn(r,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Ai(){if(e.input=vn(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=q(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),En()}function En(){e._positionElement=e.config.positionElement||e._input}function Ti(){var r=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=q("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=r,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=r==="datetime-local"?"Y-m-d\\TH:i:S":r==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}w(e.mobileInput,"change",function(s){e.setDate(W(s).value,!1,e.mobileFormatStr),N("onChange"),N("onClose")})}function Oi(r){if(e.isOpen===!0)return e.close();e.open(r)}function N(r,s){if(e.config!==void 0){var f=e.config[r];if(f!==void 0&&f.length>0)for(var p=0;f[p]&&p<f.length;p++)f[p](e.selectedDates,e.input.value,e,s);r==="onChange"&&(e.input.dispatchEvent(ct("change")),e.input.dispatchEvent(ct("input")))}}function ct(r){var s=document.createEvent("Event");return s.initEvent(r,!0,!0),s}function dt(r){for(var s=0;s<e.selectedDates.length;s++){var f=e.selectedDates[s];if(f instanceof Date&&Z(f,r)===0)return""+s}return!1}function qi(r){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Z(r,e.selectedDates[0])>=0&&Z(r,e.selectedDates[1])<=0}function Fe(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(r,s){var f=new Date(e.currentYear,e.currentMonth,1);f.setMonth(e.currentMonth+s),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[s].textContent=De(f.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=f.getMonth().toString(),r.value=f.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function ut(r){var s=r||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(f){return e.formatDate(f,s)}).filter(function(f,p,D){return e.config.mode!=="range"||e.config.enableTime||D.indexOf(f)===p}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function ee(r){r===void 0&&(r=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=ut(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=ut(e.config.altFormat)),r!==!1&&N("onValueUpdate")}function Fi(r){var s=W(r),f=e.prevMonthNav.contains(s),p=e.nextMonthNav.contains(s);f||p?ot(f?-1:1):e.yearElements.indexOf(s)>=0?s.select():s.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):s.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Bi(r){r.preventDefault();var s=r.type==="keydown",f=W(r),p=f;e.amPM!==void 0&&f===e.amPM&&(e.amPM.textContent=e.l10n.amPM[J(e.amPM.textContent===e.l10n.amPM[0])]);var D=parseFloat(p.getAttribute("min")),M=parseFloat(p.getAttribute("max")),T=parseFloat(p.getAttribute("step")),k=parseInt(p.value,10),O=r.delta||(s?r.which===38?1:-1:0),I=k+T*O;if(typeof p.value<"u"&&p.value.length===2){var L=p===e.hourElement,B=p===e.minuteElement;I<D?(I=M+I+J(!L)+(J(L)&&J(!e.amPM)),B&&x(void 0,-1,e.hourElement)):I>M&&(I=p===e.hourElement?I-M-J(!e.amPM):D,B&&x(void 0,1,e.hourElement)),e.amPM&&L&&(T===1?I+k===23:Math.abs(I-k)>T)&&(e.amPM.textContent=e.l10n.amPM[J(e.amPM.textContent===e.l10n.amPM[0])]),p.value=j(I)}}return a(),e}function le(n,t){for(var e=Array.prototype.slice.call(n).filter(function(c){return c instanceof HTMLElement}),i=[],a=0;a<e.length;a++){var o=e[a];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=On(o,t||{}),i.push(o._flatpickr)}catch(c){console.error(c)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return le(this,n)},HTMLElement.prototype.flatpickr=function(n){return le([this],n)});var H=function(n,t){return typeof n=="string"?le(window.document.querySelectorAll(n),t):n instanceof Node?le([n],t):le(n,t)};H.defaultConfig={},H.l10ns={en:R({},ge),default:R({},ge)},H.localize=function(n){H.l10ns.default=R(R({},H.l10ns.default),n)},H.setDefaults=function(n){H.defaultConfig=R(R({},H.defaultConfig),n)},H.parseDate=He({}),H.formatDate=wt({}),H.compareDates=Z,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return le(this,n)}),Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))},typeof window<"u"&&(window.flatpickr=H);var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ye={exports:{}};(function(n,t){(function(e,i){i(t)})(qn,function(e){var i=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},a={weekdays:{shorthand:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longhand:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},months:{shorthand:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],longhand:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},firstDayOfWeek:1,ordinal:function(){return""},rangeSeparator:" — ",weekAbbreviation:"Нед.",scrollTitle:"Прокрутите для увеличения",toggleTitle:"Нажмите для переключения",amPM:["ДП","ПП"],yearAriaLabel:"Год",time_24hr:!0};i.l10ns.ru=a;var o=i.l10ns;e.Russian=a,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})})})(Ye,Ye.exports);var Bn=Ye.exports;class ze{constructor(t={}){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this._init(t)):this._init(t)}_init(t){this.options={inputId:t.inputId||"date-range-input",containerId:t.containerId||"date-range-container",placeholder:t.placeholder||"Выберите период",format:t.format||"d.m.Y",locale:t.locale||"ru",onRangeSelect:t.onRangeSelect||null,allowSingleDate:t.allowSingleDate||!1,autoApply:t.autoApply!==!1,defaultRange:t.defaultRange!==!1,...t},this.startDate=null,this.endDate=null,this.inputElement=null,this.flatpickrInstance=null,this.footerApplyBtn=null,this.init()}init(){this.createElements(),this.initializeFlatpickr()}createElements(){const t=document.getElementById(this.options.containerId);if(!t){console.error(`Контейнер с ID ${this.options.containerId} не найден`);return}const e=document.createElement("div");e.style.position="relative",e.style.width="100%",this.inputElement=document.createElement("input"),this.inputElement.type="text",this.inputElement.id=this.options.inputId,this.inputElement.className="input input-bordered w-full",this.inputElement.placeholder=this.options.placeholder,this.inputElement.readOnly=!0,this.inputElement.style.cursor="pointer",this.inputElement.style.paddingRight="40px";const i=document.createElement("div");i.style.position="absolute",i.style.right="12px",i.style.top="50%",i.style.transform="translateY(-50%)",i.style.zIndex="2",i.style.pointerEvents="none",i.innerHTML=`
      <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10.3318 3.33301C10.3318 3.06779 10.2265 2.81344 10.0389 2.6259C9.85141 2.43836 9.59706 2.33301 9.33184 2.33301C9.06662 2.33301 8.81227 2.43836 8.62473 2.6259C8.4372 2.81344 8.33184 3.06779 8.33184 3.33301V5.43967C6.41184 5.59301 5.15317 5.96901 4.22784 6.89567C3.30117 7.82101 2.92517 9.08101 2.77051 10.9997H29.2265C29.0718 9.07967 28.6958 7.82101 27.7692 6.89567C26.8438 5.96901 25.5838 5.59301 23.6652 5.43834V3.33301C23.6652 3.06779 23.5598 2.81344 23.3723 2.6259C23.1847 2.43836 22.9304 2.33301 22.6652 2.33301C22.4 2.33301 22.1456 2.43836 21.9581 2.6259C21.7705 2.81344 21.6652 3.06779 21.6652 3.33301V5.35034C20.7785 5.33301 19.7838 5.33301 18.6652 5.33301H13.3318C12.2132 5.33301 11.2185 5.33301 10.3318 5.35034V3.33301Z" fill="#008DD2"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M2.66699 16C2.66699 14.8813 2.66699 13.8867 2.68433 13H29.3163C29.3337 13.8867 29.3337 14.8813 29.3337 16V18.6667C29.3337 23.6947 29.3337 26.2093 27.771 27.7707C26.2083 29.332 23.695 29.3333 18.667 29.3333H13.3337C8.30566 29.3333 5.79099 29.3333 4.22966 27.7707C2.66833 26.208 2.66699 23.6947 2.66699 18.6667V16ZM22.667 18.6667C23.0206 18.6667 23.3598 18.5262 23.6098 18.2761C23.8598 18.0261 24.0003 17.687 24.0003 17.3333C24.0003 16.9797 23.8598 16.6406 23.6098 16.3905C23.3598 16.1405 23.0206 16 22.667 16C22.3134 16 21.9742 16.1405 21.7242 16.3905C21.4741 16.6406 21.3337 16.9797 21.3337 17.3333C21.3337 17.687 21.4741 18.0261 21.7242 18.2761C21.9742 18.5262 22.3134 18.6667 22.667 18.6667ZM22.667 24C23.0206 24 23.3598 23.8595 23.6098 23.6095C23.8598 23.3594 24.0003 23.0203 24.0003 22.6667C24.0003 22.313 23.8598 21.9739 23.6098 21.7239C23.3598 21.4738 23.0206 21.3333 22.667 21.3333C22.3134 21.3333 21.9742 21.4738 21.7242 21.7239C21.4741 21.9739 21.3337 22.313 21.3337 22.6667C21.3337 23.0203 21.4741 23.3594 21.7242 23.6095C21.9742 23.8595 22.3134 24 22.667 24ZM17.3337 17.3333C17.3337 17.687 17.1932 18.0261 16.9431 18.2761C16.6931 18.5262 16.3539 18.6667 16.0003 18.6667C15.6467 18.6667 15.3076 18.5262 15.0575 18.2761C14.8075 18.0261 14.667 17.687 14.667 17.3333C14.667 16.9797 14.8075 16.6406 15.0575 16.3905C15.3076 16.1405 15.6467 16 16.0003 16C16.3539 16 16.6931 16.1405 16.9431 16.3905C17.1932 16.6406 17.3337 16.9797 17.3337 17.3333ZM17.3337 22.6667C17.3337 23.0203 17.1932 23.3594 16.9431 23.6095C16.6931 23.8595 16.3539 24 16.0003 24C15.6467 24 15.3076 23.8595 15.0575 23.6095C14.8075 23.3594 14.667 23.0203 14.667 22.6667C14.667 22.313 14.8075 21.9739 15.0575 21.7239C15.3076 21.4738 15.6467 21.3333 16.0003 21.3333C16.3539 21.3333 16.6931 21.4738 16.9431 21.7239C17.1932 21.9739 17.3337 22.313 17.3337 22.6667ZM9.33366 18.6667C9.68728 18.6667 10.0264 18.5262 10.2765 18.2761C10.5265 18.0261 10.667 17.687 10.667 17.3333C10.667 16.9797 10.5265 16.6406 10.2765 16.3905C10.0264 16.1405 9.68728 16 9.33366 16C8.98004 16 8.6409 16.1405 8.39085 16.3905C8.1408 16.6406 8.00033 16.9797 8.00033 17.3333C8.00033 17.687 8.1408 18.0261 8.39085 18.2761C8.6409 18.5262 8.98004 18.6667 9.33366 18.6667ZM9.33366 24C9.68728 24 10.0264 23.8595 10.2765 23.6095C10.5265 23.3594 10.667 23.0203 10.667 22.6667C10.667 22.313 10.5265 21.9739 10.2765 21.7239C10.0264 21.4738 9.68728 21.3333 9.33366 21.3333C8.98004 21.3333 8.6409 21.4738 8.39085 21.7239C8.1408 21.9739 8.00033 22.313 8.00033 22.6667C8.00033 23.0203 8.1408 23.3594 8.39085 23.6095C8.6409 23.8595 8.98004 24 9.33366 24Z" fill="#008DD2"/>
      </svg>
    `,e.appendChild(this.inputElement),e.appendChild(i),t.appendChild(e),this.options.defaultRange&&this.setDefaultRange()}initializeFlatpickr(){const t=this;let e=null;const i={mode:"range",dateFormat:this.options.format,locale:Bn.Russian,allowInput:!1,static:!0,monthSelectorType:"static",enableTime:!1,time_24hr:!0,clickOpens:!1,onOpen:function(a,o,c){t.startDate=null,t.endDate=null,c.clear(),t.updateApplyBtnState(),c._originalClose||(c._originalClose=c.close),c.close=function(){},setTimeout(()=>{t.addOutsideClickHandler(c)},0)},onChange:function(a,o,c){a.length===2?(t.startDate=a[0],t.endDate=a[1]):(t.startDate=a[0]||null,t.endDate=null),t.updateApplyBtnState()},onReady:function(a,o,c){t.addCustomFooter(c,e),t.updateApplyBtnState(),t.addInputClickHandler(c)},onMonthChange:function(a,o,c){t.addCustomFooter(c,e)},onYearChange:function(a,o,c){t.addCustomFooter(c,e)},onClose:function(){t.removeOutsideClickHandler()}};this.flatpickrInstance=H(this.inputElement,i),this._originalClose=e}addCustomFooter(t,e){const i=t.calendarContainer;let a=i.querySelector(".flatpickr-footer");a&&a.remove(),a=document.createElement("div"),a.className="flatpickr-footer",a.style.display="flex",a.style.justifyContent="center";const o=document.createElement("button");o.type="button",o.textContent="Применить",o.className="w-full bg-transparent hover:bg-gray-50 active:bg-gray-100 transition-colors duration-200 p-5 border-t uppercase font-semibold",o.disabled=!0;const c=()=>{o.style.color=o.disabled?"#C5C7CD":"#008dd2"};c(),new MutationObserver(c).observe(o,{attributes:!0,attributeFilter:["disabled"]}),o.addEventListener("click",()=>{o.disabled||(this.applySelection(),this.flatpickrInstance&&this.flatpickrInstance._originalClose&&(this.flatpickrInstance.close=this.flatpickrInstance._originalClose,setTimeout(()=>this.flatpickrInstance.close(),0)))}),a.appendChild(o),i.appendChild(a),this.footerApplyBtn=o}updateApplyBtnState(){this.footerApplyBtn&&(this.startDate&&this.endDate?this.footerApplyBtn.disabled=!1:this.footerApplyBtn.disabled=!0)}setDefaultRange(){const t=new Date,e=new Date;e.setMonth(t.getMonth()-1),this.startDate=e,this.endDate=t,this.flatpickrInstance&&this.flatpickrInstance.setDate([e,t]),this.options.onRangeSelect&&this.options.onRangeSelect({startDate:this.startDate,endDate:this.endDate,formattedRange:this.inputElement?this.inputElement.value:"",isEmpty:!1})}formatDate(t){if(!t)return"";const e=t.getDate().toString().padStart(2,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear();switch(this.options.format){case"d.m.Y":return`${e}.${i}.${a}`;case"m/d/Y":return`${i}/${e}/${a}`;case"Y-m-d":return`${a}-${i}-${e}`;default:return`${e}.${i}.${a}`}}clearSelection(){this.startDate=null,this.endDate=null,this.flatpickrInstance&&this.flatpickrInstance.clear(),this.options.autoApply&&this.applySelection()}applySelection(){console.log("DateRangePicker: applySelection вызван",{startDate:this.startDate,endDate:this.endDate,hasCallback:!!this.options.onRangeSelect});let t="";if(this.startDate&&this.endDate){const e=this.formatDate(this.startDate),i=this.formatDate(this.endDate);t=`${e} ~ ${i}`}else this.startDate&&(t=this.formatDate(this.startDate));if(this.inputElement&&(this.inputElement.value=t),this.options.onRangeSelect&&typeof this.options.onRangeSelect=="function"){const e={startDate:this.startDate,endDate:this.endDate,formattedRange:t,isEmpty:!this.startDate&&!this.endDate};console.log("DateRangePicker: Вызываем onRangeSelect с данными:",e),this.options.onRangeSelect(e)}}getValue(){return{startDate:this.startDate,endDate:this.endDate,formattedRange:this.inputElement?this.inputElement.value:"",isEmpty:!this.startDate&&!this.endDate}}setValue(t,e=null){this.startDate=t?new Date(t):null,this.endDate=e?new Date(e):null,this.flatpickrInstance&&(this.startDate&&this.endDate?this.flatpickrInstance.setDate([this.startDate,this.endDate]):this.startDate?this.flatpickrInstance.setDate(this.startDate):this.flatpickrInstance.clear()),this.options.autoApply&&this.applySelection()}destroy(){this.flatpickrInstance&&(this.flatpickrInstance.destroy(),this.flatpickrInstance=null),this.inputElement&&this.inputElement.remove()}addOutsideClickHandler(t){this.outsideClickHandler=e=>{const i=t.calendarContainer,a=this.inputElement;!i.contains(e.target)&&!a.contains(e.target)&&this.closeCalendar(t)},document.addEventListener("click",this.outsideClickHandler)}removeOutsideClickHandler(){this.outsideClickHandler&&(document.removeEventListener("click",this.outsideClickHandler),this.outsideClickHandler=null)}addInputClickHandler(t){this.inputClickHandler=e=>{e.stopPropagation(),t.isOpen?this.closeCalendar(t):t.open()},this.inputElement.addEventListener("click",this.inputClickHandler)}closeCalendar(t){t&&t._originalClose&&(t.close=t._originalClose,t.close())}}const Ee="#008DD2",je="#666666",X={initialView:{center:{desktop:[54.962902,73.38475],mobile:[53.224854,50.199879]},zoom:{desktop:4,mobile:3}},officeZoom:{desktop:12,mobile:10},maxBoundsZoom:{desktop:18,mobile:7},boundsPadding:[50,50],markerSizing:{minZoom:2,maxZoom:18,minSize:[16,18],maxSize:[36,42],minOffset:[-8,-18],maxOffset:[-18,-42]}};function ne(n){const t=`
  <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M35.114 14.1578C33.014 4.91781 24.954 0.757812 17.874 0.757812C17.874 0.757812 17.874 0.757812 17.854 0.757812C10.794 0.757812 2.71397 4.89781 0.61397 14.1378C-1.72603 24.4578 4.59397 33.1978 10.314 38.6978C12.434 40.7378 15.154 41.7578 17.874 41.7578C20.594 41.7578 23.314 40.7378 25.414 38.6978C31.134 33.1978 37.454 24.4778 35.114 14.1578ZM17.874 24.1778C14.394 24.1778 11.574 21.3578 11.574 17.8778C11.574 14.3978 14.394 11.5778 17.874 11.5778C21.354 11.5778 24.174 14.3978 24.174 17.8778C24.174 21.3578 21.354 24.1778 17.874 24.1778Z" fill="${n}" />
  </svg>`;return`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(t)}`}function ce(n){const t=mt();return n[t]}function Ct(n){const t=mt();return n[t]}function ie(n){const{minZoom:t,maxZoom:e,minSize:i,maxSize:a,minOffset:o,maxOffset:c}=X.markerSizing;if(n<=t)return{size:i,offset:o};if(n>=e)return{size:a,offset:c};const d=(n-t)/(e-t),u=Math.round(i[0]+(a[0]-i[0])*d),m=Math.round(i[1]+(a[1]-i[1])*d),h=m/a[1],g=Math.round(o[0]+(c[0]-o[0])*h),l=Math.round(o[1]+(c[1]-o[1])*h);return{size:[u,m],offset:[g,l]}}function Ve(n){const t=document.querySelector(".map-info-panel");if(!t)return;let e=n.address||"";n.city&&e.trim().startsWith(n.city+",")&&(e=e.replace(n.city+",","").trim()),t.innerHTML=`
    <div class="flex justify-between items-center mb-2">
      <div class="font-bold text-2xl text-brand-gray">${n.city||""}</div>
      <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="text-brand-gray">${e}</div>
    <div class="hidden lg:block text-brand-gray">${n.type||""}</div>
    ${n.phone?`<div class="hidden lg:block text-brand-gray">${n.phone}</div>`:""}
    ${n.email?`<div class="hidden lg:block text-brand-gray">${n.email}</div>`:""}
    <button class="bg-brand-blue mt-2 md:mt-5 text-white rounded-lg py-3 text-buttons text-regular btn">Подробнее</button>
  `,t.classList.remove("hidden");const i=t.querySelector(".close-info-panel");i&&i.addEventListener("click",function(){t.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),Y(null)})}function Y(n,t=null,e=null,i=null){if(document.querySelectorAll(".office-card").forEach(a=>{a.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&Ve(t),e&&i&&(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),e.options)){const a=i.getZoom(),o=ie(a),c=ne(Ee);e.options.set({iconImageHref:c,iconImageSize:o.size,iconImageOffset:o.offset})}}function Me(n,t=null,e=null,i=null,a=null){if(document.querySelectorAll(".office-card").forEach(o=>{o.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&Ve(t),e&&i){if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),typeof window.setActiveMarker=="function"&&window.setActiveMarker(e),e.options){const o=ce(X.officeZoom),c=ie(o),d=ne(Ee);e.options.set({iconImageHref:d,iconImageSize:c.size,iconImageOffset:c.offset})}if(a){const o=ce(X.officeZoom);i.setCenter(a,o,{duration:300})}}}function me(n,t){try{ymaps.ready(function(){const e=ce(X.initialView.zoom),i=Ct(X.initialView.center),a=new ymaps.Map("map",{center:i,zoom:e,controls:["zoomControl","fullscreenControl"],behaviors:["drag","multiTouch","scrollZoom"]});window.currentMap=a,window.mapInstance=a;const o=new ymaps.GeoObjectCollection,c={};window.officeMarkers=c;let d=null;window.setActiveMarker=function(g){d=g},window.getActiveMarker=function(){return d};const u=ie(e),m={iconLayout:"default#image",iconImageHref:ne(je),iconImageSize:u.size,iconImageOffset:u.offset};function h(g){const l=ie(g);Object.values(c).forEach(y=>{const C=y.options.get("iconImageHref").includes(encodeURIComponent(Ee));y.options.set({iconImageSize:l.size,iconImageOffset:l.offset})})}window.resetAllMarkers=function(){const g=a.getZoom(),l=ie(g);Object.values(c).forEach(y=>{const C=ne(je);y.options.set({iconImageHref:C,iconImageSize:l.size,iconImageOffset:l.offset})})},window.showAllOfficesOnMap=function(g){if(!g||g.length===0)return;const l=g.reduce((y,C)=>y.extend(C),new ymaps.geometry.LineString(g).getBounds());a.setBounds(l,{checkZoomRange:!0,zoomMargin:X.boundsPadding})},n.forEach((g,l)=>{if(!g.coordinates||g.coordinates.length!==2)return;const y=ne(je),C=new ymaps.Placemark(g.coordinates,{hintContent:g.city},{iconLayout:"default#image",iconImageHref:y,iconImageSize:u.size,iconImageOffset:u.offset});c[l]=C,o.add(C),C.events.add("click",()=>{const w=a.getZoom(),S=ce(X.officeZoom),v=ce(X.initialView.zoom),b=Math.abs(w-S)<3;if(!(d===C))Y(null,g,C,a),d=C;else if(!b)Me(null,g,C,a,C.geometry.getCoordinates());else{const x=a.getCenter(),A=ie(v),P=ne(Ee);a.setZoom(v,{duration:300}),setTimeout(()=>{C&&C.options&&C.options.set({iconImageHref:P,iconImageSize:A.size,iconImageOffset:A.offset})},350)}})}),a.geoObjects.add(o),a.events.add("boundschange",function(g){g.get("oldZoom")!==g.get("newZoom")&&h(g.get("newZoom"))}),o.getLength()>0&&a.setCenter(i,e)})}catch(e){console.error("Ошибка при инициализации карты:",e)}}function Dt(){if(typeof Swiper>"u"){console.error("Swiper не загружен!");return}if(new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,speed:800,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e4,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){console.log("Swiper инициализирован")}}}),document.querySelector(".news-swiper-container")){console.log("Инициализация Swiper для новостей с уже существующими слайдами...");const n=document.querySelector(".news-swiper-container .swiper-wrapper"),t=n?n.querySelectorAll(".swiper-slide"):[];console.log(`Найдено ${t.length} существующих слайдов новостей от шаблонизатора`),new Swiper(".news-swiper-container",{slidesPerView:1,spaceBetween:30,loop:t.length>1,speed:1100,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".news-swiper-pagination",clickable:!0},navigation:{nextEl:".news-swiper-button-next",prevEl:".news-swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:30}},on:{init:function(){console.log("Swiper новостей инициализирован")}}})}}function Et(){return new Promise((n,t)=>{try{Sn("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css",e=>{if(e){console.error("Не удалось загрузить стили Swiper:",e),t(e);return}Mn("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",i=>{if(i){console.error("Не удалось загрузить библиотеку Swiper:",i),t(i);return}console.log("Swiper успешно загружен"),typeof Swiper<"u"?(console.log("Инициализация Swiper..."),setTimeout(()=>{Dt(),n()},100)):t(new Error("Swiper не определен после загрузки"))})})}catch(e){console.error("Ошибка при загрузке Swiper:",e),t(e)}})}function Mt(){const n=document.getElementById("burger-menu-btn"),t=document.getElementById("mobile-close-btn"),e=document.getElementById("mobile-menu"),i=document.querySelectorAll(".burger-line");if(!e)return;const a=()=>{e.classList.remove("translate-x-full"),e.classList.add("translate-x-0"),i[0].classList.add("rotate-45","translate-y-2"),i[1].classList.add("opacity-0"),i[2].classList.add("-rotate-45","-translate-y-2"),document.body.classList.add("overflow-hidden")},o=()=>{e.classList.remove("translate-x-0"),e.classList.add("translate-x-full"),i[0].classList.remove("rotate-45","translate-y-2"),i[1].classList.remove("opacity-0"),i[2].classList.remove("-rotate-45","-translate-y-2"),document.body.classList.remove("overflow-hidden")};n&&n.addEventListener("click",a),t&&t.addEventListener("click",o)}function St(){const n=document.querySelectorAll(".animated-title"),t=document.querySelectorAll(".animated-subtitle");n.length===0&&t.length===0||setTimeout(()=>{n.forEach(e=>{e.classList.add("show")}),setTimeout(()=>{t.forEach(e=>{e.classList.add("show")})},300)},200)}function It(){const n=document.querySelectorAll(".faq-toggle");n.length>0&&n.forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement.querySelector(".faq-content"),i=this.querySelector("svg");e.classList.contains("hidden")?(e.classList.remove("hidden"),i.classList.add("rotate-180")):(e.classList.add("hidden"),i.classList.remove("rotate-180"))})})}function xt(){const n=document.querySelector("form");n&&n.addEventListener("submit",t=>{t.preventDefault(),alert("Форма отправлена!")})}function kt(){console.log("Инициализация табов на странице платежей...");const n=document.querySelectorAll(".payment-tab"),t=document.querySelectorAll(".payment-tab-content");n.length>0&&n.forEach(a=>{a.addEventListener("click",function(){const c=`tab-${this.getAttribute("data-tab")}`;n.forEach(d=>{d.classList.remove("bg-white"),d.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),t.forEach(d=>{d.classList.add("hidden")}),document.getElementById(c).classList.remove("hidden")})});const e=document.querySelectorAll(".delivery-tab"),i=document.querySelectorAll(".delivery-tab-content");e.length>0&&e.forEach(a=>{a.addEventListener("click",function(){const c=`tab-${this.getAttribute("data-tab")}`;e.forEach(d=>{d.classList.remove("bg-white"),d.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),i.forEach(d=>{d.classList.add("hidden")}),document.getElementById(c).classList.remove("hidden")})})}function Nn(){document.querySelectorAll(".mobile-menu-toggle").forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement.querySelector(".mobile-menu-submenu"),i=this.querySelector("svg");e&&(e.classList.contains("hidden")?(e.classList.remove("hidden"),e.style.maxHeight=e.scrollHeight+"px",i.classList.add("rotate-180")):(e.classList.add("hidden"),e.style.maxHeight=null,i.classList.remove("rotate-180")))})})}function _n(){document.querySelectorAll('input[type="tel"]').forEach(n=>{new In(n)})}ht(()=>{_n()});function We(n,t,e,i,a={}){console.log(`Создание поля автокомплита ${e} с плейсхолдером "${i}"`);const o=n.querySelector("img");let c="";o&&(c=`<img src="${o.src}" alt="" class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none z-10">`);const d=`
    <div class="relative w-full">
      <input 
        id="${e}-input" 
        type="text" 
        class="appearance-none bg-white border border-gray-200 rounded-lg px-4 py-2 w-full focus:outline-none text-body-secondary !pr-8 text-sm"
        placeholder="${i}" 
        autocomplete="off"
        required
      >
      <button type="button" class="absolute right-0 top-0 h-full w-12 text-gray-400 focus:outline-none z-10"></button>
      ${c}
      <ul 
        id="${e}-suggestions" 
        class="absolute w-full bg-white border border-gray-200 rounded-md shadow-md mt-1 max-h-60 overflow-y-auto hidden z-20"
        style=""
      ></ul>
    </div>
  `;n.innerHTML=d,console.log(`Вставлена HTML-разметка для поля ${e}`);const u=document.getElementById(`${e}-input`),m=document.getElementById(`${e}-suggestions`),h=n.querySelector("button");if(!u||!m||!h){console.error(`Не удалось создать элементы автокомплита для ${e}`,{input:!!u,list:!!m,toggleButton:!!h});return}console.log(`Созданы элементы автокомплита для ${e}`);let g=-1;function l(v){return a.onlyCities?v.city:`${v.city}, ${v.address}${v.phone?", "+v.phone:""}`}function y(v){return a.onlyCities?`
        <div style="line-height:1.3; padding:2px 0;">
          <div style="font-weight:bold;">${v.city}</div>
        </div>
      `:`
      <div style="line-height:1.3; padding:2px 0;">
        <div style="font-weight:bold;">${v.city}</div>
        <div>${v.address}</div>
        <div style="color:#888; font-size:0.95em;">${v.type||""}</div>
        <div style="color:#008DD2; font-size:0.98em;">${v.phone||""}</div>
      </div>
    `}function C(v){const b=v.toLowerCase().trim();if(a.onlyCities){const P=new Map,F=new Map,_=new Map;return t.forEach(U=>{if(U.city){const ke=U.city.trim().toLowerCase();_.has(ke)||_.set(ke,U)}}),_.forEach((U,V)=>{V.startsWith(b)?P.set(V,U):V.includes(b)&&F.set(V,U)}),[...P.values(),...F.values()]}const E=[],x=[],A=[];return t.forEach(P=>{P.city&&P.city.toLowerCase().startsWith(b)?E.push(P):P.city&&P.city.toLowerCase().includes(b)?x.push(P):(P.address&&P.address.toLowerCase().includes(b)||P.type&&P.type.toLowerCase().includes(b)||P.phone&&P.phone.toLowerCase().includes(b))&&A.push(P)}),[...E,...x,...A]}function w(v){m.innerHTML="",g=-1,v.forEach((b,E)=>{const x=document.createElement("li");x.innerHTML=y(b),x.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",x.addEventListener("click",()=>{u.value=l(b),m.classList.add("hidden"),a.onlyCities&&Promise.resolve().then(()=>{const A=new CustomEvent("citySelected",{detail:{city:b.city}});u.dispatchEvent(A)})}),m.appendChild(x)}),m.classList.remove("hidden")}function S(){if(m.innerHTML="",g=-1,a.onlyCities){const v=new Map;t.forEach(b=>{if(b.city){const x=b.city.trim().toLowerCase();v.has(x)||v.set(x,b)}}),v.forEach((b,E)=>{const x=document.createElement("li");x.innerHTML=y(b),x.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",x.addEventListener("click",()=>{u.value=l(b),m.classList.add("hidden"),a.onlyCities&&Promise.resolve().then(()=>{const A=new CustomEvent("citySelected",{detail:{city:b.city}});u.dispatchEvent(A)})}),m.appendChild(x)})}else t.forEach((v,b)=>{const E=document.createElement("li");E.innerHTML=y(v),E.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",E.addEventListener("click",()=>{u.value=l(v),m.classList.add("hidden"),a.onlyCities&&Promise.resolve().then(()=>{const x=new CustomEvent("citySelected",{detail:{city:v.city}});u.dispatchEvent(x)})}),m.appendChild(E)});m.classList.remove("hidden")}h.addEventListener("click",v=>{v.preventDefault(),v.stopPropagation(),m.classList.contains("hidden")?S():m.classList.add("hidden")}),u.addEventListener("input",()=>{const v=u.value.trim();if(!v){m.classList.add("hidden");return}const b=C(v);if(b.length===0){m.classList.add("hidden");return}w(b)}),u.addEventListener("keydown",v=>{const b=m.querySelectorAll("li");if(m.classList.contains("hidden")||b.length===0){if(v.key==="ArrowDown"&&u.value.trim()===""){v.preventDefault(),S();return}return}if(v.key==="ArrowDown")v.preventDefault(),g=(g+1)%b.length,Pt(b);else if(v.key==="ArrowUp")v.preventDefault(),g=(g-1+b.length)%b.length,Pt(b);else if(v.key==="Enter"){if(v.preventDefault(),g>=0&&g<b.length){const E=C(u.value.trim())[g]||t[g];E&&(u.value=l(E)),m.classList.add("hidden")}}else v.key==="Escape"&&(v.preventDefault(),m.classList.add("hidden"))}),document.addEventListener("click",v=>{!m.contains(v.target)&&v.target!==u&&v.target!==h&&m.classList.add("hidden")}),u.addEventListener("focus",()=>{const v=u.value.trim();if(!v)return;const b=C(v);b.length>0&&w(b)}),m.style.maxHeight="200px",m.style.overflowY="auto",m.style.overscrollBehavior="contain"}function Pt(n){if(n.forEach((t,e)=>{t.classList.toggle("bg-blue-100",e===currentIndex)}),currentIndex>=0){const t=n[currentIndex],e=list.getBoundingClientRect(),i=t.getBoundingClientRect();i.bottom>e.bottom?t.scrollIntoView(!1):i.top<e.top&&t.scrollIntoView(!0)}}function Lt(){console.log("Инициализация главной страницы начата"),document.querySelector(".swiper-container")||document.querySelector(".news-swiper-container")?(console.log("Обнаружен контейнер Swiper, начинаю загрузку..."),Et().catch(g=>{console.error("Не удалось загрузить Swiper:",g)})):console.log("Контейнеры Swiper не обнаружены на странице"),console.log("Используем новости, уже загруженные через шаблонизатор");const n=document.querySelector(".news-carousel"),t=document.querySelector(".news-carousel button.absolute.left-0"),e=document.querySelector(".news-carousel button.absolute.right-0");if(n&&t&&e){const g=n.querySelectorAll(".bg-brand-light");let l=0;const y=C=>{g.forEach(w=>{w.style.display="none"}),g[C].style.display="block"};t.addEventListener("click",()=>{l=(l-1+g.length)%g.length,y(l)}),e.addEventListener("click",()=>{l=(l+1)%g.length,y(l)}),y(l)}const i=document.querySelectorAll(".carousel-slide"),a=document.querySelector(".carousel-container .absolute.left-4"),o=document.querySelector(".carousel-container .absolute.right-4");if(i.length>0&&a&&o){let g=0;const l=y=>{i.forEach(C=>{C.classList.remove("active"),C.style.display="none"}),i[y].classList.add("active"),i[y].style.display="block"};a.addEventListener("click",()=>{g=(g-1+i.length)%i.length,l(g)}),o.addEventListener("click",()=>{g=(g+1)%i.length,l(g)}),l(g),setInterval(()=>{g=(g+1)%i.length,l(g)},5e3)}const c=document.querySelector(".track-form");if(c)c.addEventListener("submit",function(g){g.preventDefault();const l=this.querySelector('input[type="text"]').value;l.trim()!==""?(console.log("Отслеживание заказа:",l),alert(`Отслеживание заказа: ${l}`)):(console.warn("Пустой ввод в форме отслеживания заказа"),alert("Пожалуйста, введите номер заказа"))});else{const g=document.querySelector(".tracking-form-container, .p-4.rounded-lg.w-full.md\\:w-2\\/5");if(g){console.log("Найден контейнер формы отслеживания");const l=g.querySelectorAll("button");console.log(`В контейнере формы отслеживания найдено ${l.length} кнопок:`),l.forEach((C,w)=>{console.log(`Кнопка #${w+1}:`,{classes:C.className,text:C.textContent.trim()})});let y=g.querySelector("button.bg-brand-gray");y||(console.log('Не найдена кнопка по классу, ищем по тексту "Поиск"'),y=Array.from(g.querySelectorAll("button")).find(w=>w.textContent.trim().toLowerCase().includes("поиск"))),y?(console.log('Найдена кнопка "Поиск" для отслеживания:',{text:y.textContent.trim(),classes:y.className}),y.addEventListener("click",function(C){C.preventDefault(),console.log('Клик по кнопке "Поиск" для отслеживания');const w=g.querySelector('input[type="text"]');if(!w){console.error("Не найдено поле ввода для формы отслеживания");return}w.hasAttribute("required")||w.setAttribute("required",""),w.validity.valid?(console.log("Отслеживание номера:",w.value),alert(`Отслеживание номера: ${w.value}`)):w.reportValidity()})):console.warn('Не найдена кнопка "Поиск" в контейнере формы отслеживания')}else console.warn("Не найден контейнер формы отслеживания")}Hn();const d=document.querySelector(".price-form");let u=!1;if(d&&(u=!0,d.addEventListener("submit",function(g){if(g.preventDefault(),this.checkValidity()){const l=document.querySelector("#from-city-input"),y=document.querySelector("#to-city-input");console.log("Расчет стоимости доставки:",{from:l.value,to:y.value}),alert(`Расчет стоимости доставки: ${l.value} -> ${y.value}`)}else this.reportValidity()})),!u){const g=document.querySelector(".bg-brand-light.p-4.rounded-lg.w-full.md\\:w-3\\/5");if(g){console.log("Найден контейнер формы расчета, будем использовать клик по кнопке");const l=g.querySelectorAll("button");console.log(`В контейнере формы расчета найдено ${l.length} кнопок:`),l.forEach((C,w)=>{console.log(`Кнопка #${w+1}:`,{classes:C.className,text:C.textContent.trim()})});let y=g.querySelector("button.bg-brand-gray");y||(console.log('Не найдена кнопка по классу, ищем по тексту "Рассчитать"'),y=Array.from(g.querySelectorAll("button")).find(w=>w.textContent.trim().toLowerCase().includes("рассчитать"))),y?(console.log('Найдена кнопка "Рассчитать" для расчета стоимости:',{text:y.textContent.trim(),classes:y.className}),y.addEventListener("click",function(C){C.preventDefault(),console.log('Клик по кнопке "Рассчитать"');const w=document.querySelector("#from-city-input"),S=document.querySelector("#to-city-input");if(!w||!S){console.error("Не найдены поля ввода для формы расчета");return}w.validity.valid&&S.validity.valid?(console.log("Расчет стоимости доставки:",{from:w.value,to:S.value}),alert(`Расчет стоимости доставки: ${w.value} -> ${S.value}`)):w.validity.valid?S.validity.valid||S.reportValidity():w.reportValidity()})):console.warn('Не найдена кнопка "Рассчитать" в контейнере формы расчета')}}const m=document.getElementById("become-client-btn");m&&m.addEventListener("click",function(){$.open("become-client-modal",{onOpen:g=>{const l=g.querySelector("#become-client-form");l&&l.addEventListener("submit",function(y){if(y.preventDefault(),this.checkValidity()){const C={name:document.getElementById("client-name").value,phone:document.getElementById("client-phone").value,email:document.getElementById("client-email").value,type:document.getElementById("client-type").value,comment:document.getElementById("client-comment").value};console.log("Заявка на становление клиентом:",C),alert(`Спасибо за заявку, ${C.name}! Мы свяжемся с вами в ближайшее время.`),$.close(g),this.reset()}else this.reportValidity()})}})});const h=document.querySelector("form.space-y-4");h&&(h.querySelectorAll('input[type="text"], input[type="tel"], input[type="checkbox"]').forEach(l=>{l.hasAttribute("required")||l.setAttribute("required","")}),h.addEventListener("submit",function(l){if(l.preventDefault(),this.checkValidity()){const y=this.querySelector('input[type="text"]').value,C=this.querySelector('input[type="tel"]').value;alert(`Спасибо за заявку, ${y}! Мы свяжемся с вами по номеру ${C}`),this.reset()}else this.reportValidity()})),console.log("Инициализация главной страницы завершена")}function Hn(){console.log("Инициализация автокомплита для полей выбора объектов");let n=[];if(window.officesData&&window.officesData.length>0)n=window.officesData,console.log("Используем офисы из window.officesData:",n.length);else{const t=document.querySelectorAll("#offices-data .office-data");n=Array.from(t).map(e=>({city:e.dataset.city,address:e.dataset.address,type:e.dataset.type,phone:e.dataset.phone,email:e.dataset.email,coordinates:e.dataset.coordinates})),console.log("Офисы из DOM:",n.length)}$n(n),Rn()}function $n(n){console.log("Настройка полей ввода с автокомплитом для офисов");const t=document.querySelector("select.from").closest(".relative.w-full"),e=document.querySelector("select.to").closest(".relative.w-full");if(!t||!e){console.error("Не найдены контейнеры для полей выбора объектов");return}We(t,n,"from-city","Откуда"),We(e,n,"to-city","Куда")}function Rn(n){document.querySelectorAll(".flex.md\\:flex-row.flex-col .flex.flex-row.flex-wrap.gap-2").forEach((e,i)=>{const a=document.getElementById(i===0?"from-city-input":"to-city-input");a&&e.querySelectorAll("span").forEach(o=>{o.addEventListener("click",()=>{const c=o.textContent.trim();a.value=c,a.focus(),setTimeout(()=>{a.dispatchEvent(new Event("focus",{bubbles:!0})),a.dispatchEvent(new Event("input",{bubbles:!0}))},50)})})})}class Se{constructor(t){console.log("Pagination: Создание экземпляра пагинации"),this.containerSelector=t.containerSelector,this.itemSelector=t.itemSelector,this.paginationSelector=t.paginationSelector,this.itemsPerPage=t.itemsPerPage||9,this.onPageChange=t.onPageChange||null,this.afterPageRender=t.afterPageRender||null,this.beforePageChange=t.beforePageChange||null,this.filterSelector=t.filterSelector||null,this.filterAttribute=t.filterAttribute||"data-filter",this.useDisplayNone=t.useDisplayNone||!1,this.container=document.querySelector(this.containerSelector),this.paginationContainer=document.querySelector(this.paginationSelector),console.log("Pagination: Найден контейнер:",this.container!==null),console.log("Pagination: Найден контейнер пагинации:",this.paginationContainer!==null),this.currentPage=1,this.allItems=[],this.filteredItems=[],this.totalPages=0,this.container&&this.paginationContainer?this.init():(console.error("Pagination: Не удалось найти контейнер или контейнер пагинации"),console.error(`Pagination: Контейнер "${this.containerSelector}" найден: ${this.container!==null}`),console.error(`Pagination: Контейнер пагинации "${this.paginationSelector}" найден: ${this.paginationContainer!==null}`))}init(){try{console.log("Pagination: Начало инициализации"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),console.log("Pagination: Найдено элементов:",this.allItems.length),this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),console.log("Pagination: Общее количество страниц:",this.totalPages),this.createPaginationElements(),this.showPage(1),this.filterSelector&&this.initFilter(),console.log("Pagination: Инициализация завершена успешно")}catch(t){console.error("Pagination: Ошибка при инициализации:",t)}}createPaginationElements(){try{if(console.log("Pagination: Создание элементов пагинации"),this.paginationContainer.innerHTML="",this.totalPages<=1){console.log("Pagination: Всего одна страница, пагинация не требуется");return}const t=document.createElement("nav");t.className="inline-flex items-center justify-center space-x-2",t.setAttribute("aria-label","Pagination");const e=document.createElement("button");e.className="pagination-prev pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",e.innerHTML="&lt;",e.disabled=!0,e.setAttribute("aria-label","Предыдущая страница"),e.addEventListener("click",()=>{this.currentPage>1&&this.showPage(this.currentPage-1)}),t.appendChild(e),this.updatePaginationButtons(1,this.totalPages,t,e);const i=document.createElement("button");i.className="pagination-next pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",i.innerHTML="&gt;",i.setAttribute("aria-label","Следующая страница"),this.totalPages<=1&&(i.disabled=!0),i.addEventListener("click",()=>{this.currentPage<this.totalPages&&this.showPage(this.currentPage+1)}),t.appendChild(i);const a=document.createElement("div");a.className="flex justify-center items-center w-full",a.appendChild(t),this.paginationContainer.appendChild(a),console.log("Pagination: Элементы пагинации созданы успешно")}catch(t){console.error("Pagination: Ошибка при создании элементов пагинации:",t)}}updatePaginationButtons(t,e,i,a){try{i.querySelectorAll(".pagination-number, .pagination-ellipsis").forEach(d=>d.remove());const c=i.querySelector(".pagination-next");if(e<=7)for(let d=1;d<=e;d++)this.addPageButton(d,t,i,c);else{this.addPageButton(1,t,i,c);let d,u;if(t<=4){d=2,u=5;for(let m=d;m<=u;m++)this.addPageButton(m,t,i,c);this.addEllipsis(i,c),this.addPageButton(e,t,i,c)}else if(t>=e-3){d=e-4,u=e-1,this.addEllipsis(i,c);for(let m=d;m<=u;m++)this.addPageButton(m,t,i,c);this.addPageButton(e,t,i,c)}else{this.addEllipsis(i,c);for(let m=t-1;m<=t+1;m++)this.addPageButton(m,t,i,c);this.addEllipsis(i,c),this.addPageButton(e,t,i,c)}}a&&(t===1?(a.setAttribute("disabled","disabled"),a.classList.add("opacity-50","cursor-not-allowed")):(a.removeAttribute("disabled"),a.classList.remove("opacity-50","cursor-not-allowed"))),c&&(t===e||e===0?(c.setAttribute("disabled","disabled"),c.classList.add("opacity-50","cursor-not-allowed")):(c.removeAttribute("disabled"),c.classList.remove("opacity-50","cursor-not-allowed")))}catch(o){console.error("Pagination: Ошибка при обновлении кнопок пагинации:",o)}}addPageButton(t,e,i,a){const o=document.createElement("button");t===e?o.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-blue text-white font-bold w-8 h-8":o.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white transition-colors w-8 h-8",o.textContent=t,o.addEventListener("click",()=>{const c=parseInt(o.textContent);this.showPage(c)}),i.insertBefore(o,a)}addEllipsis(t,e){const i=document.createElement("span");i.className="pagination-ellipsis flex items-center justify-center w-8 h-8 text-brand-gray",i.textContent="...",t.insertBefore(i,e)}showPage(t){try{console.log("Pagination: Показ страницы",t),this.beforePageChange&&this.beforePageChange(t),this.allItems.forEach(o=>{this.useDisplayNone?o.style.display="none":o.classList.add("hidden")});const e=(t-1)*this.itemsPerPage,i=e+this.itemsPerPage;this.filteredItems.slice(e,i).forEach(o=>{this.useDisplayNone?o.style.display="":o.classList.remove("hidden")});const a=this.paginationContainer.querySelector("nav");if(a){const o=a.querySelector(".pagination-prev");this.updatePaginationButtons(t,this.totalPages,a,o)}this.currentPage=t,this.onPageChange&&this.onPageChange(t),this.afterPageRender&&this.afterPageRender(t),console.log("Pagination: Страница",t,"показана успешно")}catch(e){console.error("Pagination: Ошибка при показе страницы:",e)}}initFilter(){try{console.log("Pagination: Инициализация фильтра");const t=document.querySelector(this.filterSelector);t?(console.log("Pagination: Фильтр найден:",this.filterSelector),t.addEventListener("change",()=>{const e=t.value;console.log("Pagination: Выбрано значение фильтра:",e),e==="all"?this.filteredItems=[...this.allItems]:this.filteredItems=this.allItems.filter(i=>{const a=i.getAttribute(this.filterAttribute);return a===e||(a==null?void 0:a.includes(e))}),console.log("Pagination: Отфильтровано элементов:",this.filteredItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)})):console.warn("Pagination: Фильтр не найден:",this.filterSelector)}catch(t){console.error("Pagination: Ошибка при инициализации фильтра:",t)}}updateItems(){try{console.log("Pagination: Обновление элементов"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),this.filteredItems=[...this.allItems],console.log("Pagination: Обновлено элементов:",this.allItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)}catch(t){console.error("Pagination: Ошибка при обновлении элементов:",t)}}updateVisibleItems(){try{console.log("Pagination: Обновление видимых элементов"),this.filteredItems=this.allItems.filter(t=>this.useDisplayNone?t.style.display!=="none":!t.classList.contains("hidden")),console.log("Pagination: Видимых элементов:",this.filteredItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)}catch(t){console.error("Pagination: Ошибка при обновлении видимых элементов:",t)}}applyFilter(t){try{console.log("Pagination: Программное применение фильтра:",t);const e=document.querySelector(this.filterSelector);if(e){e.value=t;const i=new Event("change");e.dispatchEvent(i)}else console.warn("Pagination: Не удалось применить фильтр - элемент не найден:",this.filterSelector)}catch(e){console.error("Pagination: Ошибка при программном применении фильтра:",e)}}resetFilter(){try{console.log("Pagination: Сброс фильтра"),document.querySelector(this.filterSelector)?(this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1),console.log("Pagination: Фильтр сброшен успешно")):console.warn("Pagination: Не удалось сбросить фильтр - элемент не найден:",this.filterSelector)}catch(t){console.error("Pagination: Ошибка при сбросе фильтра:",t)}}}let ae=null;function At(){const n=document.querySelectorAll(".office-card"),t=document.querySelector(".selected-office-card"),e=document.getElementById("close-selected-office");if(Y(null),e&&t&&e.addEventListener("click",function(){t.style.display="none",Y(null)}),Yn(),n.length>0){n.forEach((a,o)=>{a.addEventListener("mouseenter",function(){this.classList.add("shadow-md"),this.style.transform="translateY(-2px)",this.style.transition="transform 0.2s ease, box-shadow 0.2s ease"}),a.addEventListener("mouseleave",function(){this.classList.remove("shadow-md"),this.style.transform="translateY(0)"}),a.addEventListener("click",function(c){var m,h,g,l,y,C,w,S,v,b;if(c.target.tagName==="A"&&c.target.getAttribute("href")==="#map"){console.log('Клик по ссылке "Посмотреть на карте", индекс:',o);const E={city:a.dataset.city||((m=a.querySelector("h3"))==null?void 0:m.textContent.trim()),address:(h=a.querySelector(".text-brand-gray"))==null?void 0:h.textContent.trim(),type:(g=a.querySelectorAll(".text-brand-gray")[1])==null?void 0:g.textContent.trim(),phone:(l=a.querySelectorAll(".text-brand-gray")[2])==null?void 0:l.textContent.trim(),email:(y=a.querySelectorAll(".text-brand-gray")[3])==null?void 0:y.textContent.trim()},x=a.dataset.coordinates?a.dataset.coordinates.split(",").map(A=>parseFloat(A.trim())):null;x&&x.length===2&&(typeof ymaps<"u"?ymaps.ready(()=>{var P;let A=(P=document.querySelector("#map"))==null?void 0:P.__yamap;if(!A&&window.mapInstance&&(A=window.mapInstance),!A&&window.currentMap&&(A=window.currentMap),A&&window.officeMarkers&&window.officeMarkers[o]){Me(a,E,window.officeMarkers[o],A,x);const F=window.officeMarkers[o];F&&F.events&&typeof window.setActiveMarker=="function"&&window.setActiveMarker(F)}else if(window.officeMarkers&&window.officeMarkers[o]){const F=window.officeMarkers[o];F&&F.events&&F.events.fire("click"),Y(a,E)}else Y(a,E)}):Y(a,E));return}c.preventDefault(),console.log("Клик по карточке офиса, индекс:",o);const d={city:a.dataset.city||((C=a.querySelector("h3"))==null?void 0:C.textContent.trim()),address:(w=a.querySelector(".text-brand-gray"))==null?void 0:w.textContent.trim(),type:(S=a.querySelectorAll(".text-brand-gray")[1])==null?void 0:S.textContent.trim(),phone:(v=a.querySelectorAll(".text-brand-gray")[2])==null?void 0:v.textContent.trim(),email:(b=a.querySelectorAll(".text-brand-gray")[3])==null?void 0:b.textContent.trim()};console.log("Данные офиса:",d);const u=a.dataset.coordinates?a.dataset.coordinates.split(",").map(E=>parseFloat(E.trim())):null;console.log("Координаты:",u),console.log("Доступны ли Яндекс.Карты:",typeof ymaps<"u"),console.log("Доступны ли маркеры:",!!window.officeMarkers),u&&u.length===2?typeof ymaps<"u"?ymaps.ready(()=>{var x,A;let E=(x=document.querySelector("#map"))==null?void 0:x.__yamap;if(!E&&window.mapInstance&&(E=window.mapInstance),!E&&window.currentMap&&(E=window.currentMap),console.log("Экземпляр карты:",!!E),console.log("Маркер для индекса",o,":",!!((A=window.officeMarkers)!=null&&A[o])),E&&window.officeMarkers&&window.officeMarkers[o]){console.log("Вызываем selectOfficeCard с приближением"),Me(a,d,window.officeMarkers[o],E,u);const P=window.officeMarkers[o];P&&P.events&&(console.log("Устанавливаем маркер как активный"),typeof window.setActiveMarker=="function"&&window.setActiveMarker(P))}else if(window.officeMarkers&&window.officeMarkers[o]){console.log("Карта не найдена, но маркер есть - пробуем прямой вызов функции маркера");const P=window.officeMarkers[o];P&&P.events&&P.events.fire("click"),Y(a,d)}else console.log("Карта не готова, используем selectOfficeCardNoFocus"),Y(a,d)}):(console.log("Яндекс.Карты не загружены"),Y(a,d)):console.log("Некорректные координаты")})});const i=document.querySelector(".map-info-panel");i&&i.classList.add("hidden"),setTimeout(()=>{var o;const a=(o=window.initialData)==null?void 0:o.defaultOffice;a&&(console.log("Показываем офис по умолчанию"),Y(null,a))},1e3)}zn()}function Yn(){var o;const n=document.querySelector(".form .relative.w-full");if(!n)return;const t=((o=window.initialData)==null?void 0:o.offices)||[];Array.from(new Set(t.map(c=>c.city&&c.city.trim()))).filter(Boolean),We(n,t,"city-filter","Все города",{onlyCities:!0});const e=document.getElementById("city-filter-input");if(!e)return;const i=document.getElementById("city-filter-reset");i&&i.addEventListener("click",()=>{var d;e.value="",ae?ae.resetFilter():document.querySelectorAll(".office-card").forEach(u=>{u.classList.remove("hidden")}),Tt("Все города");const c=(d=window.initialData)==null?void 0:d.defaultOffice;c&&Y(null,c)});function a(c){var u;console.log("Фильтрация по городу:",c),c==="Все города"?ae?ae.resetFilter():document.querySelectorAll(".office-card").forEach(m=>{m.classList.remove("hidden")}):ae?ae.applyFilter(c):document.querySelectorAll(".office-card").forEach(m=>{(m.dataset.city?m.dataset.city.trim():"")===c.trim()?m.classList.remove("hidden"):m.classList.add("hidden")}),Tt(c);const d=(u=window.initialData)==null?void 0:u.defaultOffice;d&&Y(null,d)}e.addEventListener("citySelected",function(c){a(c.detail.city)})}function Tt(n){typeof ymaps>"u"||ymaps.ready(function(){var e;if((e=document.querySelector("#map"))!=null&&e.__yamap)if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),n==="Все города"){const i=[];document.querySelectorAll(".office-card").forEach(a=>{if(a.dataset.coordinates){const o=a.dataset.coordinates.split(",").map(c=>parseFloat(c.trim()));o.length===2&&i.push(o)}}),typeof window.showAllOfficesOnMap=="function"&&i.length>0&&window.showAllOfficesOnMap(i)}else{const i=[];document.querySelectorAll(".office-card").forEach(a=>{if(a.dataset.city===n&&a.dataset.coordinates){const c=a.dataset.coordinates.split(",").map(d=>parseFloat(d.trim()));c.length===2&&i.push(c)}}),typeof window.showAllOfficesOnMap=="function"&&i.length>0&&window.showAllOfficesOnMap(i)}})}function zn(){document.querySelector(".pagination-container")&&(ae=new Se({containerSelector:".offices-grid",itemSelector:".office-card",paginationSelector:".pagination-container",itemsPerPage:9,filterSelector:"#city-filter-input",filterAttribute:"data-city",beforePageChange:t=>{Y(null)},afterPageRender:t=>{setTimeout(()=>{var i;const e=(i=window.initialData)==null?void 0:i.defaultOffice;e&&Y(null,e)},100)}}))}function Ot(){console.log("VacanciesPage: Начало инициализации");const n=document.querySelectorAll(".vacancy-toggle");console.log("VacanciesPage: Найдено кнопок для вакансий:",n.length),n.length>0?(n.forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement.querySelector(".vacancy-content"),i=this.querySelector("svg");e.classList.contains("hidden")?(e.classList.remove("hidden"),i.classList.add("rotate-180")):(e.classList.add("hidden"),i.classList.remove("rotate-180"))})}),console.log("VacanciesPage: Инициализация пагинации с задержкой..."),setTimeout(()=>{jn()},100)):console.warn("VacanciesPage: Не найдены кнопки для вакансий"),console.log("VacanciesPage: Инициализация завершена")}function jn(){console.log("VacanciesPage: Проверка контейнеров для пагинации...");const n=document.querySelector(".vacancies-container"),t=document.querySelectorAll(".vacancy-item"),e=document.querySelector(".pagination-container");if(console.log("VacanciesPage: Найден контейнер для вакансий:",n!==null),console.log("VacanciesPage: Найдено элементов вакансий:",t.length),console.log("VacanciesPage: Найден контейнер для пагинации:",e!==null),n&&t.length>0&&e){if(t.length<=5){console.log("VacanciesPage: Пагинация не требуется, количество элементов не превышает лимит на странице");return}new Se({containerSelector:".vacancies-container",itemSelector:".vacancy-item",paginationSelector:".pagination-container",itemsPerPage:5,filterSelector:"#cityFilter",filterAttribute:"data-location",useDisplayNone:!0}),console.log("VacanciesPage: Пагинация успешно инициализирована")}else console.error("VacanciesPage: Невозможно инициализировать пагинацию - отсутствуют необходимые элементы")}function qt(){console.log("Инициализация страницы платежей..."),It(),kt();const n=document.getElementById("send-check-email"),t=document.getElementById("email-field"),e=document.getElementById("email-input");n&&t&&e&&(console.log("Инициализация функционала отображения поля email..."),n.checked&&(t.classList.remove("hidden"),e.setAttribute("required","")),n.addEventListener("change",function(){this.checked?(t.classList.remove("hidden"),e.setAttribute("required","")):(t.classList.add("hidden"),e.removeAttribute("required"))}));const i=document.getElementById("payment-form");i&&(console.log("Инициализация обработчика формы оплаты..."),i.addEventListener("submit",function(o){o.preventDefault();const c=document.getElementById("order-number").value,d=document.getElementById("send-check-email").checked;let u=null;if(!c){alert("Пожалуйста, введите номер заказа");return}if(d){if(u=document.getElementById("email-input").value,!u){alert("Пожалуйста, введите email для отправки чека");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)){alert("Пожалуйста, введите корректный email");return}}console.log("Отправка платежа:"),console.log("Номер заказа:",c),console.log("Отправить чек на email:",d),d&&console.log("Email для чека:",u),alert("Платеж отправлен! Проверьте консоль для деталей.")}));const a=document.getElementById("order-hint-trigger");if(a){let o=!1;a.addEventListener("click",function(c){c.stopPropagation(),o=!o,o?this.setAttribute("data-tip-show","true"):this.removeAttribute("data-tip-show")}),document.addEventListener("click",function(c){o&&!a.contains(c.target)&&(a.removeAttribute("data-tip-show"),o=!1)}),a.addEventListener("mouseleave",function(){this.removeAttribute("data-tip-show"),o=!1})}}console.log("NewsPage: Модуль загружается...");class Vn{constructor(){console.log("NewsPage: Инициализация класса"),this.modal=document.getElementById("news-modal"),this.pagination=null,this.dateFilterPicker=null,this.currentFilters={dateRange:null},this.init()}init(){console.log("NewsPage: Начало инициализации"),this.sortNewsByDate(),this.bindNewsDetailsButtons(),this.initDateFilter(),this.initClearFiltersButton(),console.log("NewsPage: Инициализация пагинации..."),this.initPagination(),console.log("NewsPage: Инициализация завершена")}initPagination(){const t=document.querySelector(".news-grid"),e=document.querySelectorAll(".news-card"),i=document.querySelector(".pagination-container");if(console.log("NewsPage: Контейнер для новостей найден:",!!t),console.log("NewsPage: Найдено новостей:",e.length),console.log("NewsPage: Контейнер для пагинации найден:",!!i),!t||e.length===0||!i){console.error("NewsPage: Не удалось найти необходимые элементы для пагинации");return}this.pagination=new Se({containerSelector:".news-grid",itemSelector:".news-card",paginationSelector:".pagination-container",itemsPerPage:5,useDisplayNone:!1}),console.log("NewsPage: Пагинация инициализирована")}initDateFilter(){console.log("NewsPage: Инициализация фильтра дат"),this.dateFilterPicker=new ze({containerId:"news-date-filter-container",inputId:"news-date-filter",placeholder:"Выберите период для фильтрации",autoApply:!1,defaultRange:!0,onRangeSelect:t=>{console.log("NewsPage: Получен диапазон дат:",t),this.currentFilters.dateRange=t,this.applyFilters()}})}initClearFiltersButton(){const t=document.getElementById("clear-filters-btn");t&&t.addEventListener("click",()=>{this.clearAllFilters()})}clearAllFilters(){this.dateFilterPicker&&this.dateFilterPicker.clearSelection(),this.currentFilters={dateRange:null},this.applyFilters()}applyFilters(){const t=document.querySelectorAll(".news-card");console.log("NewsPage: Применение фильтров:",this.currentFilters),console.log("NewsPage: Найдено карточек новостей:",t.length);let e=0;t.forEach((i,a)=>{let o=!0;if(this.currentFilters.dateRange&&!this.currentFilters.dateRange.isEmpty){const c=parseInt(i.dataset.timestamp);if(console.log(`NewsPage: Карточка ${a+1} - timestamp:`,c),c){const d=new Date(c*1e3),u=this.currentFilters.dateRange.startDate,m=this.currentFilters.dateRange.endDate||this.currentFilters.dateRange.startDate,h=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())),g=new Date(Date.UTC(u.getFullYear(),u.getMonth(),u.getDate())),l=new Date(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate()));console.log(`NewsPage: Карточка ${a+1} - сравнение дат:`,{cardDate:h.toISOString().split("T")[0],startDate:g.toISOString().split("T")[0],endDate:l.toISOString().split("T")[0],cardTime:h.getTime(),startTime:g.getTime(),endTime:l.getTime()});const y=h.getTime(),C=g.getTime(),w=l.getTime();y<C||y>w?(o=!1,console.log(`NewsPage: Карточка ${a+1} скрыта - не попадает в диапазон`)):console.log(`NewsPage: Карточка ${a+1} видима - попадает в диапазон`)}else console.log(`NewsPage: Карточка ${a+1} - нет timestamp, скрываем`),o=!1}else console.log(`NewsPage: Карточка ${a+1} - фильтр не активен, показываем`);o?(i.classList.remove("hidden"),e++):i.classList.add("hidden")}),console.log("NewsPage: Видимых карточек:",e),this.pagination&&this.pagination.updateVisibleItems()}bindNewsDetailsButtons(){const t=document.querySelectorAll(".news-details-btn");console.log("NewsPage: Найдено кнопок для новостей:",t.length),t.forEach(e=>{console.log("NewsPage: Добавление обработчика для кнопки"),e.addEventListener("click",i=>{var c,d,u,m,h;console.log('NewsPage: Клик по кнопке "Подробнее"'),i.preventDefault();const a=e.closest(".news-card");if(console.log("NewsPage: Найдена карточка новости:",a!==null),!a){console.error("NewsPage: Не удалось найти карточку новости");return}const o={title:(c=a.querySelector(".news-title"))==null?void 0:c.textContent,image:(d=a.querySelector("img"))==null?void 0:d.src,isPlaceholder:(u=a.querySelector("img"))==null?void 0:u.classList.contains("placeholder"),content:(m=a.querySelector(".news-content"))==null?void 0:m.textContent,date:(h=a.querySelector(".news-date"))==null?void 0:h.textContent};if(console.log("NewsPage: Собраны данные для модального окна:",o),!o.title||!o.content){console.error("NewsPage: Не удалось собрать все необходимые данные");return}this.openNewsModal(o)})})}openNewsModal(t){const e=this.modal,i=e.querySelector(".modal-content");i.querySelector("h2").textContent=t.title,i.querySelector(".news-text").textContent=t.content,i.querySelector(".text-caption-form").textContent=t.date;const a=i.querySelector(".news-image");t.image&&!t.isPlaceholder?a.innerHTML=`
        <div class="rounded-2xl overflow-hidden">
          <img src="${t.image}" 
               alt="${t.title}" 
               class="w-full object-cover aspect-[1.85/1]">
        </div>
      `:a.innerHTML="",$.open(e)}sortNewsByDate(){console.log("NewsPage: Сортировка новостей по дате...");const t=document.querySelector(".news-grid"),e=Array.from(document.querySelectorAll(".news-card"));if(!t||e.length===0){console.log("NewsPage: Нет новостей для сортировки");return}e.sort((i,a)=>{const o=parseInt(i.dataset.timestamp)||0;return(parseInt(a.dataset.timestamp)||0)-o}),e.forEach(i=>{t.appendChild(i)}),console.log("NewsPage: Новости отсортированы по дате (от новых к старым)")}}var pe,Q,Ie=0;function xe(n){return n>=48&&n<=57}function ve(n,t){for(var e=(n+="").length,i=(t+="").length,a=0,o=0;a<e&&o<i;){var c=n.charCodeAt(a),d=t.charCodeAt(o);if(xe(c)){if(!xe(d))return c-d;for(var u=a,m=o;c===48&&++u<e;)c=n.charCodeAt(u);for(;d===48&&++m<i;)d=t.charCodeAt(m);for(var h=u,g=m;h<e&&xe(n.charCodeAt(h));)++h;for(;g<i&&xe(t.charCodeAt(g));)++g;var l=h-u-g+m;if(l)return l;for(;u<h;)if(l=n.charCodeAt(u++)-t.charCodeAt(m++),l)return l;a=h,o=g;continue}if(c!==d)return c<Ie&&d<Ie&&Q[c]!==-1&&Q[d]!==-1?Q[c]-Q[d]:c-d;++a,++o}return a>=e&&o<i&&e>=i?-1:o>=i&&a<e&&i>=e?1:e-i}ve.caseInsensitive=ve.i=function(n,t){return ve((""+n).toLowerCase(),(""+t).toLowerCase())},Object.defineProperties(ve,{alphabet:{get:function(){return pe},set:function(n){pe=n,Q=[];var t=0;if(pe)for(;t<pe.length;t++)Q[pe.charCodeAt(t)]=t;for(Ie=Q.length,t=0;t<Ie;t++)Q[t]===void 0&&(Q[t]=-1)}}});var Wn=ve,Zn=function(n,t,e){return e?n.getElementsByClassName(t)[0]:n.getElementsByClassName(t)},Un=function(n,t,e){return t="."+t,e?n.querySelector(t):n.querySelectorAll(t)},Kn=function(n,t,e){for(var i=[],a="*",o=n.getElementsByTagName(a),c=o.length,d=new RegExp("(^|\\s)"+t+"(\\s|$)"),u=0,m=0;u<c;u++)if(d.test(o[u].className)){if(e)return o[u];i[m]=o[u],m++}return i},Ft=function(){return function(n,t,e,i){return i=i||{},i.test&&i.getElementsByClassName||!i.test&&document.getElementsByClassName?Zn(n,t,e):i.test&&i.querySelector||!i.test&&document.querySelector?Un(n,t,e):Kn(n,t,e)}}(),Bt=function(t){for(var e=Array.prototype.slice.call(arguments,1),i=0,a;a=e[i];i++)if(a)for(var o in a)t[o]=a[o];return t},Jn=[].indexOf,Nt=function(n,t){if(Jn)return n.indexOf(t);for(var e=0,i=n.length;e<i;++e)if(n[e]===t)return e;return-1},de={},_t=function(t){if(typeof t>"u")return[];if(t===null)return[null];if(t===window)return[window];if(typeof t=="string")return[t];if(Gn(t))return t;if(typeof t.length!="number")return[t];if(typeof t=="function"&&t instanceof Function)return[t];for(var e=[],i=0,a=t.length;i<a;i++)(Object.prototype.hasOwnProperty.call(t,i)||i in t)&&e.push(t[i]);return e.length?e:[]};function Gn(n){return Object.prototype.toString.call(n)==="[object Array]"}var Ht=window.addEventListener?"addEventListener":"attachEvent",Xn=window.removeEventListener?"removeEventListener":"detachEvent",$t=Ht!=="addEventListener"?"on":"",Rt=_t;de.bind=function(n,t,e,i){n=Rt(n);for(var a=0,o=n.length;a<o;a++)n[a][Ht]($t+t,e,i||!1)},de.unbind=function(n,t,e,i){n=Rt(n);for(var a=0,o=n.length;a<o;a++)n[a][Xn]($t+t,e,i||!1)},de.debounce=function(n,t,e){var i;return t?function(){var a=this,o=arguments,c=function(){i=null,e||n.apply(a,o)},d=e&&!i;clearTimeout(i),i=setTimeout(c,t),d&&n.apply(a,o)}:n};var Yt=function(n){return n=n===void 0?"":n,n=n===null?"":n,n=n.toString(),n},Ze=Nt,Qn=/\s+/,zt=function(n){return new re(n)};function re(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}re.prototype.add=function(n){if(this.list)return this.list.add(n),this;var t=this.array(),e=Ze(t,n);return~e||t.push(n),this.el.className=t.join(" "),this},re.prototype.remove=function(n){if(this.list)return this.list.remove(n),this;var t=this.array(),e=Ze(t,n);return~e&&t.splice(e,1),this.el.className=t.join(" "),this},re.prototype.toggle=function(n,t){return this.list?(typeof t<"u"?t!==this.list.toggle(n,t)&&this.list.toggle(n):this.list.toggle(n),this):(typeof t<"u"?t?this.add(n):this.remove(n):this.has(n)?this.remove(n):this.add(n),this)},re.prototype.array=function(){var n=this.el.getAttribute("class")||"",t=n.replace(/^\s+|\s+$/g,""),e=t.split(Qn);return e[0]===""&&e.shift(),e},re.prototype.has=re.prototype.contains=function(n){return this.list?this.list.contains(n):!!~Ze(this.array(),n)};var ei=function(n,t){var e=n.getAttribute&&n.getAttribute(t)||null;if(!e)for(var i=n.attributes,a=i.length,o=0;o<a;o++)i[o]!==void 0&&i[o].nodeName===t&&(e=i[o].nodeValue);return e},Ue,jt;function Vt(){return jt||(jt=1,Ue=function(n){return function(t,e,i){var a=this;this._values={},this.found=!1,this.filtered=!1;var o=function(c,d,u){if(d===void 0)u?a.values(c,u):a.values(c);else{a.elm=d;var m=n.templater.get(a,c);a.values(m)}};this.values=function(c,d){if(c!==void 0){for(var u in c)a._values[u]=c[u];d!==!0&&n.templater.set(a,a.values())}else return a._values},this.show=function(){n.templater.show(a)},this.hide=function(){n.templater.hide(a)},this.matching=function(){return n.filtered&&n.searched&&a.found&&a.filtered||n.filtered&&!n.searched&&a.filtered||!n.filtered&&n.searched&&a.found||!n.filtered&&!n.searched},this.visible=function(){return!!(a.elm&&a.elm.parentNode==n.list)},o(t,e,i)}}),Ue}var Ke,Wt;function ti(){return Wt||(Wt=1,Ke=function(n){var t=function(e,i,a){var o=e.splice(0,50);a=a||[],a=a.concat(n.add(o)),e.length>0?setTimeout(function(){t(e,i,a)},1):(n.update(),i(a))};return t}),Ke}var Je,Zt;function ni(){if(Zt)return Je;Zt=1;var n=zt,t=de,e=nn();return Je=function(i){var a=!1,o=function(d,u){if(i.page<1){i.listContainer.style.display="none",a=!0;return}else a&&(i.listContainer.style.display="block");var m,h=i.matchingItems.length,g=i.i,l=i.page,y=Math.ceil(h/l),C=Math.ceil(g/l),w=u.innerWindow||2,S=u.left||u.outerWindow||0,v=u.right||u.outerWindow||0;v=y-v,d.clear();for(var b=1;b<=y;b++){var E=C===b?"active":"";c.number(b,S,v,C,w)?(m=d.add({page:b,dotted:!1})[0],E&&n(m.elm).add(E),m.elm.firstChild.setAttribute("data-i",b),m.elm.firstChild.setAttribute("data-page",l)):c.dotted(d,b,S,v,C,w,d.size())&&(m=d.add({page:"...",dotted:!0})[0],n(m.elm).add("disabled"))}},c={number:function(d,u,m,h,g){return this.left(d,u)||this.right(d,m)||this.innerWindow(d,h,g)},left:function(d,u){return d<=u},right:function(d,u){return d>u},innerWindow:function(d,u,m){return d>=u-m&&d<=u+m},dotted:function(d,u,m,h,g,l,y){return this.dottedLeft(d,u,m,h,g,l)||this.dottedRight(d,u,m,h,g,l,y)},dottedLeft:function(d,u,m,h,g,l){return u==m+1&&!this.innerWindow(u,g,l)&&!this.right(u,h)},dottedRight:function(d,u,m,h,g,l,y){return d.items[y-1].values().dotted?!1:u==h&&!this.innerWindow(u,g,l)&&!this.right(u,h)}};return function(d){var u=new e(i.listContainer.id,{listClass:d.paginationClass||"pagination",item:d.item||"<li><a class='page' href='#'></a></li>",valueNames:["page","dotted"],searchClass:"pagination-search-that-is-not-supposed-to-exist",sortClass:"pagination-sort-that-is-not-supposed-to-exist"});t.bind(u.listContainer,"click",function(m){var h=m.target||m.srcElement,g=i.utils.getAttribute(h,"data-page"),l=i.utils.getAttribute(h,"data-i");l&&i.show((l-1)*g+1,g)}),i.on("updated",function(){o(u,d)}),o(u,d)}},Je}var Ge,Ut;function ii(){return Ut||(Ut=1,Ge=function(n){var t=Vt()(n),e=function(o){for(var c=o.childNodes,d=[],u=0,m=c.length;u<m;u++)c[u].data===void 0&&d.push(c[u]);return d},i=function(o,c){for(var d=0,u=o.length;d<u;d++)n.items.push(new t(c,o[d]))},a=function(o,c){var d=o.splice(0,50);i(d,c),o.length>0?setTimeout(function(){a(o,c)},1):(n.update(),n.trigger("parseComplete"))};return n.handlers.parseComplete=n.handlers.parseComplete||[],function(){var o=e(n.list),c=n.valueNames;n.indexAsync?a(o,c):i(o,c)}}),Ge}var Xe,Kt;function ai(){if(Kt)return Xe;Kt=1;var n=function(t){var e,i=this,a=function(){var h;if(typeof t.item=="function"){e=function(g){var l=t.item(g);return d(l)};return}if(typeof t.item=="string"?t.item.indexOf("<")===-1?h=document.getElementById(t.item):h=d(t.item):h=c(),!h)throw new Error("The list needs to have at least one item on init otherwise you'll have to add a template.");h=o(h,t.valueNames),e=function(){return h.cloneNode(!0)}},o=function(h,g){var l=h.cloneNode(!0);l.removeAttribute("id");for(var y=0,C=g.length;y<C;y++){var w=void 0,S=g[y];if(S.data)for(var v=0,b=S.data.length;v<b;v++)l.setAttribute("data-"+S.data[v],"");else S.attr&&S.name?(w=t.utils.getByClass(l,S.name,!0),w&&w.setAttribute(S.attr,"")):(w=t.utils.getByClass(l,S,!0),w&&(w.innerHTML=""))}return l},c=function(){for(var h=t.list.childNodes,g=0,l=h.length;g<l;g++)if(h[g].data===void 0)return h[g].cloneNode(!0)},d=function(h){if(typeof h=="string"){if(/<tr[\s>]/g.exec(h)){var g=document.createElement("tbody");return g.innerHTML=h,g.firstElementChild}else if(h.indexOf("<")!==-1){var l=document.createElement("div");return l.innerHTML=h,l.firstElementChild}}},u=function(h){for(var g=0,l=t.valueNames.length;g<l;g++){var y=t.valueNames[g];if(y.data){for(var C=y.data,w=0,S=C.length;w<S;w++)if(C[w]===h)return{data:h}}else{if(y.attr&&y.name&&y.name==h)return y;if(y===h)return h}}},m=function(h,g,l){var y=void 0,C=u(g);C&&(C.data?h.elm.setAttribute("data-"+C.data,l):C.attr&&C.name?(y=t.utils.getByClass(h.elm,C.name,!0),y&&y.setAttribute(C.attr,l)):(y=t.utils.getByClass(h.elm,C,!0),y&&(y.innerHTML=l)))};this.get=function(h,g){i.create(h);for(var l={},y=0,C=g.length;y<C;y++){var w=void 0,S=g[y];if(S.data)for(var v=0,b=S.data.length;v<b;v++)l[S.data[v]]=t.utils.getAttribute(h.elm,"data-"+S.data[v]);else S.attr&&S.name?(w=t.utils.getByClass(h.elm,S.name,!0),l[S.name]=w?t.utils.getAttribute(w,S.attr):""):(w=t.utils.getByClass(h.elm,S,!0),l[S]=w?w.innerHTML:"")}return l},this.set=function(h,g){if(!i.create(h))for(var l in g)g.hasOwnProperty(l)&&m(h,l,g[l])},this.create=function(h){return h.elm!==void 0?!1:(h.elm=e(h.values()),i.set(h,h.values()),!0)},this.remove=function(h){h.elm.parentNode===t.list&&t.list.removeChild(h.elm)},this.show=function(h){i.create(h),t.list.appendChild(h.elm)},this.hide=function(h){h.elm!==void 0&&h.elm.parentNode===t.list&&t.list.removeChild(h.elm)},this.clear=function(){if(t.list.hasChildNodes())for(;t.list.childNodes.length>=1;)t.list.removeChild(t.list.firstChild)},a()};return Xe=function(t){return new n(t)},Xe}var Qe,Jt;function ri(){return Jt||(Jt=1,Qe=function(n){var t,e,i,a={resetList:function(){n.i=1,n.templater.clear(),i=void 0},setOptions:function(d){d.length==2&&d[1]instanceof Array?t=d[1]:d.length==2&&typeof d[1]=="function"?(t=void 0,i=d[1]):d.length==3?(t=d[1],i=d[2]):t=void 0},setColumns:function(){n.items.length!==0&&t===void 0&&(t=n.searchColumns===void 0?a.toArray(n.items[0].values()):n.searchColumns)},setSearchString:function(d){d=n.utils.toString(d).toLowerCase(),d=d.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),e=d},toArray:function(d){var u=[];for(var m in d)u.push(m);return u}},o={list:function(){for(var d=[],u,m=e;(u=m.match(/"([^"]+)"/))!==null;)d.push(u[1]),m=m.substring(0,u.index)+m.substring(u.index+u[0].length);m=m.trim(),m.length&&(d=d.concat(m.split(/\s+/)));for(var h=0,g=n.items.length;h<g;h++){var l=n.items[h];if(l.found=!1,!!d.length){for(var y=0,C=d.length;y<C;y++){for(var w=!1,S=0,v=t.length;S<v;S++){var b=l.values(),E=t[S];if(b.hasOwnProperty(E)&&b[E]!==void 0&&b[E]!==null){var x=typeof b[E]!="string"?b[E].toString():b[E];if(x.toLowerCase().indexOf(d[y])!==-1){w=!0;break}}}if(!w)break}l.found=w}}},reset:function(){n.reset.search(),n.searched=!1}},c=function(d){return n.trigger("searchStart"),a.resetList(),a.setSearchString(d),a.setOptions(arguments),a.setColumns(),e===""?o.reset():(n.searched=!0,i?i(e,t):o.list()),n.update(),n.trigger("searchComplete"),n.visibleItems};return n.handlers.searchStart=n.handlers.searchStart||[],n.handlers.searchComplete=n.handlers.searchComplete||[],n.utils.events.bind(n.utils.getByClass(n.listContainer,n.searchClass),"keyup",n.utils.events.debounce(function(d){var u=d.target||d.srcElement,m=u.value===""&&!n.searched;m||c(u.value)},n.searchDelay)),n.utils.events.bind(n.utils.getByClass(n.listContainer,n.searchClass),"input",function(d){var u=d.target||d.srcElement;u.value===""&&c("")}),c}),Qe}var et,Gt;function oi(){return Gt||(Gt=1,et=function(n){return n.handlers.filterStart=n.handlers.filterStart||[],n.handlers.filterComplete=n.handlers.filterComplete||[],function(t){if(n.trigger("filterStart"),n.i=1,n.reset.filter(),t===void 0)n.filtered=!1;else{n.filtered=!0;for(var e=n.items,i=0,a=e.length;i<a;i++){var o=e[i];t(o)?o.filtered=!0:o.filtered=!1}}return n.update(),n.trigger("filterComplete"),n.visibleItems}}),et}var tt,Xt;function si(){return Xt||(Xt=1,tt=function(n){var t={els:void 0,clear:function(){for(var i=0,a=t.els.length;i<a;i++)n.utils.classes(t.els[i]).remove("asc"),n.utils.classes(t.els[i]).remove("desc")},getOrder:function(i){var a=n.utils.getAttribute(i,"data-order");return a=="asc"||a=="desc"?a:n.utils.classes(i).has("desc")?"asc":n.utils.classes(i).has("asc")?"desc":"asc"},getInSensitive:function(i,a){var o=n.utils.getAttribute(i,"data-insensitive");o==="false"?a.insensitive=!1:a.insensitive=!0},setOrder:function(i){for(var a=0,o=t.els.length;a<o;a++){var c=t.els[a];if(n.utils.getAttribute(c,"data-sort")===i.valueName){var d=n.utils.getAttribute(c,"data-order");d=="asc"||d=="desc"?d==i.order&&n.utils.classes(c).add(i.order):n.utils.classes(c).add(i.order)}}}},e=function(){n.trigger("sortStart");var i={},a=arguments[0].currentTarget||arguments[0].srcElement||void 0;a?(i.valueName=n.utils.getAttribute(a,"data-sort"),t.getInSensitive(a,i),i.order=t.getOrder(a)):(i=arguments[1]||i,i.valueName=arguments[0],i.order=i.order||"asc",i.insensitive=typeof i.insensitive>"u"?!0:i.insensitive),t.clear(),t.setOrder(i);var o=i.sortFunction||n.sortFunction||null,c=i.order==="desc"?-1:1,d;o?d=function(u,m){return o(u,m,i)*c}:d=function(u,m){var h=n.utils.naturalSort;return h.alphabet=n.alphabet||i.alphabet||void 0,!h.alphabet&&i.insensitive&&(h=n.utils.naturalSort.caseInsensitive),h(u.values()[i.valueName],m.values()[i.valueName])*c},n.items.sort(d),n.update(),n.trigger("sortComplete")};return n.handlers.sortStart=n.handlers.sortStart||[],n.handlers.sortComplete=n.handlers.sortComplete||[],t.els=n.utils.getByClass(n.listContainer,n.sortClass),n.utils.events.bind(t.els,"click",e),n.on("searchStart",t.clear),n.on("filterStart",t.clear),e}),tt}var nt,Qt;function li(){return Qt||(Qt=1,nt=function(n,t,e){var i=e.location||0,a=e.distance||100,o=e.threshold||.4;if(t===n)return!0;if(t.length>32)return!1;var c=i,d=function(){var F={},_;for(_=0;_<t.length;_++)F[t.charAt(_)]=0;for(_=0;_<t.length;_++)F[t.charAt(_)]|=1<<t.length-_-1;return F}();function u(F,_){var U=F/t.length,V=Math.abs(c-_);return a?U+V/a:V?1:U}var m=o,h=n.indexOf(t,c);h!=-1&&(m=Math.min(u(0,h),m),h=n.lastIndexOf(t,c+t.length),h!=-1&&(m=Math.min(u(0,h),m)));var g=1<<t.length-1;h=-1;for(var l,y,C=t.length+n.length,w,S=0;S<t.length;S++){for(l=0,y=C;l<y;)u(S,c+y)<=m?l=y:C=y,y=Math.floor((C-l)/2+l);C=y;var v=Math.max(1,c-y+1),b=Math.min(c+y,n.length)+t.length,E=Array(b+2);E[b+1]=(1<<S)-1;for(var x=b;x>=v;x--){var A=d[n.charAt(x-1)];if(S===0?E[x]=(E[x+1]<<1|1)&A:E[x]=(E[x+1]<<1|1)&A|((w[x+1]|w[x])<<1|1)|w[x+1],E[x]&g){var P=u(S,x-1);if(P<=m)if(m=P,h=x-1,h>c)v=Math.max(1,2*c-h);else break}}if(u(S+1,c)>m)break;w=E}return!(h<0)}),nt}var it,en;function ci(){if(en)return it;en=1;var n=de,t=Bt,e=Yt,i=Ft,a=li();return it=function(o,c){c=c||{},c=t({location:0,distance:100,threshold:.4,multiSearch:!0,searchClass:"fuzzy-search"},c);var d={search:function(u,m){for(var h=c.multiSearch?u.replace(/ +$/,"").split(/ +/):[u],g=0,l=o.items.length;g<l;g++)d.item(o.items[g],m,h)},item:function(u,m,h){for(var g=!0,l=0;l<h.length;l++){for(var y=!1,C=0,w=m.length;C<w;C++)d.values(u.values(),m[C],h[l])&&(y=!0);y||(g=!1)}u.found=g},values:function(u,m,h){if(u.hasOwnProperty(m)){var g=e(u[m]).toLowerCase();if(a(g,h,c))return!0}return!1}};return n.bind(i(o.listContainer,c.searchClass),"keyup",o.utils.events.debounce(function(u){var m=u.target||u.srcElement;o.search(m.value,d.search)},o.searchDelay)),function(u,m){o.search(u,m,d.search)}},it}var at,tn;function nn(){if(tn)return at;tn=1;var n=Wn,t=Ft,e=Bt,i=Nt,a=de,o=Yt,c=zt,d=ei,u=_t;return at=function(m,h,g){var l=this,y,C=Vt()(l),w=ti()(l),S=ni()(l);y={start:function(){l.listClass="list",l.searchClass="search",l.sortClass="sort",l.page=1e4,l.i=1,l.items=[],l.visibleItems=[],l.matchingItems=[],l.searched=!1,l.filtered=!1,l.searchColumns=void 0,l.searchDelay=0,l.handlers={updated:[]},l.valueNames=[],l.utils={getByClass:t,extend:e,indexOf:i,events:a,toString:o,naturalSort:n,classes:c,getAttribute:d,toArray:u},l.utils.extend(l,h),l.listContainer=typeof m=="string"?document.getElementById(m):m,l.listContainer&&(l.list=t(l.listContainer,l.listClass,!0),l.parse=ii()(l),l.templater=ai()(l),l.search=ri()(l),l.filter=oi()(l),l.sort=si()(l),l.fuzzySearch=ci()(l,h.fuzzySearch),this.handlers(),this.items(),this.pagination(),l.update())},handlers:function(){for(var v in l.handlers)l[v]&&l.handlers.hasOwnProperty(v)&&l.on(v,l[v])},items:function(){l.parse(l.list),g!==void 0&&l.add(g)},pagination:function(){if(h.pagination!==void 0){h.pagination===!0&&(h.pagination=[{}]),h.pagination[0]===void 0&&(h.pagination=[h.pagination]);for(var v=0,b=h.pagination.length;v<b;v++)S(h.pagination[v])}}},this.reIndex=function(){l.items=[],l.visibleItems=[],l.matchingItems=[],l.searched=!1,l.filtered=!1,l.parse(l.list)},this.toJSON=function(){for(var v=[],b=0,E=l.items.length;b<E;b++)v.push(l.items[b].values());return v},this.add=function(v,b){if(v.length!==0){if(b){w(v.slice(0),b);return}var E=[],x=!1;v[0]===void 0&&(v=[v]);for(var A=0,P=v.length;A<P;A++){var F=null;x=l.items.length>l.page,F=new C(v[A],void 0,x),l.items.push(F),E.push(F)}return l.update(),E}},this.show=function(v,b){return this.i=v,this.page=b,l.update(),l},this.remove=function(v,b,E){for(var x=0,A=0,P=l.items.length;A<P;A++)l.items[A].values()[v]==b&&(l.templater.remove(l.items[A],E),l.items.splice(A,1),P--,A--,x++);return l.update(),x},this.get=function(v,b){for(var E=[],x=0,A=l.items.length;x<A;x++){var P=l.items[x];P.values()[v]==b&&E.push(P)}return E},this.size=function(){return l.items.length},this.clear=function(){return l.templater.clear(),l.items=[],l},this.on=function(v,b){return l.handlers[v].push(b),l},this.off=function(v,b){var E=l.handlers[v],x=i(E,b);return x>-1&&E.splice(x,1),l},this.trigger=function(v){for(var b=l.handlers[v].length;b--;)l.handlers[v][b](l);return l},this.reset={filter:function(){for(var v=l.items,b=v.length;b--;)v[b].filtered=!1;return l},search:function(){for(var v=l.items,b=v.length;b--;)v[b].found=!1;return l}},this.update=function(){var v=l.items,b=v.length;l.visibleItems=[],l.matchingItems=[],l.templater.clear();for(var E=0;E<b;E++)v[E].matching()&&l.matchingItems.length+1>=l.i&&l.visibleItems.length<l.page?(v[E].show(),l.visibleItems.push(v[E]),l.matchingItems.push(v[E])):(v[E].matching()&&l.matchingItems.push(v[E]),v[E].hide());return l.trigger("updated"),l},y.start()},at}var di=nn();const ui=Fn(di);class an{constructor(t={}){this.config={containerId:t.containerId||"table-container",valueNames:t.valueNames||[],listClass:"listjs-container",page:t.page||10,searchEnabled:t.searchEnabled||!1,searchInputId:t.searchInputId||null,sortEnabled:t.sortEnabled!==!1,paginationEnabled:t.paginationEnabled!==!1,itemsCountEnabled:t.itemsCountEnabled!==!1,...t},this.list=null,this.searchInput=null,this.init()}init(){if(console.log(`Инициализация TableManager для контейнера: ${this.config.containerId}`),!document.getElementById(this.config.containerId)){console.log(`Контейнер ${this.config.containerId} не найден, пропускаем инициализацию`);return}this.initTable(),this.config.searchEnabled&&this.initSearch(),this.config.sortEnabled&&this.initSorting(),this.config.paginationEnabled&&this.initPaginationArrows(),this.config.itemsCountEnabled&&this.updateItemsCount()}initTable(){this.ensureTableHasData();const t={valueNames:this.config.valueNames,listClass:this.config.listClass,page:this.config.page};this.config.searchEnabled&&this.config.searchInputId&&(t.searchClass="search"),this.config.paginationEnabled&&(t.pagination={innerWindow:1,outerWindow:1,left:1,right:1,item:'<li><a class="page join-item btn btn-sm"></a></li>',paginationClass:"pagination join"}),this.list=new ui(this.config.containerId,t),this.config.paginationEnabled&&setTimeout(()=>{this.togglePaginationVisibility()},50),this.list.on("updated",()=>{this.config.itemsCountEnabled&&this.updateItemsCount(),this.config.paginationEnabled&&(this.togglePaginationVisibility(),setTimeout(()=>{this.updatePaginationArrows(),this.setupStandardPaginationArrows()},10))}),this.config.paginationEnabled&&setTimeout(()=>this.setupStandardPaginationArrows(),100)}ensureTableHasData(){const t=document.querySelector(`#${this.config.containerId} tbody.${this.config.listClass}`);if(t&&t.children.length===0){console.log("Нет данных в таблице, добавляем пустой элемент для инициализации");const i=document.querySelectorAll(`#${this.config.containerId} thead th`).length;let a="";for(let o=0;o<i;o++)a+='<td class="px-4 py-3 text-brand-gray">-</td>';t.innerHTML=`
        <tr class="hidden" data-type="template" data-id="0">
          ${a}
        </tr>
      `}}initSearch(){if(!this.config.searchInputId)return;if(this.searchInput=document.getElementById(this.config.searchInputId),!this.searchInput){console.log(`Поле поиска ${this.config.searchInputId} не найдено`);return}this.searchInput.classList.add("w-full","bg-brand-light","rounded-xl","p-3");let t;this.searchInput.addEventListener("input",e=>{clearTimeout(t),t=setTimeout(()=>{const i=e.target.value.toLowerCase().trim();i===""?this.list.search():this.list.search(i)},300)}),this.searchInput.addEventListener("keydown",e=>{e.key==="Escape"&&(this.searchInput.value="",this.list.search())})}initSorting(){document.querySelectorAll(`#${this.config.containerId} .sort[data-sort]`).forEach(e=>{e.addEventListener("click",()=>{setTimeout(()=>{this.updateSortIndicators()},10)})})}updateSortIndicators(){document.querySelectorAll(`#${this.config.containerId} .sort[data-sort]`).forEach(e=>{const i=e.querySelector("svg");i&&(e.classList.contains("asc")?i.style.transform="rotate(0deg)":e.classList.contains("desc")?i.style.transform="rotate(180deg)":i.style.transform="rotate(0deg)")})}initPaginationArrows(){const t=document.getElementById("prev-page"),e=document.getElementById("next-page");t&&t.addEventListener("click",()=>{const i=this.getCurrentPage();i>1&&this.list.show((i-2)*this.list.page+1,this.list.page)}),e&&e.addEventListener("click",()=>{const i=this.getCurrentPage(),a=Math.ceil(this.list.size()/this.list.page);i<a&&this.list.show(i*this.list.page+1,this.list.page)}),setTimeout(()=>this.updatePaginationArrows(),100)}updatePaginationArrows(){const t=document.querySelector(`#${this.config.containerId} .pagination`);if(!t)return;const e=t.querySelector(".pagination-prev"),i=t.querySelector(".pagination-next");if(!e||!i)return;const a=this.getCurrentPage(),o=Math.ceil(this.list.size()/this.list.page);a<=1?(e.disabled=!0,e.classList.add("opacity-50","cursor-not-allowed")):(e.disabled=!1,e.classList.remove("opacity-50","cursor-not-allowed")),a>=o?(i.disabled=!0,i.classList.add("opacity-50","cursor-not-allowed")):(i.disabled=!1,i.classList.remove("opacity-50","cursor-not-allowed")),this.updateNavigationArrows()}getCurrentPage(){const t=document.querySelector(`#${this.config.containerId} .pagination .active .page`);if(t)return parseInt(t.textContent)||1;const e=document.querySelector(`#${this.config.containerId} .pagination .active`);if(e){const i=e.textContent||e.innerText,a=parseInt(i);if(!isNaN(a))return a}return 1}updateItemsCount(){const t=document.getElementById("items-count"),e=document.getElementById("total-count");t&&e&&this.list&&(t.textContent=this.list.visibleItems.length,e.textContent=this.list.items.length)}filter(t){this.list&&this.list.filter(t)}clearFilter(){this.list&&this.list.filter()}addItem(t){this.list&&this.list.add(t)}removeItem(t){this.list&&this.list.remove("id",t)}getList(){return this.list}search(t=""){this.list&&this.list.search(t)}clearSearch(){this.searchInput&&(this.searchInput.value=""),this.search("")}setupStandardPaginationArrows(){const t=document.querySelector(`#${this.config.containerId} .pagination`);if(!t)return;const e=t.querySelectorAll(".page");if(e.length===0)return;const i=e[0],a=e[e.length-1];i&&isNaN(parseInt(i.textContent))&&(i.innerHTML="‹",i.classList.add("pagination-arrow","pagination-prev")),a&&isNaN(parseInt(a.textContent))&&(a.innerHTML="›",a.classList.add("pagination-arrow","pagination-next")),this.addNavigationArrows(t,i,a)}addNavigationArrows(t,e,i){if(t.querySelector(".pagination-first")||t.querySelector(".pagination-last"))return;const a=document.createElement("li");a.innerHTML='<a class="page join-item btn btn-sm pagination-first pagination-arrow">«</a>';const o=document.createElement("li");o.innerHTML='<a class="page join-item btn btn-sm pagination-last pagination-arrow">»</a>',e&&e.parentElement&&t.insertBefore(a,e.parentElement),i&&i.parentElement&&t.insertBefore(o,i.parentElement.nextSibling);const c=a.querySelector(".pagination-first"),d=o.querySelector(".pagination-last");c&&c.addEventListener("click",u=>{u.preventDefault(),this.list.show(1,this.list.page)}),d&&d.addEventListener("click",u=>{u.preventDefault();const m=Math.ceil(this.list.size()/this.list.page);this.list.show((m-1)*this.list.page+1,this.list.page)}),this.updateNavigationArrows()}updateNavigationArrows(){const t=document.querySelector(`#${this.config.containerId} .pagination`);if(!t)return;const e=t.querySelector(".pagination-first"),i=t.querySelector(".pagination-last"),a=t.querySelector(".pagination-prev"),o=t.querySelector(".pagination-next");if(!e||!i)return;const c=this.getCurrentPage(),d=Math.ceil(this.list.size()/this.list.page);c<=1?(e.disabled=!0,e.classList.add("opacity-50","cursor-not-allowed")):(e.disabled=!1,e.classList.remove("opacity-50","cursor-not-allowed")),c>=d?(i.disabled=!0,i.classList.add("opacity-50","cursor-not-allowed")):(i.disabled=!1,i.classList.remove("opacity-50","cursor-not-allowed")),a&&(c<=1?(a.disabled=!0,a.classList.add("opacity-50","cursor-not-allowed")):(a.disabled=!1,a.classList.remove("opacity-50","cursor-not-allowed"))),o&&(c>=d?(o.disabled=!0,o.classList.add("opacity-50","cursor-not-allowed")):(o.disabled=!1,o.classList.remove("opacity-50","cursor-not-allowed")))}togglePaginationVisibility(){const t=document.querySelector(`#${this.config.containerId} .pagination`);if(!t){console.log("Контейнер пагинации не найден");return}setTimeout(()=>{const e=t.querySelectorAll(".page"),i=Array.from(e).filter(a=>{const o=a.textContent.trim();return!isNaN(parseInt(o))&&o!==""});console.log(`Проверка пагинации: найдено ${i.length} кнопок с номерами страниц`),i.length<=1?(t.style.display="none",console.log("Пагинация скрыта: одна страница или меньше")):(t.style.display="flex",console.log(`Пагинация показана: ${i.length} страниц`))},20)}}class fi{constructor(){this.tableManager=null,this.emailModal=null,this.periodPicker=null,this.init()}init(){if(console.log("Инициализация страницы актов оказания услуг"),!document.getElementById("acts-table")){console.log("Таблица актов не найдена, пропускаем инициализацию");return}this.initTable(),this.initModal(),this.initRequestForm(),this.initDateFilters()}initTable(){this.tableManager=new an({containerId:"acts-table",valueNames:["date","actNumber","amount","organizationName"],page:10,searchEnabled:!0,searchInputId:"search-input",customPagination:!1})}initDateFilters(){this.periodPicker=new ze({containerId:"period-picker-container",inputId:"period-picker",placeholder:"Выберите период для акта сверки",autoApply:!1,defaultRange:!1,onRangeSelect:t=>{console.log("Выбран период для акта сверки:",t)}})}updateItemCounts(){if(!this.tableManager||!this.tableManager.list)return;const t=this.tableManager.list.visibleItems.length,e=this.tableManager.list.items.length,i=document.getElementById("items-count"),a=document.getElementById("total-count");i&&(i.textContent=t),a&&(a.textContent=e)}initModal(){if(this.emailModal=document.getElementById("email_modal"),!this.emailModal)return;const t=document.getElementById("modal-act-number"),e=document.getElementById("email-form");document.addEventListener("click",i=>{const a=i.target.closest(".send-email-btn");if(a){const o=a.dataset.actNumber;a.dataset.organization,t.textContent=o,$.open(this.emailModal)}}),e.addEventListener("submit",i=>{i.preventDefault();const a=document.getElementById("modal-email").value,o=t.textContent;console.log("Отправка акта",o,"на email:",a),alert("Акт успешно отправлен на "+a),$.close(this.emailModal),e.reset()})}initRequestForm(){const t=document.getElementById("request-form");t&&t.addEventListener("submit",e=>{e.preventDefault();const i=document.getElementById("email-input").value,a=this.periodPicker?this.periodPicker.getValue():null;if(!a||a.isEmpty){alert("Пожалуйста, выберите период для акта сверки");return}console.log("Запрос акта сверки на email:",i,"за период:",a),alert(`Запрос на акт сверки за период ${a.formattedRange} отправлен на ${i}`),t.reset(),this.periodPicker&&this.periodPicker.clearSelection()})}}function rn(){new fi}class gi{constructor(){this.tableManager=null,this.editModal=null,this.deleteModal=null,this.createModal=null,this.currentType="all",this.init()}init(){if(console.log("Инициализация страницы отправителей и получателей"),!document.getElementById("contacts-table")){console.log("Таблица отправителей/получателей не найдена, пропускаем инициализацию");return}this.initTable(),this.initModals(),this.initCreateButton(),this.initTypeTabs()}initTypeTabs(){const t=document.querySelectorAll(".type-tab");t.forEach(e=>{e.addEventListener("click",()=>{t.forEach(i=>{i.dataset.active="false"}),e.dataset.active="true",this.currentType=e.dataset.type,this.filterTable()})})}filterTable(){if(!this.tableManager||!this.tableManager.list)return;const t=this.tableManager.list;t.filter(),this.currentType!=="all"&&t.filter(e=>e.values().type===this.currentType),this.updateCounters()}updateCounters(){if(!this.tableManager||!this.tableManager.list)return;const t=this.tableManager.list,e=t.visibleItems.length,i=t.items.length;document.getElementById("items-count").textContent=e,document.getElementById("total-count").textContent=i}initTable(){this.tableManager=new an({containerId:"contacts-table",valueNames:["type","name","phone","location","address"],page:10,searchEnabled:!0,searchInputId:"search-input"});const t=document.getElementById("search-input");t&&t.addEventListener("input",()=>{this.updateCounters()}),this.updateCounters()}initModals(){this.initEditModal(),this.initDeleteModal(),this.initCreateModal()}initEditModal(){if(this.editModal=document.getElementById("edit-modal"),!this.editModal)return;const t=document.getElementById("edit-form");document.addEventListener("click",e=>{if(e.target.closest(".edit-btn")){const i=e.target.closest(".edit-btn"),a=i.dataset.id,o=i.closest("tr");document.getElementById("edit-type").value=o.dataset.type,document.getElementById("edit-name").value=o.querySelector(".name").textContent,document.getElementById("edit-phone").value=o.querySelector(".phone").textContent,document.getElementById("edit-location").value=o.querySelector(".location").textContent,document.getElementById("edit-address").value=o.querySelector(".address").textContent,document.getElementById("edit-id").value=a,$.open(this.editModal)}}),t.addEventListener("submit",e=>{e.preventDefault();const i=document.getElementById("edit-id").value,a=document.getElementById("edit-type").value,o=document.getElementById("edit-name").value,c=document.getElementById("edit-phone").value,d=document.getElementById("edit-location").value,u=document.getElementById("edit-address").value;console.log("Редактирование контакта",i,a,o,c,d,u),alert("Контакт успешно отредактирован"),$.close(this.editModal),t.reset()})}initDeleteModal(){if(this.deleteModal=document.getElementById("delete-modal"),!this.deleteModal)return;const t=document.getElementById("delete-form"),e=document.getElementById("modal-contact-name");document.addEventListener("click",i=>{if(i.target.closest(".delete-btn")){const a=i.target.closest(".delete-btn"),o=a.dataset.id,d=a.closest("tr").querySelector(".name").textContent;document.getElementById("delete-id").value=o,e.textContent=d,$.open(this.deleteModal)}}),t.addEventListener("submit",i=>{i.preventDefault();const a=document.getElementById("delete-id").value;console.log("Удаление контакта",a),alert("Контакт успешно удален"),$.close(this.deleteModal),t.reset()})}initCreateModal(){if(this.createModal=document.getElementById("create-modal"),!this.createModal)return;const t=document.getElementById("create-form");t.addEventListener("submit",e=>{e.preventDefault();const i=document.getElementById("create-type").value,a=document.getElementById("create-name").value,o=document.getElementById("create-phone").value,c=document.getElementById("create-location").value,d=document.getElementById("create-address").value,u=document.getElementById("create-comment").value;console.log("Создание нового контакта",i,a,o,c,d,u),alert("Контакт успешно создан"),$.close(this.createModal),t.reset()})}initCreateButton(){const t=document.getElementById("create-btn");t&&t.addEventListener("click",()=>{$.open(this.createModal)})}}function on(){new gi}const sn=document.getElementById("change-password-btn");sn&&sn.addEventListener("click",n=>{n.preventDefault(),$.create({id:"change-password-modal",title:"Изменить пароль",content:`
        <form class='space-y-4' id='change-password-form'>
          <input type='password' name='current' placeholder='Текущий пароль' class='px-4 py-3 rounded-lg border border-gray-200 w-full focus:outline-none focus:border-brand-blue text-body-secondary' required />
          <input type='password' name='new' placeholder='Новый пароль' class='px-4 py-3 rounded-lg border border-gray-200 w-full focus:outline-none focus:border-brand-blue text-body-secondary' required />
          <input type='password' name='repeat' placeholder='Повторите новый пароль' class='px-4 py-3 rounded-lg border border-gray-200 w-full focus:outline-none focus:border-brand-blue text-body-secondary' required />
          <button type='submit' class='bg-brand-blue text-white px-6 py-3 rounded-lg text-buttons w-full'>Изменить</button>
        </form>
      `,size:"small",onOpen:t=>{const e=t.querySelector("#change-password-form");e&&e.addEventListener("submit",i=>{i.preventDefault(),console.log("Смена пароля"),$.close(t)})}})});const ln=document.getElementById("edit-email-btn");ln&&ln.addEventListener("click",n=>{n.preventDefault(),$.create({id:"change-email-modal",title:"Изменить почту для восстановления",content:`
        <form class='space-y-4' id='change-email-form'>
          <input type='email' name='email' placeholder='Новая почта' class='px-4 py-3 rounded-lg border border-gray-200 w-full focus:outline-none focus:border-brand-blue text-body-secondary' required />
          <button type='submit' class='bg-brand-blue text-white px-6 py-3 rounded-lg text-buttons w-full'>Сохранить</button>
        </form>
      `,size:"small",onOpen:t=>{const e=t.querySelector("#change-email-form");e&&e.addEventListener("submit",i=>{i.preventDefault(),console.log("Смена email"),$.close(t)})}})});const Wi="";console.log("main.js: Начало загрузки");const cn=gt();console.log("Определен базовый путь:",cn),window.BASE_PATH=cn,window.modalManager=$,window.DateRangePicker=ze,window.initMap=me,window.selectOfficeCard=Me,window.selectOfficeCardNoFocus=Y,window.updateInfoPanel=Ve,window.getZoomForDevice=ce,window.getCenterForDevice=Ct,window.getMarkerSizeForZoom=ie,window.createColoredMarkerIcon=ne,window.mapConfig=X,window.loadSwiper=Et,window.initSwiperSlider=Dt,window.initMobileMenu=Mt,window.initTitleAnimations=St,window.initForms=xt,window.initFaqAccordion=It,window.initPaymentTabs=kt,window.initHomePage=Lt,window.initContactsPage=At,window.initVacanciesPage=Ot,window.initPaymentsPage=qt,window.Pagination=Se,window.initServiceActsPage=rn,window.initSendersReceiversPage=on;let dn=!1,rt=!1;function hi(){console.log("=== Начало инициализации страницы ==="),Mt(),xt(),new pt,document.getElementById("map")&&(console.log("Найден контейнер карты, начинаем инициализацию..."),setTimeout(()=>{let i=[];const a=document.querySelectorAll(".office-card");let o=!1;if(a&&a.length>0&&(console.log("Найдены карточки офисов на странице:",a.length),a.forEach(c=>{if(c.dataset.coordinates){const d=c.dataset.coordinates.split(",").map(u=>parseFloat(u.trim()));if(d.length===2){const u=c.dataset.city||"",m=c.querySelector("h3 + div.text-brand-gray"),h=m?m.textContent.trim():"",g=c.querySelectorAll("div.text-brand-gray"),l=g.length>1?g[1]:null,y=g.length>2?g[2]:null,C=g.length>3?g[3]:null;i.push({city:u,address:h,type:l?l.textContent.trim():"",phone:y?y.textContent.trim():"",email:C?C.textContent.trim():"",coordinates:d})}}}),i.length>0&&(console.log("Собраны данные офисов из карточек:",i.length),me(i),o=!0)),!o&&window.officesData&&window.officesData.length>0&&(console.log("Использую предварительно загруженные данные офисов:",window.officesData.length),me(window.officesData),o=!0),!o){const c=document.querySelector(".map-info-panel .font-bold.text-2xl.text-brand-gray");if(c){console.log("Найдены данные для дефолтного офиса в DOM");const d=document.querySelector(".map-info-panel div:nth-of-type(2)"),u=document.querySelector(".map-info-panel div:nth-of-type(3)"),m=document.querySelector(".map-info-panel div:nth-of-type(4)"),h=document.querySelector(".map-info-panel div:nth-of-type(5)");let g=[56.010563,92.852572];const l=document.querySelector(".map-info-panel");if(l&&l.dataset.coordinates){const w=l.dataset.coordinates.split(",").map(S=>parseFloat(S.trim()));w.length===2&&(g=w)}const y={city:c.textContent,address:d?d.textContent:"",type:u?u.textContent:"",phone:m?m.textContent:"",email:h?h.textContent:"",coordinates:g};me([y])}else console.log("Данные не найдены на странице, инициализируем карту без маркеров"),me([])}},100));const t=window.location.pathname,e=t.split("/").pop();console.log(`Текущий путь: ${t}, определена страница: ${e||"главная (индекс)"}`),e===""||e==="index.html"?(console.log("Инициализация главной страницы..."),Lt()):e==="vacancies.html"?(console.log("Инициализация страницы вакансий..."),Ot()):e==="contacts.html"?(console.log("Инициализация страницы контактов..."),At()):e==="payments.html"?(console.log("Инициализация страницы платежей..."),qt()):e==="news.html"?(console.log("Инициализация страницы новостей..."),new Vn):e==="service-acts.html"?(console.log("Инициализация страницы актов оказания услуг..."),rn()):e==="senders-receivers.html"&&(console.log("Инициализация страницы карточек отправителей и получателей..."),on()),St(),Nn(),console.log("=== Инициализация страницы завершена ===")}function un(){if(dn||rt){console.log("Инициализация уже выполнена или в процессе, пропускаем повторный вызов");return}console.log("Начинаем безопасную инициализацию страницы"),rt=!0;try{hi(),dn=!0}catch(n){console.error("Ошибка при инициализации страницы:",n)}finally{rt=!1}}ht(un),window.addEventListener("load",un)})();
