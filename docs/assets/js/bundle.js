(function(){"use strict";function ie(){const n=document.getElementsByTagName("script"),e=n[n.length-1];try{const t=e.src;if(t.includes("://")){const i=new URL(t).pathname.split("/");return i.pop(),i[i.length-1]==="js"&&i[i.length-2]==="assets"?(i.pop(),i.pop()):i[i.length-1]==="assets"&&i.pop(),i.join("/")+"/"}else{const o=t.split("/");return o.pop(),o.length>=2&&o[o.length-1]==="js"&&o[o.length-2]==="assets"?(o.pop(),o.pop()):o.length>=1&&o[o.length-1]==="assets"&&o.pop(),o.join("/")+"/"}}catch(t){return console.error("Ошибка при определении базового пути:",t),"./"}}function se(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function le(n,e){const t=document.createElement("script");t.src=n,t.onload=()=>{e&&e(null)},t.onerror=()=>{e&&e(new Error(`Не удалось загрузить скрипт: ${n}`))},document.head.appendChild(t)}function re(n,e){const t=document.createElement("link");t.rel="stylesheet",t.href=n,t.onload=()=>{e&&e(null)},t.onerror=()=>{e&&e(new Error(`Не удалось загрузить стиль: ${n}`))},document.head.appendChild(t)}function F(){return window.innerWidth<768?"mobile":"desktop"}const $="#008DD2",N="#666666",S={initialView:{center:{desktop:[54.962902,73.38475],mobile:[53.224854,50.199879]},zoom:{desktop:4,mobile:3}},officeZoom:{desktop:15,mobile:13},maxBoundsZoom:{desktop:18,mobile:7},boundsPadding:[50,50],markerSizing:{minZoom:2,maxZoom:18,minSize:[16,18],maxSize:[36,42],minOffset:[-8,-18],maxOffset:[-18,-42]}};function L(n){const e=`
  <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M35.114 14.1578C33.014 4.91781 24.954 0.757812 17.874 0.757812C17.874 0.757812 17.874 0.757812 17.854 0.757812C10.794 0.757812 2.71397 4.89781 0.61397 14.1378C-1.72603 24.4578 4.59397 33.1978 10.314 38.6978C12.434 40.7378 15.154 41.7578 17.874 41.7578C20.594 41.7578 23.314 40.7378 25.414 38.6978C31.134 33.1978 37.454 24.4778 35.114 14.1578ZM17.874 24.1778C14.394 24.1778 11.574 21.3578 11.574 17.8778C11.574 14.3978 14.394 11.5778 17.874 11.5778C21.354 11.5778 24.174 14.3978 24.174 17.8778C24.174 21.3578 21.354 24.1778 17.874 24.1778Z" fill="${n}" />
  </svg>`;return`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(e)}`}function q(n){const e=F();return n[e]}function Z(n){const e=F();return n[e]}function x(n){const{minZoom:e,maxZoom:t,minSize:o,maxSize:i,minOffset:l,maxOffset:r}=S.markerSizing;if(n<=e)return{size:o,offset:l};if(n>=t)return{size:i,offset:r};const a=(n-e)/(t-e),d=Math.round(o[0]+(i[0]-o[0])*a),g=Math.round(o[1]+(i[1]-o[1])*a),h=g/i[1],c=Math.round(l[0]+(r[0]-l[0])*h),f=Math.round(l[1]+(r[1]-l[1])*h);return{size:[d,g],offset:[c,f]}}function D(n){const e=document.querySelector(".map-info-panel");if(!e)return;let t=n.address||"";n.city&&t.trim().startsWith(n.city+",")&&(t=t.replace(n.city+",","").trim()),e.innerHTML=`
    <div class="flex justify-between items-center mb-2">
      <div class="font-bold text-2xl text-brand-gray">${n.city||""}</div>
      <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="text-brand-gray">${t}</div>
    <div class="hidden lg:block text-brand-gray">${n.type||""}</div>
    ${n.phone?`<div class="hidden lg:block text-brand-gray">${n.phone}</div>`:""}
    ${n.email?`<div class="hidden lg:block text-brand-gray">${n.email}</div>`:""}
    <button class="bg-brand-blue mt-2 md:mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
  `,e.classList.remove("hidden");const o=e.querySelector(".close-info-panel");o&&o.addEventListener("click",function(){e.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),E(null)})}function E(n,e=null,t=null,o=null){if(document.querySelectorAll(".office-card").forEach(i=>{i.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),e&&D(e),t&&o&&(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),t.options)){const i=o.getZoom(),l=x(i),r=L($);t.options.set({iconImageHref:r,iconImageSize:l.size,iconImageOffset:l.offset})}}function T(n,e=null,t=null,o=null,i=null){if(document.querySelectorAll(".office-card").forEach(l=>{l.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),e&&D(e),t&&o){if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),t.options){const l=o.getZoom(),r=x(l),a=L($);t.options.set({iconImageHref:a,iconImageSize:r.size,iconImageOffset:r.offset})}if(i){const l=q(S.officeZoom);o.setCenter(i,l,{duration:300})}}}function B(n,e){try{ymaps.ready(function(){const t=q(S.initialView.zoom),o=Z(S.initialView.center),i=new ymaps.Map("map",{center:o,zoom:t,controls:["zoomControl","fullscreenControl"],behaviors:["drag","multiTouch"]}),l=new ymaps.GeoObjectCollection,r={};let a=null;const d=x(t),g={iconLayout:"default#image",iconImageHref:L(N),iconImageSize:d.size,iconImageOffset:d.offset};function h(s){const m=x(s);Object.values(r).forEach(w=>{const y=w.options.get("iconImageHref").includes(encodeURIComponent($));w.options.set({iconImageSize:m.size,iconImageOffset:m.offset})})}window.resetAllMarkers=function(){const s=i.getZoom(),m=x(s);Object.values(r).forEach(w=>{const y=L(N);w.options.set({iconImageHref:y,iconImageSize:m.size,iconImageOffset:m.offset})})},n.forEach((s,m)=>{if(!s.coordinates||s.coordinates.length!==2)return;const w=L(N),y=new ymaps.Placemark(s.coordinates,{hintContent:s.city},{iconLayout:"default#image",iconImageHref:w,iconImageSize:d.size,iconImageOffset:d.offset});r[m]=y,l.add(y),y.events.add("click",()=>{console.log("Клик по маркеру");const C=i.getZoom(),P=q(S.officeZoom),b=q(S.initialView.zoom),v=Math.abs(C-P)<3;if(console.log("Текущий масштаб:",C),console.log("Масштаб офиса:",P),console.log("Начальный масштаб:",b),console.log("Маркер сейчас приближен:",v),console.log("Активный маркер:",a===y?"Текущий":a?"Другой":"Нет"),!(a===y))console.log("Действие: Выделяем новый маркер без фокусировки"),E(null,s,y,i),a=y;else if(!v)console.log("Действие: Приближаем маркер"),T(null,s,y,i,y.geometry.getCoordinates());else{console.log("Действие: Отдаляем маркер, сохраняем позицию и меняем только масштаб"),console.log("Целевой масштаб:",b);const M=i.getCenter();console.log("Сохраняем текущий центр карты:",M);const I=x(b),V=L($);i.setZoom(b,{duration:300}),setTimeout(()=>{y&&y.options&&y.options.set({iconImageHref:V,iconImageSize:I.size,iconImageOffset:I.offset})},350)}})}),i.geoObjects.add(l),i.events.add("boundschange",function(s){if(s.get("oldZoom")!==s.get("newZoom")){h(s.get("newZoom"));const m=s.get("newZoom");console.log("Масштаб изменился на:",m)}}),l.getLength()>0&&(console.log(`${F()}: используем заданный масштаб и центр`,t),i.setCenter(o,t));const c=document.querySelector(".map-info-panel");let f=null;if(window.defaultOfficeData)f=window.defaultOfficeData,p(f);else if(c){const s=c.querySelector(".font-bold.text-2xl.text-brand-gray"),m=c.querySelector("div:nth-of-type(2)"),w=c.querySelector("div:nth-of-type(3)"),y=c.querySelector("div:nth-of-type(4)"),C=c.querySelector("div:nth-of-type(5)");if(s){let P=[55.789461,37.551735];if(c.dataset.coordinates){const b=c.dataset.coordinates.split(",").map(v=>parseFloat(v.trim()));b.length===2&&(P=b)}f={city:s.textContent,address:m?m.textContent:"",type:w?w.textContent:"",phone:y?y.textContent:"",email:C?C.textContent:"",coordinates:P},p(f)}}if(!f)try{fetch(`${e}assets/data/default-office.json`).then(s=>s.json()).then(s=>{f=s,p(f)}).catch(s=>{console.error("Ошибка при загрузке дефолтного офиса:",s)})}catch(s){console.error("Ошибка при загрузке дефолтного офиса:",s)}function p(s){if(!n.some(y=>y.city===s.city&&y.address===s.address)&&s.coordinates){n.push(s);const y=n.length-1,C=i.getZoom(),P=x(C),b=L(N),v=new ymaps.Placemark(s.coordinates,{hintContent:s.city},{iconLayout:"default#image",iconImageHref:b,iconImageSize:P.size,iconImageOffset:P.offset});v.events.add("click",()=>{console.log("Клик по дефолтному маркеру");const A=i.getZoom(),M=q(S.officeZoom),I=q(S.initialView.zoom),V=Math.abs(A-M)<3;if(console.log("Текущий масштаб:",A),console.log("Масштаб офиса:",M),console.log("Начальный масштаб:",I),console.log("Дефолтный маркер сейчас приближен:",V),console.log("Активный маркер:",a===v?"Текущий дефолтный":a?"Другой":"Нет"),!(a===v))console.log("Действие: Выделяем новый дефолтный маркер без фокусировки"),E(null,s,v,i),a=v;else if(!V)console.log("Действие: Приближаем дефолтный маркер"),T(null,s,v,i,s.coordinates);else{console.log("Действие: Отдаляем дефолтный маркер, сохраняем позицию и меняем только масштаб"),console.log("Целевой масштаб:",I);const ye=i.getCenter();console.log("Сохраняем текущий центр карты:",ye);const ne=x(I),we=L($);i.setZoom(I,{duration:300}),setTimeout(()=>{v&&v.options&&v.options.set({iconImageHref:we,iconImageSize:ne.size,iconImageOffset:ne.offset})},350)}}),r[y]=v,l.add(v),i.geoObjects.add(v)}const w=n.findIndex(y=>y.city===s.city&&y.address===s.address);if(w!==-1){const y=r[w];if(y){const C=document.querySelectorAll(".office-card");let P=null;C.forEach(b=>{const v=b.dataset.city,A=b.querySelector("h3 + div.text-brand-gray"),M=A?A.textContent.trim():"";v===s.city&&M.includes(s.address)&&(P=b)}),E(P,n[w],y,i),a=y}}}document.querySelectorAll(".office-card").forEach((s,m)=>{s.addEventListener("click",function(){const w=this.dataset.index?parseInt(this.dataset.index,10):m,y=r[w];y&&(T(this,n[w],y,i,y.geometry.getCoordinates()),a=y)})}),document.querySelectorAll(".close-info-panel").forEach(s=>{s.addEventListener("click",function(){const m=this.closest(".map-info-panel");m&&(m.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),E(null),a=null)})}),window.addEventListener("resize",()=>{const s=i.getCenter();setTimeout(()=>{i.container.fitToViewport();const m=F(),w=q(S.initialView.zoom),y=Z(S.initialView.center);i.setCenter(y,w,{duration:0})},200)}),i.events.add("click",s=>{s.get("target").options})})}catch(t){console.error("Ошибка при инициализации карты:",t)}}function R(){if(typeof Swiper>"u"){console.error("Swiper не загружен!");return}if(new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,speed:800,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e4,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){console.log("Swiper инициализирован")}}}),document.querySelector(".news-swiper-container")){console.log("Инициализация Swiper для новостей с уже существующими слайдами...");const n=document.querySelector(".news-swiper-container .swiper-wrapper"),e=n?n.querySelectorAll(".swiper-slide"):[];console.log(`Найдено ${e.length} существующих слайдов новостей от шаблонизатора`),new Swiper(".news-swiper-container",{slidesPerView:1,spaceBetween:30,loop:e.length>1,speed:1100,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".news-swiper-pagination",clickable:!0},navigation:{nextEl:".news-swiper-button-next",prevEl:".news-swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:30}},on:{init:function(){console.log("Swiper новостей инициализирован")}}})}}function j(){return new Promise((n,e)=>{try{re("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css",t=>{if(t){console.error("Не удалось загрузить стили Swiper:",t),e(t);return}le("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",o=>{if(o){console.error("Не удалось загрузить библиотеку Swiper:",o),e(o);return}console.log("Swiper успешно загружен"),typeof Swiper<"u"?(console.log("Инициализация Swiper..."),setTimeout(()=>{R(),n()},100)):e(new Error("Swiper не определен после загрузки"))})})}catch(t){console.error("Ошибка при загрузке Swiper:",t),e(t)}})}function U(){const n=document.getElementById("burger-menu-btn"),e=document.getElementById("mobile-close-btn"),t=document.getElementById("mobile-menu"),o=document.querySelectorAll(".burger-line");if(!t)return;const i=()=>{t.classList.remove("translate-x-full"),t.classList.add("translate-x-0"),o[0].classList.add("rotate-45","translate-y-2"),o[1].classList.add("opacity-0"),o[2].classList.add("-rotate-45","-translate-y-2"),document.body.classList.add("overflow-hidden")},l=()=>{t.classList.remove("translate-x-0"),t.classList.add("translate-x-full"),o[0].classList.remove("rotate-45","translate-y-2"),o[1].classList.remove("opacity-0"),o[2].classList.remove("-rotate-45","-translate-y-2"),document.body.classList.remove("overflow-hidden")};n&&n.addEventListener("click",i),e&&e.addEventListener("click",l)}function _(){const n=document.querySelectorAll(".animated-title"),e=document.querySelectorAll(".animated-subtitle");n.length===0&&e.length===0||setTimeout(()=>{n.forEach(t=>{t.classList.add("show")}),setTimeout(()=>{e.forEach(t=>{t.classList.add("show")})},300)},200)}function W(){const n=document.querySelectorAll(".faq-toggle");n.length>0&&n.forEach(e=>{e.addEventListener("click",function(){const t=this.parentElement.querySelector(".faq-content"),o=this.querySelector("svg");t.classList.contains("hidden")?(t.classList.remove("hidden"),o.classList.add("rotate-180")):(t.classList.add("hidden"),o.classList.remove("rotate-180"))})})}function Y(){const n=document.querySelector("form");n&&n.addEventListener("submit",e=>{e.preventDefault(),alert("Форма отправлена!")})}function G(){console.log("Инициализация табов на странице платежей...");const n=document.querySelectorAll(".payment-tab"),e=document.querySelectorAll(".payment-tab-content");n.length>0&&n.forEach(i=>{i.addEventListener("click",function(){const r=`tab-${this.getAttribute("data-tab")}`;n.forEach(a=>{a.classList.remove("bg-white"),a.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),e.forEach(a=>{a.classList.add("hidden")}),document.getElementById(r).classList.remove("hidden")})});const t=document.querySelectorAll(".delivery-tab"),o=document.querySelectorAll(".delivery-tab-content");t.length>0&&t.forEach(i=>{i.addEventListener("click",function(){const r=`tab-${this.getAttribute("data-tab")}`;t.forEach(a=>{a.classList.remove("bg-white"),a.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),o.forEach(a=>{a.classList.add("hidden")}),document.getElementById(r).classList.remove("hidden")})})}function K(){console.log("Инициализация главной страницы начата"),document.querySelector(".swiper-container")||document.querySelector(".news-swiper-container")?(console.log("Обнаружен контейнер Swiper, начинаю загрузку..."),j().catch(c=>{console.error("Не удалось загрузить Swiper:",c)})):console.log("Контейнеры Swiper не обнаружены на странице"),console.log("Используем новости, уже загруженные через шаблонизатор");const n=document.querySelector(".news-carousel"),e=document.querySelector(".news-carousel button.absolute.left-0"),t=document.querySelector(".news-carousel button.absolute.right-0");if(n&&e&&t){const c=n.querySelectorAll(".bg-brand-light");let f=0;const p=u=>{c.forEach(s=>{s.style.display="none"}),c[u].style.display="block"};e.addEventListener("click",()=>{f=(f-1+c.length)%c.length,p(f)}),t.addEventListener("click",()=>{f=(f+1)%c.length,p(f)}),p(f)}const o=document.querySelectorAll(".carousel-slide"),i=document.querySelector(".carousel-container .absolute.left-4"),l=document.querySelector(".carousel-container .absolute.right-4");if(o.length>0&&i&&l){let c=0;const f=p=>{o.forEach(u=>{u.classList.remove("active"),u.style.display="none"}),o[p].classList.add("active"),o[p].style.display="block"};i.addEventListener("click",()=>{c=(c-1+o.length)%o.length,f(c)}),l.addEventListener("click",()=>{c=(c+1)%o.length,f(c)}),f(c),setInterval(()=>{c=(c+1)%o.length,f(c)},5e3)}const r=document.querySelector(".track-form");if(r)r.addEventListener("submit",function(c){c.preventDefault();const f=this.querySelector('input[type="text"]').value;f.trim()!==""?(console.log("Отслеживание заказа:",f),alert(`Отслеживание заказа: ${f}`)):(console.warn("Пустой ввод в форме отслеживания заказа"),alert("Пожалуйста, введите номер заказа"))});else{const c=document.querySelector(".tracking-form-container, .p-4.rounded-lg.w-full.md\\:w-2\\/5");if(c){console.log("Найден контейнер формы отслеживания");const f=c.querySelectorAll("button");console.log(`В контейнере формы отслеживания найдено ${f.length} кнопок:`),f.forEach((u,s)=>{console.log(`Кнопка #${s+1}:`,{classes:u.className,text:u.textContent.trim()})});let p=c.querySelector("button.bg-brand-gray");p||(console.log('Не найдена кнопка по классу, ищем по тексту "Поиск"'),p=Array.from(c.querySelectorAll("button")).find(s=>s.textContent.trim().toLowerCase().includes("поиск"))),p?(console.log('Найдена кнопка "Поиск" для отслеживания:',{text:p.textContent.trim(),classes:p.className}),p.addEventListener("click",function(u){u.preventDefault(),console.log('Клик по кнопке "Поиск" для отслеживания');const s=c.querySelector('input[type="text"]');if(!s){console.error("Не найдено поле ввода для формы отслеживания");return}s.hasAttribute("required")||s.setAttribute("required",""),s.validity.valid?(console.log("Отслеживание номера:",s.value),alert(`Отслеживание номера: ${s.value}`)):s.reportValidity()})):console.warn('Не найдена кнопка "Поиск" в контейнере формы отслеживания')}else console.warn("Не найден контейнер формы отслеживания")}ae();const a=document.querySelector(".price-form");let d=!1;if(a&&(d=!0,a.addEventListener("submit",function(c){if(c.preventDefault(),this.checkValidity()){const f=document.querySelector("#from-city-input"),p=document.querySelector("#to-city-input");console.log("Расчет стоимости доставки:",{from:f.value,to:p.value}),alert(`Расчет стоимости доставки: ${f.value} -> ${p.value}`)}else this.reportValidity()})),!d){const c=document.querySelector(".bg-brand-light.p-4.rounded-lg.w-full.md\\:w-3\\/5");if(c){console.log("Найден контейнер формы расчета, будем использовать клик по кнопке");const f=c.querySelectorAll("button");console.log(`В контейнере формы расчета найдено ${f.length} кнопок:`),f.forEach((u,s)=>{console.log(`Кнопка #${s+1}:`,{classes:u.className,text:u.textContent.trim()})});let p=c.querySelector("button.bg-brand-gray");p||(console.log('Не найдена кнопка по классу, ищем по тексту "Рассчитать"'),p=Array.from(c.querySelectorAll("button")).find(s=>s.textContent.trim().toLowerCase().includes("рассчитать"))),p?(console.log('Найдена кнопка "Рассчитать" для расчета стоимости:',{text:p.textContent.trim(),classes:p.className}),p.addEventListener("click",function(u){u.preventDefault(),console.log('Клик по кнопке "Рассчитать"');const s=document.querySelector("#from-city-input"),m=document.querySelector("#to-city-input");if(!s||!m){console.error("Не найдены поля ввода для формы расчета");return}s.validity.valid&&m.validity.valid?(console.log("Расчет стоимости доставки:",{from:s.value,to:m.value}),alert(`Расчет стоимости доставки: ${s.value} -> ${m.value}`)):s.validity.valid?m.validity.valid||m.reportValidity():s.reportValidity()})):console.warn('Не найдена кнопка "Рассчитать" в контейнере формы расчета')}}const g=document.querySelector(".relative.bg-brand-light button");g&&g.addEventListener("click",function(){alert("Форма для отправки заявки будет открыта")});const h=document.querySelector("form.space-y-4");h&&(h.querySelectorAll('input[type="text"], input[type="tel"], input[type="checkbox"]').forEach(f=>{f.hasAttribute("required")||f.setAttribute("required","")}),h.addEventListener("submit",function(f){if(f.preventDefault(),this.checkValidity()){const p=this.querySelector('input[type="text"]').value,u=this.querySelector('input[type="tel"]').value;alert(`Спасибо за заявку, ${p}! Мы свяжемся с вами по номеру ${u}`),this.reset()}else this.reportValidity()})),console.log("Инициализация главной страницы завершена")}function ae(){console.log("Инициализация автокомплита для полей выбора городов");let n=[];if(window.officesData&&window.officesData.length>0){console.log("Получаем города из данных офисов:",window.officesData.length);const e=new Set;window.officesData.forEach(t=>{t.city&&e.add(t.city)}),n=Array.from(e),console.log("Получили уникальные города:",n.length)}else{console.log("Ищем данные офисов в DOM-структуре");const e=document.querySelectorAll("#offices-data .office-data");if(e&&e.length){console.log("Найдены элементы данных офисов:",e.length);const t=new Set;e.forEach(o=>{const i=o.dataset.city;i&&t.add(i)}),n=Array.from(t),console.log("Получили уникальные города из DOM:",n.length)}else console.log("Не найдены данные офисов, используем стандартный набор городов"),n=["Новосибирск","Красноярск","Иркутск","Абакан","Томск"]}console.log("Список городов для автокомплита:",n),ce(n)}function ce(n){console.log("Настройка полей ввода с автокомплитом");const e=document.querySelector(".flex.md\\:flex-row.flex-col .relative.w-full"),t=document.querySelectorAll(".flex.md\\:flex-row.flex-col .relative.w-full")[1];if(!e||!t){console.error("Не найдены контейнеры для полей выбора городов");const d=document.querySelectorAll(".flex.md\\:flex-row.flex-col");console.log("Найдено flex-контейнеров:",d.length),d.forEach((g,h)=>{const c=g.querySelectorAll(".relative.w-full");console.log(`Flex-контейнер #${h+1} содержит ${c.length} relative-контейнеров`)});return}console.log("Найдены контейнеры для полей выбора",{fromContainer:!!e,toContainer:!!t}),Q(e,n,"from-city","Откуда"),Q(t,n,"to-city","Куда");const o=document.querySelector(".flex.md\\:flex-row.flex-col button.w-12");o?(console.log("Найдена кнопка переключения городов"),o.addEventListener("click",function(){const d=document.querySelector("#from-city-input"),g=document.querySelector("#to-city-input");if(d&&g){const h=d.value;d.value=g.value,g.value=h,console.log("Выполнено переключение значений полей:",{newFromValue:d.value,newToValue:g.value})}else console.warn("Не найдены поля ввода для переключения")})):console.warn("Не найдена кнопка переключения городов");const l=e.parentElement.querySelectorAll(".cursor-pointer");l.length>0?(console.log(`Найдено ${l.length} ссылок быстрого выбора для поля "Откуда"`),l.forEach(d=>{d.addEventListener("click",function(){const g=document.querySelector("#from-city-input");if(g){g.value=this.textContent.trim(),console.log('Быстрый выбор города "Откуда":',g.value);const h=document.querySelector("#from-city-suggestions");h&&h.classList.add("hidden")}else console.warn('Не найдено поле ввода "Откуда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Откуда"');const a=t.parentElement.querySelectorAll(".cursor-pointer");a.length>0?(console.log(`Найдено ${a.length} ссылок быстрого выбора для поля "Куда"`),a.forEach(d=>{d.addEventListener("click",function(){const g=document.querySelector("#to-city-input");if(g){g.value=this.textContent.trim(),console.log('Быстрый выбор города "Куда":',g.value);const h=document.querySelector("#to-city-suggestions");h&&h.classList.add("hidden")}else console.warn('Не найдено поле ввода "Куда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Куда"')}function Q(n,e,t,o){console.log(`Создание поля автокомплита ${t} с плейсхолдером "${o}"`);const i=n.querySelector("img");let l="";i?(l=`<img src="${i.src}" alt="" class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none z-10">`,console.log(`Найдена существующая иконка стрелки для ${t}`)):console.warn(`Не найдена иконка стрелки для ${t}`);const r=`
    <div class="relative w-full">
      <input 
        id="${t}-input" 
        type="text" 
        class="appearance-none bg-white border border-gray-200 rounded-lg px-4 py-3 w-full focus:outline-none focus:ring-1 focus:ring-brand-blue text-body-secondary"
        placeholder="${o}" 
        autocomplete="off"
        required
      >
      <button type="button" class="absolute right-0 top-0 h-full w-12 text-gray-400 focus:outline-none z-10"></button>
      ${l}
      <ul 
        id="${t}-suggestions" 
        class="absolute w-full bg-white border border-gray-200 rounded-md shadow-md mt-1 max-h-60 overflow-y-auto hidden z-20"
      ></ul>
    </div>
  `;n.innerHTML=r,console.log(`Вставлена HTML-разметка для поля ${t}`);const a=document.getElementById(`${t}-input`),d=document.getElementById(`${t}-suggestions`),g=n.querySelector("button");if(!a||!d||!g){console.error(`Не удалось создать элементы автокомплита для ${t}`,{input:!!a,list:!!d,toggleButton:!!g});return}console.log(`Созданы элементы автокомплита для ${t}`);let h=-1;function c(u){console.log(`Обновление списка подсказок для ${t}:`,u.length),d.innerHTML="",h=-1,u.forEach((s,m)=>{const w=document.createElement("li");w.textContent=s,w.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",w.addEventListener("click",()=>{a.value=s,d.classList.add("hidden"),console.log(`Выбран город "${s}" в поле ${t}`)}),d.appendChild(w)}),d.classList.remove("hidden")}function f(){console.log(`Показываем все города для ${t}:`,e.length),d.innerHTML="",h=-1,e.forEach((u,s)=>{const m=document.createElement("li");m.textContent=u,m.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",m.addEventListener("click",()=>{a.value=u,d.classList.add("hidden"),console.log(`Выбран город "${u}" в поле ${t} из полного списка`)}),d.appendChild(m)}),d.classList.remove("hidden")}g.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),d.classList.contains("hidden")?(f(),console.log(`Открыт полный список городов для ${t}`)):(d.classList.add("hidden"),console.log(`Закрыт список городов для ${t}`))}),a.addEventListener("input",()=>{const u=a.value.toLowerCase();if(!u){d.classList.add("hidden");return}const s=e.filter(m=>m.toLowerCase().startsWith(u));if(s.length===0){d.classList.add("hidden"),console.log(`Не найдено совпадений для "${u}" в поле ${t}`);return}c(s),console.log(`Найдено ${s.length} совпадений для "${u}" в поле ${t}`)}),a.addEventListener("keydown",u=>{const s=d.querySelectorAll("li");if(d.classList.contains("hidden")||s.length===0){if(u.key==="ArrowDown"&&a.value.trim()===""){u.preventDefault(),f(),console.log(`Показан полный список городов по нажатию стрелки вниз в поле ${t}`);return}return}u.key==="ArrowDown"?(u.preventDefault(),h=(h+1)%s.length,p(s),console.log(`Выделен следующий элемент (${h}) в списке ${t}`)):u.key==="ArrowUp"?(u.preventDefault(),h=(h-1+s.length)%s.length,p(s),console.log(`Выделен предыдущий элемент (${h}) в списке ${t}`)):u.key==="Enter"?(u.preventDefault(),h>=0&&h<s.length&&(a.value=s[h].textContent,d.classList.add("hidden"),console.log(`Выбран город "${s[h].textContent}" через Enter в поле ${t}`))):u.key==="Escape"&&(u.preventDefault(),d.classList.add("hidden"),console.log(`Закрыт список городов через Escape для ${t}`))});function p(u){if(u.forEach((s,m)=>{s.classList.toggle("bg-blue-100",m===h)}),h>=0){const s=u[h],m=d.getBoundingClientRect(),w=s.getBoundingClientRect();w.bottom>m.bottom?s.scrollIntoView(!1):w.top<m.top&&s.scrollIntoView(!0)}}document.addEventListener("click",u=>{!d.contains(u.target)&&u.target!==a&&u.target!==g&&d.classList.add("hidden")}),a.addEventListener("focus",()=>{const u=a.value.toLowerCase();if(!u)return;const s=e.filter(m=>m.toLowerCase().startsWith(u));s.length>0&&(c(s),console.log(`Показаны совпадения при фокусе для ${t}`))}),d.style.maxHeight="200px",d.style.overflowY="auto",d.style.overscrollBehavior="contain",console.log(`Инициализация поля ${t} завершена`)}class O{constructor(e){console.log("Pagination: Создание экземпляра пагинации"),this.containerSelector=e.containerSelector,this.itemSelector=e.itemSelector,this.paginationSelector=e.paginationSelector,this.itemsPerPage=e.itemsPerPage||9,this.onPageChange=e.onPageChange||null,this.afterPageRender=e.afterPageRender||null,this.beforePageChange=e.beforePageChange||null,this.filterSelector=e.filterSelector||null,this.filterAttribute=e.filterAttribute||"data-filter",this.useDisplayNone=e.useDisplayNone||!1,this.container=document.querySelector(this.containerSelector),this.paginationContainer=document.querySelector(this.paginationSelector),console.log("Pagination: Найден контейнер:",this.container!==null),console.log("Pagination: Найден контейнер пагинации:",this.paginationContainer!==null),this.currentPage=1,this.allItems=[],this.filteredItems=[],this.totalPages=0,this.container&&this.paginationContainer?this.init():(console.error("Pagination: Не удалось найти контейнер или контейнер пагинации"),console.error(`Pagination: Контейнер "${this.containerSelector}" найден: ${this.container!==null}`),console.error(`Pagination: Контейнер пагинации "${this.paginationSelector}" найден: ${this.paginationContainer!==null}`))}init(){try{console.log("Pagination: Начало инициализации"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),console.log("Pagination: Найдено элементов:",this.allItems.length),this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),console.log("Pagination: Общее количество страниц:",this.totalPages),this.createPaginationElements(),this.showPage(1),this.filterSelector&&this.initFilter(),console.log("Pagination: Инициализация завершена успешно")}catch(e){console.error("Pagination: Ошибка при инициализации:",e)}}createPaginationElements(){try{if(console.log("Pagination: Создание элементов пагинации"),this.paginationContainer.innerHTML="",this.totalPages<=1){console.log("Pagination: Всего одна страница, пагинация не требуется");return}const e=document.createElement("nav");e.className="inline-flex items-center justify-center space-x-2",e.setAttribute("aria-label","Pagination");const t=document.createElement("button");t.className="pagination-prev pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",t.innerHTML="&lt;",t.disabled=!0,t.setAttribute("aria-label","Предыдущая страница"),t.addEventListener("click",()=>{this.currentPage>1&&this.showPage(this.currentPage-1)}),e.appendChild(t),this.updatePaginationButtons(1,this.totalPages,e,t);const o=document.createElement("button");o.className="pagination-next pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",o.innerHTML="&gt;",o.setAttribute("aria-label","Следующая страница"),this.totalPages<=1&&(o.disabled=!0),o.addEventListener("click",()=>{this.currentPage<this.totalPages&&this.showPage(this.currentPage+1)}),e.appendChild(o);const i=document.createElement("div");i.className="flex justify-center items-center w-full",i.appendChild(e),this.paginationContainer.appendChild(i),console.log("Pagination: Элементы пагинации созданы успешно")}catch(e){console.error("Pagination: Ошибка при создании элементов пагинации:",e)}}updatePaginationButtons(e,t,o,i){try{o.querySelectorAll(".pagination-number, .pagination-ellipsis").forEach(a=>a.remove());const r=o.querySelector(".pagination-next");if(t<=7)for(let a=1;a<=t;a++)this.addPageButton(a,e,o,r);else{this.addPageButton(1,e,o,r);let a,d;if(e<=4){a=2,d=5;for(let g=a;g<=d;g++)this.addPageButton(g,e,o,r);this.addEllipsis(o,r),this.addPageButton(t,e,o,r)}else if(e>=t-3){a=t-4,d=t-1,this.addEllipsis(o,r);for(let g=a;g<=d;g++)this.addPageButton(g,e,o,r);this.addPageButton(t,e,o,r)}else{this.addEllipsis(o,r);for(let g=e-1;g<=e+1;g++)this.addPageButton(g,e,o,r);this.addEllipsis(o,r),this.addPageButton(t,e,o,r)}}i&&(e===1?(i.setAttribute("disabled","disabled"),i.classList.add("opacity-50","cursor-not-allowed")):(i.removeAttribute("disabled"),i.classList.remove("opacity-50","cursor-not-allowed"))),r&&(e===t||t===0?(r.setAttribute("disabled","disabled"),r.classList.add("opacity-50","cursor-not-allowed")):(r.removeAttribute("disabled"),r.classList.remove("opacity-50","cursor-not-allowed")))}catch(l){console.error("Pagination: Ошибка при обновлении кнопок пагинации:",l)}}addPageButton(e,t,o,i){const l=document.createElement("button");e===t?l.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-blue text-white font-bold w-8 h-8":l.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white transition-colors w-8 h-8",l.textContent=e,l.addEventListener("click",()=>{const r=parseInt(l.textContent);this.showPage(r)}),o.insertBefore(l,i)}addEllipsis(e,t){const o=document.createElement("span");o.className="pagination-ellipsis flex items-center justify-center w-8 h-8 text-brand-gray",o.textContent="...",e.insertBefore(o,t)}showPage(e){try{console.log("Pagination: Показ страницы",e),this.beforePageChange&&this.beforePageChange(e),this.allItems.forEach(l=>{this.useDisplayNone?l.style.display="none":l.classList.add("hidden")});const t=(e-1)*this.itemsPerPage,o=t+this.itemsPerPage;this.filteredItems.slice(t,o).forEach(l=>{this.useDisplayNone?l.style.display="":l.classList.remove("hidden")});const i=this.paginationContainer.querySelector("nav");if(i){const l=i.querySelector(".pagination-prev");this.updatePaginationButtons(e,this.totalPages,i,l)}this.currentPage=e,this.onPageChange&&this.onPageChange(e),this.afterPageRender&&this.afterPageRender(e),console.log("Pagination: Страница",e,"показана успешно")}catch(t){console.error("Pagination: Ошибка при показе страницы:",t)}}initFilter(){try{console.log("Pagination: Инициализация фильтра");const e=document.querySelector(this.filterSelector);e?(console.log("Pagination: Фильтр найден:",this.filterSelector),e.addEventListener("change",()=>{const t=e.value;console.log("Pagination: Выбрано значение фильтра:",t),t==="all"?this.filteredItems=[...this.allItems]:this.filteredItems=this.allItems.filter(o=>{const i=o.getAttribute(this.filterAttribute);return i===t||(i==null?void 0:i.includes(t))}),console.log("Pagination: Отфильтровано элементов:",this.filteredItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)})):console.warn("Pagination: Фильтр не найден:",this.filterSelector)}catch(e){console.error("Pagination: Ошибка при инициализации фильтра:",e)}}updateItems(){try{console.log("Pagination: Обновление элементов"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),this.filteredItems=[...this.allItems],console.log("Pagination: Обновлено элементов:",this.allItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)}catch(e){console.error("Pagination: Ошибка при обновлении элементов:",e)}}applyFilter(e){try{console.log("Pagination: Программное применение фильтра:",e);const t=document.querySelector(this.filterSelector);if(t){t.value=e;const o=new Event("change");t.dispatchEvent(o)}else console.warn("Pagination: Не удалось применить фильтр - элемент не найден:",this.filterSelector)}catch(t){console.error("Pagination: Ошибка при программном применении фильтра:",t)}}resetFilter(){try{console.log("Pagination: Сброс фильтра");const e=document.querySelector(this.filterSelector);e?(e.value="all",this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1),console.log("Pagination: Фильтр сброшен успешно")):console.warn("Pagination: Не удалось сбросить фильтр - элемент не найден:",this.filterSelector)}catch(e){console.error("Pagination: Ошибка при сбросе фильтра:",e)}}}let z=null;function X(){const n=document.querySelectorAll(".office-card"),e=document.querySelector(".selected-office-card"),t=document.getElementById("close-selected-office");if(E(null),t&&e&&t.addEventListener("click",function(){e.style.display="none",E(null)}),de(),n.length>0){n.forEach(i=>{i.addEventListener("mouseenter",function(){this.classList.add("shadow-md"),this.style.transform="translateY(-2px)",this.style.transition="transform 0.2s ease, box-shadow 0.2s ease"}),i.addEventListener("mouseleave",function(){this.classList.remove("shadow-md"),this.style.transform="translateY(0)"})});const o=document.querySelector(".map-info-panel");o&&o.classList.add("hidden"),setTimeout(()=>{E(null);const i=[];n.forEach(l=>{if(l.dataset.coordinates){const r=l.dataset.coordinates.split(",").map(a=>parseFloat(a.trim()));r.length===2&&i.push(r)}}),i.length>0&&typeof ymaps<"u"&&ymaps.ready(function(){var r;((r=document.querySelector("#map"))==null?void 0:r.__yamap)&&typeof window.resetAllMarkers=="function"&&window.resetAllMarkers()})},300)}fe()}function de(){const n=document.getElementById("cityFilter");n&&n.addEventListener("change",function(){const e=this.value;e==="all"?z?z.resetFilter():document.querySelectorAll(".office-card").forEach(t=>{t.classList.remove("hidden")}):z||document.querySelectorAll(".office-card").forEach(t=>{t.dataset.city===e?t.classList.remove("hidden"):t.classList.add("hidden")}),ue(e)})}function ue(n){typeof ymaps>"u"||ymaps.ready(function(){var t;if((t=document.querySelector("#map"))!=null&&t.__yamap)if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),n==="all"){const o=[];document.querySelectorAll(".office-card").forEach(i=>{if(i.dataset.coordinates){const l=i.dataset.coordinates.split(",").map(r=>parseFloat(r.trim()));l.length===2&&o.push(l)}}),typeof window.showAllOfficesOnMap=="function"&&o.length>0&&window.showAllOfficesOnMap(o)}else{const o=[];document.querySelectorAll(`.office-card[data-city="${n}"]`).forEach(i=>{if(i.dataset.coordinates){const l=i.dataset.coordinates.split(",").map(r=>parseFloat(r.trim()));l.length===2&&o.push(l)}}),typeof window.showAllOfficesOnMap=="function"&&o.length>0&&window.showAllOfficesOnMap(o)}})}function fe(){document.querySelector(".pagination-container")&&(z=new O({containerSelector:".offices-grid",itemSelector:".office-card",paginationSelector:".pagination-container",itemsPerPage:9,filterSelector:"#cityFilter",filterAttribute:"data-city",beforePageChange:e=>{E(null)},afterPageRender:e=>{setTimeout(()=>{if(document.querySelectorAll(".office-card.ring.ring-brand-blue:not(.hidden)").length===0){const o=Array.from(document.querySelectorAll(".office-card:not(.hidden)"));o.length>0&&o[0].click()}},50)}}))}function J(){console.log("VacanciesPage: Начало инициализации");const n=document.querySelectorAll(".vacancy-toggle");console.log("VacanciesPage: Найдено кнопок для вакансий:",n.length),n.length>0?(n.forEach(e=>{e.addEventListener("click",function(){const t=this.parentElement.querySelector(".vacancy-content"),o=this.querySelector("svg");t.classList.contains("hidden")?(t.classList.remove("hidden"),o.classList.add("rotate-180")):(t.classList.add("hidden"),o.classList.remove("rotate-180"))})}),console.log("VacanciesPage: Инициализация пагинации с задержкой..."),setTimeout(()=>{ge()},100)):console.warn("VacanciesPage: Не найдены кнопки для вакансий"),console.log("VacanciesPage: Инициализация завершена")}function ge(){console.log("VacanciesPage: Проверка контейнеров для пагинации...");const n=document.querySelector(".vacancies-container"),e=document.querySelectorAll(".vacancy-item"),t=document.querySelector(".pagination-container");if(console.log("VacanciesPage: Найден контейнер для вакансий:",n!==null),console.log("VacanciesPage: Найдено элементов вакансий:",e.length),console.log("VacanciesPage: Найден контейнер для пагинации:",t!==null),n&&e.length>0&&t){if(e.length<=5){console.log("VacanciesPage: Пагинация не требуется, количество элементов не превышает лимит на странице");return}new O({containerSelector:".vacancies-container",itemSelector:".vacancy-item",paginationSelector:".pagination-container",itemsPerPage:5,filterSelector:"#cityFilter",filterAttribute:"data-location",useDisplayNone:!0}),console.log("VacanciesPage: Пагинация успешно инициализирована")}else console.error("VacanciesPage: Невозможно инициализировать пагинацию - отсутствуют необходимые элементы")}function ee(){console.log("Инициализация страницы платежей..."),W(),G();const n=document.getElementById("send-check-email"),e=document.getElementById("email-field"),t=document.getElementById("email-input");n&&e&&t&&(console.log("Инициализация функционала отображения поля email..."),n.checked&&(e.classList.remove("hidden"),t.setAttribute("required","")),n.addEventListener("change",function(){this.checked?(e.classList.remove("hidden"),t.setAttribute("required","")):(e.classList.add("hidden"),t.removeAttribute("required"))}));const o=document.getElementById("payment-form");o&&(console.log("Инициализация обработчика формы оплаты..."),o.addEventListener("submit",function(i){i.preventDefault();const l=document.getElementById("order-number").value,r=document.getElementById("send-check-email").checked;let a=null;if(!l){alert("Пожалуйста, введите номер заказа");return}if(r){if(a=document.getElementById("email-input").value,!a){alert("Пожалуйста, введите email для отправки чека");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){alert("Пожалуйста, введите корректный email");return}}console.log("Отправка платежа:"),console.log("Номер заказа:",l),console.log("Отправить чек на email:",r),r&&console.log("Email для чека:",a),alert("Платеж отправлен! Проверьте консоль для деталей.")}))}class me{constructor(){this.container=document.getElementById("modal-container"),this.overlay=this.container.querySelector(".modal-overlay"),this.modal=this.container.querySelector(".modal"),this.closeBtn=this.container.querySelector(".modal-close"),this.content=this.container.querySelector(".modal-content"),this.bindEvents()}bindEvents(){this.closeBtn.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",e=>{e.key==="Escape"&&!this.container.classList.contains("hidden")&&this.close()})}open(e){this.content.innerHTML=e,this.container.classList.remove("hidden"),requestAnimationFrame(()=>{this.overlay.classList.add("opacity-100"),this.modal.classList.add("opacity-100","scale-100"),this.modal.classList.remove("scale-95")}),document.body.style.overflow="hidden"}close(){this.overlay.classList.remove("opacity-100"),this.modal.classList.remove("opacity-100","scale-100"),this.modal.classList.add("scale-95"),setTimeout(()=>{this.container.classList.add("hidden"),this.content.innerHTML="",document.body.style.overflow=""},300)}}console.log("NewsPage: Модуль загружается...");class he{constructor(){console.log("NewsPage: Инициализация класса"),this.modal=new me,this.pagination=null,this.init()}init(){console.log("NewsPage: Начало инициализации"),this.bindNewsDetailsButtons(),this.initMonthFilter(),console.log("NewsPage: Инициализация пагинации..."),this.initPagination(),console.log("NewsPage: Инициализация завершена")}initPagination(){const e=document.querySelector(".news-grid"),t=document.querySelectorAll(".news-card"),o=document.querySelector(".pagination-container");if(console.log("NewsPage: Контейнер для новостей найден:",!!e),console.log("NewsPage: Найдено новостей:",t.length),console.log("NewsPage: Контейнер для пагинации найден:",!!o),!e||t.length===0||!o){console.error("NewsPage: Не удалось найти необходимые элементы для пагинации");return}this.pagination=new O({containerSelector:".news-grid",itemSelector:".news-card",paginationSelector:".pagination-container",itemsPerPage:5,filterSelector:".month-filter",filterAttribute:"data-month",useDisplayNone:!1}),console.log("NewsPage: Пагинация инициализирована")}bindNewsDetailsButtons(){const e=document.querySelectorAll(".news-details-btn");console.log("NewsPage: Найдено кнопок для новостей:",e.length),e.forEach((t,o)=>{console.log(`NewsPage: Добавление обработчика для кнопки ${o+1}`),t.addEventListener("click",i=>{var a,d,g,h,c;console.log('NewsPage: Клик по кнопке "Подробнее"'),i.preventDefault();const l=t.closest(".news-card");if(console.log("NewsPage: Найдена карточка новости:",l!==null),!l){console.error("NewsPage: Не удалось найти карточку новости");return}const r={title:(a=l.querySelector(".news-title"))==null?void 0:a.textContent,image:(d=l.querySelector("img"))==null?void 0:d.src,isPlaceholder:(g=l.querySelector("img"))==null?void 0:g.classList.contains("placeholder"),content:(h=l.querySelector(".news-content"))==null?void 0:h.textContent,date:(c=l.querySelector(".news-date"))==null?void 0:c.textContent};if(console.log("NewsPage: Собраны данные для модального окна:",r),!r.title||!r.content){console.error("NewsPage: Не удалось собрать все необходимые данные");return}this.openNewsModal(r)})})}openNewsModal(e){console.log("NewsPage: Открытие модального окна с контентом:",e);let t="";e.image&&!e.isPlaceholder&&(t=`
        <div class="rounded-2xl overflow-hidden">
          <img src="${e.image}" 
               alt="${e.title}" 
               class="w-full object-cover aspect-[1.85/1]">
        </div>
      `);const o=`
      <div class="space-y-6">
        <h2 class="text-h4 md:text-h3 font-bold text-brand-gray">${e.title}</h2>
        ${t}
        <div class="text-brand-gray">${e.content}</div>
        <div class="text-caption-form text-brand-gray">${e.date}</div>
      </div>
    `;this.modal.open(o)}initMonthFilter(){document.querySelector(".month-filter")?console.log("NewsPage: Найден фильтр по месяцам"):console.warn("NewsPage: Фильтр по месяцам не найден")}}const ve="";console.log("main.js: Начало загрузки");const k=ie();console.log("Определен базовый путь:",k),window.BASE_PATH=k,window.initMap=B,window.selectOfficeCard=T,window.selectOfficeCardNoFocus=E,window.updateInfoPanel=D,window.getZoomForDevice=q,window.getCenterForDevice=Z,window.getMarkerSizeForZoom=x,window.createColoredMarkerIcon=L,window.mapConfig=S,window.loadSwiper=j,window.initSwiperSlider=R,window.initMobileMenu=U,window.initTitleAnimations=_,window.initForms=Y,window.initFaqAccordion=W,window.initPaymentTabs=G,window.initHomePage=K,window.initContactsPage=X,window.initVacanciesPage=J,window.initPaymentsPage=ee,window.Pagination=O;let te=!1,H=!1;function pe(){console.log("=== Начало инициализации страницы ==="),U(),Y(),document.getElementById("map")&&(console.log("Найден контейнер карты, начинаем инициализацию..."),setTimeout(()=>{let o=[];const i=document.querySelectorAll(".office-card");let l=!1;if(i&&i.length>0&&(console.log("Найдены карточки офисов на странице:",i.length),i.forEach(r=>{if(r.dataset.coordinates){const a=r.dataset.coordinates.split(",").map(d=>parseFloat(d.trim()));if(a.length===2){const d=r.dataset.city||"",g=r.querySelector("h3 + div.text-brand-gray"),h=g?g.textContent.trim():"",c=r.querySelectorAll("div.text-brand-gray"),f=c.length>1?c[1]:null,p=c.length>2?c[2]:null,u=c.length>3?c[3]:null;o.push({city:d,address:h,type:f?f.textContent.trim():"",phone:p?p.textContent.trim():"",email:u?u.textContent.trim():"",coordinates:a})}}}),o.length>0&&(console.log("Собраны данные офисов из карточек:",o.length),B(o,k),l=!0)),!l&&window.officesData&&window.officesData.length>0&&(console.log("Использую предварительно загруженные данные офисов:",window.officesData.length),B(window.officesData,k),l=!0),!l){const r=document.querySelector(".map-info-panel .font-bold.text-2xl.text-brand-gray");if(r){console.log("Найдены данные для дефолтного офиса в DOM");const a=document.querySelector(".map-info-panel div:nth-of-type(2)"),d=document.querySelector(".map-info-panel div:nth-of-type(3)"),g=document.querySelector(".map-info-panel div:nth-of-type(4)"),h=document.querySelector(".map-info-panel div:nth-of-type(5)");let c=[56.010563,92.852572];const f=document.querySelector(".map-info-panel");if(f&&f.dataset.coordinates){const s=f.dataset.coordinates.split(",").map(m=>parseFloat(m.trim()));s.length===2&&(c=s)}const p={city:r.textContent,address:a?a.textContent:"",type:d?d.textContent:"",phone:g?g.textContent:"",email:h?h.textContent:"",coordinates:c};B([p],k)}else console.log("Данные не найдены на странице, инициализируем карту без маркеров"),B([],k)}},100));const e=window.location.pathname,t=e.split("/").pop();console.log(`Текущий путь: ${e}, определена страница: ${t||"главная (индекс)"}`),t===""||t==="index.html"?(console.log("Инициализация главной страницы..."),K()):t==="vacancies.html"?(console.log("Инициализация страницы вакансий..."),J()):t==="contacts.html"?(console.log("Инициализация страницы контактов..."),X()):t==="payments.html"?(console.log("Инициализация страницы платежей..."),ee()):t==="news.html"&&(console.log("Инициализация страницы новостей..."),new he),_(),console.log("=== Инициализация страницы завершена ===")}function oe(){if(te||H){console.log("Инициализация уже выполнена или в процессе, пропускаем повторный вызов");return}console.log("Начинаем безопасную инициализацию страницы"),H=!0;try{pe(),te=!0}catch(n){console.error("Ошибка при инициализации страницы:",n)}finally{H=!1}}se(oe),window.addEventListener("load",oe)})();
