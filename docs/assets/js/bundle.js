(function(){"use strict";function W(){const n=document.getElementsByTagName("script"),t=n[n.length-1];try{const e=t.src;if(e.includes("://")){const s=new URL(e).pathname.split("/");return s.pop(),s[s.length-1]==="js"&&s[s.length-2]==="assets"?(s.pop(),s.pop()):s[s.length-1]==="assets"&&s.pop(),s.join("/")+"/"}else{const o=e.split("/");return o.pop(),o.length>=2&&o[o.length-1]==="js"&&o[o.length-2]==="assets"?(o.pop(),o.pop()):o.length>=1&&o[o.length-1]==="assets"&&o.pop(),o.join("/")+"/"}}catch(e){return console.error("Ошибка при определении базового пути:",e),"./"}}function X(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function J(n,t){const e=document.createElement("script");e.src=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить скрипт: ${n}`))},document.head.appendChild(e)}function Q(n,t){const e=document.createElement("link");e.rel="stylesheet",e.href=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить стиль: ${n}`))},document.head.appendChild(e)}function I(){return window.innerWidth<768?"mobile":"desktop"}const z="#008DD2",M="#666666",E={initialView:{center:{desktop:[54.962902,73.38475],mobile:[53.224854,50.199879]},zoom:{desktop:4,mobile:3}},officeZoom:{desktop:15,mobile:13},maxBoundsZoom:{desktop:18,mobile:7},boundsPadding:[50,50],markerSizing:{minZoom:2,maxZoom:18,minSize:[16,18],maxSize:[36,42],minOffset:[-8,-18],maxOffset:[-18,-42]}};function x(n){const t=`
  <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M35.114 14.1578C33.014 4.91781 24.954 0.757812 17.874 0.757812C17.874 0.757812 17.874 0.757812 17.854 0.757812C10.794 0.757812 2.71397 4.89781 0.61397 14.1378C-1.72603 24.4578 4.59397 33.1978 10.314 38.6978C12.434 40.7378 15.154 41.7578 17.874 41.7578C20.594 41.7578 23.314 40.7378 25.414 38.6978C31.134 33.1978 37.454 24.4778 35.114 14.1578ZM17.874 24.1778C14.394 24.1778 11.574 21.3578 11.574 17.8778C11.574 14.3978 14.394 11.5778 17.874 11.5778C21.354 11.5778 24.174 14.3978 24.174 17.8778C24.174 21.3578 21.354 24.1778 17.874 24.1778Z" fill="${n}" />
  </svg>`;return`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(t)}`}function B(n){const t=I();return n[t]}function T(n){const t=I();return n[t]}function q(n){const{minZoom:t,maxZoom:e,minSize:o,maxSize:s,minOffset:r,maxOffset:a}=E.markerSizing;if(n<=t)return{size:o,offset:r};if(n>=e)return{size:s,offset:a};const m=(n-t)/(e-t),g=Math.round(o[0]+(s[0]-o[0])*m),h=Math.round(o[1]+(s[1]-o[1])*m),f=h/s[1],d=Math.round(r[0]+(a[0]-r[0])*f),i=Math.round(r[1]+(a[1]-r[1])*f);return{size:[g,h],offset:[d,i]}}function F(n){const t=document.querySelector(".map-info-panel");if(!t)return;let e=n.address||"";n.city&&e.trim().startsWith(n.city+",")&&(e=e.replace(n.city+",","").trim()),t.innerHTML=`
    <div class="flex justify-between items-center mb-2">
      <div class="font-bold text-2xl text-brand-gray">${n.city||""}</div>
      <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="text-brand-gray">${e}</div>
    <div class="hidden lg:block text-brand-gray">${n.type||""}</div>
    ${n.phone?`<div class="hidden lg:block text-brand-gray">${n.phone}</div>`:""}
    ${n.email?`<div class="hidden lg:block text-brand-gray">${n.email}</div>`:""}
    <button class="bg-brand-blue mt-2 md:mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
  `,t.classList.remove("hidden");const o=t.querySelector(".close-info-panel");o&&o.addEventListener("click",function(){t.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),L(null)})}function L(n,t=null,e=null,o=null){if(document.querySelectorAll(".office-card").forEach(s=>{s.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&F(t),e&&o&&(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),e.options)){const s=o.getZoom(),r=q(s),a=x(z);e.options.set({iconImageHref:a,iconImageSize:r.size,iconImageOffset:r.offset})}}function P(n,t=null,e=null,o=null,s=null){if(document.querySelectorAll(".office-card").forEach(r=>{r.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&F(t),e&&o){if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),e.options){const r=o.getZoom(),a=q(r),m=x(z);e.options.set({iconImageHref:m,iconImageSize:a.size,iconImageOffset:a.offset})}if(s){const r=B(E.officeZoom);o.setCenter(s,r,{duration:300})}}}function C(n,t){try{ymaps.ready(function(){const e=B(E.initialView.zoom),o=T(E.initialView.center),s=new ymaps.Map("map",{center:o,zoom:e,controls:["zoomControl","fullscreenControl"],behaviors:["drag","multiTouch"]}),r=new ymaps.GeoObjectCollection,a={},m=q(e),g={iconLayout:"default#image",iconImageHref:x(M),iconImageSize:m.size,iconImageOffset:m.offset};function h(i){const c=q(i);Object.values(a).forEach(l=>{const u=l.options.get("iconImageHref").includes(encodeURIComponent(z));l.options.set({iconImageSize:c.size,iconImageOffset:c.offset})})}window.resetAllMarkers=function(){const i=s.getZoom(),c=q(i);Object.values(a).forEach(l=>{const u=x(M);l.options.set({iconImageHref:u,iconImageSize:c.size,iconImageOffset:c.offset})})},n.forEach((i,c)=>{if(!i.coordinates||i.coordinates.length!==2)return;const l=x(M),u=new ymaps.Placemark(i.coordinates,{hintContent:i.city},{iconLayout:"default#image",iconImageHref:l,iconImageSize:m.size,iconImageOffset:m.offset});a[c]=u,r.add(u),u.events.add("click",()=>{P(null,i,u,s,u.geometry.getCoordinates())})}),s.geoObjects.add(r),s.events.add("boundschange",function(i){i.get("oldZoom")!==i.get("newZoom")&&h(i.get("newZoom"))}),r.getLength()>0&&(console.log(`${I()}: используем заданный масштаб и центр`,e),s.setCenter(o,e));const f=document.querySelector(".map-info-panel");fetch(`${t}assets/data/default-office.json`).then(i=>i.json()).then(i=>{if(!n.some(u=>u.city===i.city&&u.address===i.address)&&i.coordinates){n.push(i);const u=n.length-1,p=s.getZoom(),y=q(p),w=x(M),b=new ymaps.Placemark(i.coordinates,{hintContent:i.city},{iconLayout:"default#image",iconImageHref:w,iconImageSize:y.size,iconImageOffset:y.offset});b.events.add("click",()=>{P(null,i,b,s,i.coordinates)}),a[u]=b,r.add(b),s.geoObjects.add(b)}const l=n.findIndex(u=>u.city===i.city&&u.address===i.address);if(l!==-1){const u=a[l];if(u){const p=document.querySelectorAll(".office-card");let y=null;p.forEach(w=>{const b=w.dataset.city,v=w.querySelector("h3 + div.text-brand-gray"),S=v?v.textContent.trim():"";b===i.city&&S.includes(i.address)&&(y=w)}),L(y,n[l],u,s)}}}).catch(i=>{console.error("Ошибка при загрузке дефолтного офиса:",i)}),document.querySelectorAll(".office-card").forEach((i,c)=>{i.addEventListener("click",function(){const l=this.dataset.index?parseInt(this.dataset.index,10):c,u=a[l];u&&P(this,n[l],u,s,u.geometry.getCoordinates())})}),document.querySelectorAll(".close-info-panel").forEach(i=>{i.addEventListener("click",function(){const c=this.closest(".map-info-panel");c&&(c.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),L(null))})}),window.addEventListener("resize",()=>{const i=s.getCenter();setTimeout(()=>{s.container.fitToViewport();const c=I(),l=B(E.initialView.zoom),u=T(E.initialView.center);s.setCenter(u,l,{duration:0})},200)})})}catch(e){console.error("Ошибка при инициализации карты:",e)}}function $(){if(typeof Swiper>"u"){console.error("Swiper не загружен!");return}if(new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,speed:800,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e4,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){console.log("Swiper инициализирован")}}}),document.querySelector(".news-swiper-container")){console.log("Инициализация Swiper для новостей с уже существующими слайдами...");const n=document.querySelector(".news-swiper-container .swiper-wrapper"),t=n?n.querySelectorAll(".swiper-slide"):[];console.log(`Найдено ${t.length} существующих слайдов новостей от шаблонизатора`),new Swiper(".news-swiper-container",{slidesPerView:1,spaceBetween:30,loop:t.length>1,speed:1100,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".news-swiper-pagination",clickable:!0},navigation:{nextEl:".news-swiper-button-next",prevEl:".news-swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:30}},on:{init:function(){console.log("Swiper новостей инициализирован")}}})}}function O(){return new Promise((n,t)=>{try{Q("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css",e=>{if(e){console.error("Не удалось загрузить стили Swiper:",e),t(e);return}J("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",o=>{if(o){console.error("Не удалось загрузить библиотеку Swiper:",o),t(o);return}console.log("Swiper успешно загружен"),typeof Swiper<"u"?(console.log("Инициализация Swiper..."),setTimeout(()=>{$(),n()},100)):t(new Error("Swiper не определен после загрузки"))})})}catch(e){console.error("Ошибка при загрузке Swiper:",e),t(e)}})}function Z(){const n=document.getElementById("burger-menu-btn"),t=document.getElementById("mobile-close-btn"),e=document.getElementById("mobile-menu"),o=document.querySelectorAll(".burger-line");if(!e)return;const s=()=>{e.classList.remove("translate-x-full"),e.classList.add("translate-x-0"),o[0].classList.add("rotate-45","translate-y-2"),o[1].classList.add("opacity-0"),o[2].classList.add("-rotate-45","-translate-y-2"),document.body.classList.add("overflow-hidden")},r=()=>{e.classList.remove("translate-x-0"),e.classList.add("translate-x-full"),o[0].classList.remove("rotate-45","translate-y-2"),o[1].classList.remove("opacity-0"),o[2].classList.remove("-rotate-45","-translate-y-2"),document.body.classList.remove("overflow-hidden")};n&&n.addEventListener("click",s),t&&t.addEventListener("click",r)}function j(){const n=document.querySelectorAll(".animated-title"),t=document.querySelectorAll(".animated-subtitle");n.length===0&&t.length===0||setTimeout(()=>{n.forEach(e=>{e.classList.add("show")}),setTimeout(()=>{t.forEach(e=>{e.classList.add("show")})},300)},200)}function H(){const n=document.querySelectorAll(".faq-toggle");n.length>0&&n.forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement.querySelector(".faq-content"),o=this.querySelector("svg");e.classList.contains("hidden")?(e.classList.remove("hidden"),o.classList.add("rotate-180")):(e.classList.add("hidden"),o.classList.remove("rotate-180"))})})}function R(){const n=document.querySelector("form");n&&n.addEventListener("submit",t=>{t.preventDefault(),alert("Форма отправлена!")})}function V(){console.log("Инициализация табов на странице платежей...");const n=document.querySelectorAll(".payment-tab"),t=document.querySelectorAll(".payment-tab-content");n.length>0&&n.forEach(s=>{s.addEventListener("click",function(){const a=`tab-${this.getAttribute("data-tab")}`;n.forEach(m=>{m.classList.remove("bg-white"),m.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),t.forEach(m=>{m.classList.add("hidden")}),document.getElementById(a).classList.remove("hidden")})});const e=document.querySelectorAll(".delivery-tab"),o=document.querySelectorAll(".delivery-tab-content");e.length>0&&e.forEach(s=>{s.addEventListener("click",function(){const a=`tab-${this.getAttribute("data-tab")}`;e.forEach(m=>{m.classList.remove("bg-white"),m.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),o.forEach(m=>{m.classList.add("hidden")}),document.getElementById(a).classList.remove("hidden")})})}function D(){console.log("Инициализация главной страницы начата"),document.querySelector(".swiper-container")||document.querySelector(".news-swiper-container")?(console.log("Обнаружен контейнер Swiper, начинаю загрузку..."),O().catch(d=>{console.error("Не удалось загрузить Swiper:",d)})):console.log("Контейнеры Swiper не обнаружены на странице"),console.log("Используем новости, уже загруженные через шаблонизатор");const n=document.querySelector(".news-carousel"),t=document.querySelector(".news-carousel button.absolute.left-0"),e=document.querySelector(".news-carousel button.absolute.right-0");if(n&&t&&e){const d=n.querySelectorAll(".bg-brand-light");let i=0;const c=l=>{d.forEach(u=>{u.style.display="none"}),d[l].style.display="block"};t.addEventListener("click",()=>{i=(i-1+d.length)%d.length,c(i)}),e.addEventListener("click",()=>{i=(i+1)%d.length,c(i)}),c(i)}const o=document.querySelectorAll(".carousel-slide"),s=document.querySelector(".carousel-container .absolute.left-4"),r=document.querySelector(".carousel-container .absolute.right-4");if(o.length>0&&s&&r){let d=0;const i=c=>{o.forEach(l=>{l.classList.remove("active"),l.style.display="none"}),o[c].classList.add("active"),o[c].style.display="block"};s.addEventListener("click",()=>{d=(d-1+o.length)%o.length,i(d)}),r.addEventListener("click",()=>{d=(d+1)%o.length,i(d)}),i(d),setInterval(()=>{d=(d+1)%o.length,i(d)},5e3)}const a=document.querySelector(".track-form");a&&a.addEventListener("submit",function(d){d.preventDefault();const i=this.querySelector('input[type="text"]').value;i.trim()!==""?alert(`Отслеживание заказа: ${i}`):alert("Пожалуйста, введите номер заказа")});const m=document.querySelector(".price-form");m&&m.addEventListener("submit",function(d){d.preventDefault();const i=this.querySelector("select:nth-of-type(1)").value,c=this.querySelector("select:nth-of-type(2)").value;alert(i&&c?`Расчет стоимости доставки: ${i} -> ${c}`:"Пожалуйста, выберите город отправления и прибытия")});const g=document.querySelectorAll(".mt-4 .cursor-pointer");g.length>0&&g.forEach(d=>{d.addEventListener("click",function(){const i=document.querySelector("select:nth-of-type(1)"),c=this.textContent.trim();Array.from(i.options).forEach(l=>{l.text===c&&(i.value=l.value)})})});const h=document.querySelector(".relative.bg-brand-light button");h&&h.addEventListener("click",function(){alert("Форма для отправки заявки будет открыта")});const f=document.querySelector("form.space-y-4");f&&f.addEventListener("submit",function(d){d.preventDefault();const i=this.querySelector('input[type="text"]').value,c=this.querySelector('input[type="tel"]').value,l=this.querySelector('input[type="checkbox"]').checked;i&&c&&l?(alert(`Спасибо за заявку, ${i}! Мы свяжемся с вами по номеру ${c}`),this.reset()):alert("Пожалуйста, заполните все поля и дайте согласие на обработку данных")}),console.log("Инициализация главной страницы завершена")}function U(){const n=document.querySelectorAll(".office-card"),t=document.querySelector(".selected-office-card"),e=document.getElementById("close-selected-office");if(L(null),e&&t&&e.addEventListener("click",function(){t.style.display="none",L(null)}),n.length>0){n.forEach(g=>{g.addEventListener("mouseenter",function(){this.classList.add("shadow-md"),this.style.transform="translateY(-2px)",this.style.transition="transform 0.2s ease, box-shadow 0.2s ease"}),g.addEventListener("mouseleave",function(){this.classList.remove("shadow-md"),this.style.transform="translateY(0)"})});const m=document.querySelector(".map-info-panel");m&&m.classList.add("hidden"),setTimeout(()=>{L(null);const g=[];n.forEach(h=>{if(h.dataset.coordinates){const f=h.dataset.coordinates.split(",").map(d=>parseFloat(d.trim()));f.length===2&&g.push(f)}}),g.length>0&&typeof ymaps<"u"&&ymaps.ready(function(){var f;((f=document.querySelector("#map"))==null?void 0:f.__yamap)&&typeof window.resetAllMarkers=="function"&&window.resetAllMarkers()})},300)}document.querySelectorAll(".pagination-button");const o=document.querySelector(".offices-grid"),s=9;let r=1,a=[];if(o){let h=function(c,l){const u=document.querySelector(".pagination-container nav");if(!u)return;const p=u.querySelector("button:first-child"),y=u.querySelector("button:last-child");for(;u.children.length>2;)u.removeChild(u.children[1]);p&&(c===1?(p.setAttribute("disabled","disabled"),p.classList.add("opacity-50","cursor-not-allowed")):(p.removeAttribute("disabled"),p.classList.remove("opacity-50","cursor-not-allowed"))),y&&(c===l?(y.setAttribute("disabled","disabled"),y.classList.add("opacity-50","cursor-not-allowed")):(y.removeAttribute("disabled"),y.classList.remove("opacity-50","cursor-not-allowed")));let w=[];if(l<=5)for(let v=1;v<=l;v++)w.push(v);else w.push(1),c<=3?w.push(2,3,4):c>=l-2?w.push(l-3,l-2,l-1):w.push(c-1,c,c+1),w.push(l);w=[...new Set(w)].sort((v,S)=>v-S);let b=0;for(const v of w){if(v-b>1){const A=document.createElement("span");A.className="w-8 h-8 flex items-center justify-center",A.textContent="...",u.insertBefore(A,y)}const S=document.createElement("button");v===c?S.className="pagination-number pagination-button w-8 h-8 flex items-center justify-center rounded bg-brand-blue text-white font-bold":S.className="pagination-number pagination-button w-8 h-8 flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white transition-colors",S.textContent=v,S.addEventListener("click",function(){const A=parseInt(this.textContent);f(A)}),u.insertBefore(S,y),b=v}},f=function(c){L(null),a.forEach(p=>{p.classList.add("hidden")});const l=(c-1)*s,u=l+s;a.slice(l,u).forEach(p=>{p.classList.remove("hidden")}),h(c,g),r=c,setTimeout(()=>{if(document.querySelectorAll(".office-card.ring.ring-brand-blue:not(.hidden)").length===0){const y=Array.from(document.querySelectorAll(".office-card:not(.hidden)"));y.length>0&&y[0].click()}},50)};a=Array.from(document.querySelectorAll(".office-card"));const m=document.querySelector(".pagination-number.bg-brand-blue");m&&(r=parseInt(m.textContent));const g=Math.ceil(a.length/s),d=document.querySelector(".pagination-container");if(d){const c=d.querySelectorAll("button");if(c.length>0){c[0].classList.add("pagination-prev","pagination-button"),c[c.length-1].classList.add("pagination-next","pagination-button");for(let l=1;l<c.length-1;l++)c[l].textContent!=="..."&&c[l].classList.add("pagination-number","pagination-button");document.querySelectorAll(".pagination-button").forEach(l=>{l.addEventListener("click",function(){if(this.classList.contains("pagination-prev"))r>1&&f(r-1);else if(this.classList.contains("pagination-next"))r<g&&f(r+1);else if(this.classList.contains("pagination-number")){const u=parseInt(this.textContent);f(u)}})}),h(r,g),f(r)}}const i=document.getElementById("cityFilter");i&&i.addEventListener("change",function(){const c=this.value;c==="all"?a=Array.from(document.querySelectorAll(".office-card")):a=Array.from(document.querySelectorAll(".office-card")).filter(l=>l.getAttribute("data-city")===c),Math.ceil(a.length/s),document.querySelectorAll(".office-card").forEach(l=>{l.classList.remove("ring","ring-brand-blue")}),f(1)})}}function _(){const n=document.querySelectorAll(".vacancy-toggle");if(n.length>0){n.forEach(e=>{e.addEventListener("click",function(){const o=this.parentElement.querySelector(".vacancy-content"),s=this.querySelector("svg");o.classList.contains("hidden")?(o.classList.remove("hidden"),s.classList.add("rotate-180")):(o.classList.add("hidden"),s.classList.remove("rotate-180"))})});const t=document.getElementById("cityFilter");t&&t.addEventListener("change",function(){const e=this.value;document.querySelectorAll(".vacancy-item").forEach(s=>{const r=s.getAttribute("data-location");e==="all"||r.includes(e)?s.style.display="":s.style.display="none"})})}}function Y(){console.log("Инициализация страницы платежей..."),H(),V();const n=document.getElementById("send-check-email"),t=document.getElementById("email-field"),e=document.getElementById("email-input");n&&t&&e&&(console.log("Инициализация функционала отображения поля email..."),n.checked&&(t.classList.remove("hidden"),e.setAttribute("required","")),n.addEventListener("change",function(){this.checked?(t.classList.remove("hidden"),e.setAttribute("required","")):(t.classList.add("hidden"),e.removeAttribute("required"))}));const o=document.getElementById("payment-form");o&&(console.log("Инициализация обработчика формы оплаты..."),o.addEventListener("submit",function(s){s.preventDefault();const r=document.getElementById("order-number").value,a=document.getElementById("send-check-email").checked;let m=null;if(!r){alert("Пожалуйста, введите номер заказа");return}if(a){if(m=document.getElementById("email-input").value,!m){alert("Пожалуйста, введите email для отправки чека");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){alert("Пожалуйста, введите корректный email");return}}console.log("Отправка платежа:"),console.log("Номер заказа:",r),console.log("Отправить чек на email:",a),a&&console.log("Email для чека:",m),alert("Платеж отправлен! Проверьте консоль для деталей.")}))}class ee{constructor(){this.container=document.getElementById("modal-container"),this.overlay=this.container.querySelector(".modal-overlay"),this.modal=this.container.querySelector(".modal"),this.closeBtn=this.container.querySelector(".modal-close"),this.content=this.container.querySelector(".modal-content"),this.bindEvents()}bindEvents(){this.closeBtn.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",t=>{t.key==="Escape"&&!this.container.classList.contains("hidden")&&this.close()})}open(t){this.content.innerHTML=t,this.container.classList.remove("hidden"),requestAnimationFrame(()=>{this.overlay.classList.add("opacity-100"),this.modal.classList.add("opacity-100","scale-100"),this.modal.classList.remove("scale-95")}),document.body.style.overflow="hidden"}close(){this.overlay.classList.remove("opacity-100"),this.modal.classList.remove("opacity-100","scale-100"),this.modal.classList.add("scale-95"),setTimeout(()=>{this.container.classList.add("hidden"),this.content.innerHTML="",document.body.style.overflow=""},300)}}console.log("NewsPage: Модуль загружается...");class te{constructor(){console.log("NewsPage: Инициализация класса"),this.modal=new ee,this.init()}init(){console.log("NewsPage: Начало инициализации"),this.bindNewsDetailsButtons(),this.initMonthFilter(),console.log("NewsPage: Инициализация завершена")}bindNewsDetailsButtons(){const t=document.querySelectorAll(".news-details-btn");console.log("NewsPage: Найдено кнопок для новостей:",t.length),t.forEach((e,o)=>{console.log(`NewsPage: Добавление обработчика для кнопки ${o+1}`),e.addEventListener("click",s=>{var m,g,h,f,d;console.log('NewsPage: Клик по кнопке "Подробнее"'),s.preventDefault();const r=e.closest(".news-card");if(console.log("NewsPage: Найдена карточка новости:",r!==null),!r){console.error("NewsPage: Не удалось найти карточку новости");return}const a={title:(m=r.querySelector(".news-title"))==null?void 0:m.textContent,image:(g=r.querySelector("img"))==null?void 0:g.src,isPlaceholder:(h=r.querySelector("img"))==null?void 0:h.classList.contains("placeholder"),content:(f=r.querySelector(".news-content"))==null?void 0:f.textContent,date:(d=r.querySelector(".news-date"))==null?void 0:d.textContent};if(console.log("NewsPage: Собраны данные для модального окна:",a),!a.title||!a.content){console.error("NewsPage: Не удалось собрать все необходимые данные");return}this.openNewsModal(a)})})}openNewsModal(t){console.log("NewsPage: Открытие модального окна с контентом:",t);let e="";t.image&&!t.isPlaceholder&&(e=`
        <div class="rounded-2xl overflow-hidden">
          <img src="${t.image}" 
               alt="${t.title}" 
               class="w-full object-cover aspect-[1.85/1]">
        </div>
      `);const o=`
      <div class="space-y-6">
        <h2 class="text-h4 md:text-h3 font-bold text-brand-gray">${t.title}</h2>
        ${e}
        <div class="text-brand-gray">${t.content}</div>
        <div class="text-caption-form text-brand-gray">${t.date}</div>
      </div>
    `;this.modal.open(o)}initMonthFilter(){const t=document.querySelector(".month-filter");t?(console.log("NewsPage: Найден фильтр по месяцам"),t.addEventListener("change",e=>{const o=e.target.value;console.log("NewsPage: Выбран месяц:",o)})):console.warn("NewsPage: Фильтр по месяцам не найден")}}const oe="";console.log("main.js: Начало загрузки");const k=W();console.log("Определен базовый путь:",k),window.BASE_PATH=k,window.initMap=C,window.selectOfficeCard=P,window.selectOfficeCardNoFocus=L,window.updateInfoPanel=F,window.getZoomForDevice=B,window.getCenterForDevice=T,window.getMarkerSizeForZoom=q,window.createColoredMarkerIcon=x,window.mapConfig=E,window.loadSwiper=O,window.initSwiperSlider=$,window.initMobileMenu=Z,window.initTitleAnimations=j,window.initForms=R,window.initFaqAccordion=H,window.initPaymentTabs=V,window.initHomePage=D,window.initContactsPage=U,window.initVacanciesPage=_,window.initPaymentsPage=Y;let G=!1,N=!1;function ne(){console.log("=== Начало инициализации страницы ==="),Z(),R(),document.getElementById("map")&&(console.log("Найден контейнер карты, начинаем инициализацию..."),setTimeout(()=>{let o=[];const s=document.querySelectorAll(".office-card");let r=!1;if(s&&s.length>0&&(console.log("Найдены карточки офисов на странице:",s.length),s.forEach(a=>{if(a.dataset.coordinates){const m=a.dataset.coordinates.split(",").map(g=>parseFloat(g.trim()));if(m.length===2){const g=a.dataset.city||"",h=a.querySelector("h3 + div.text-brand-gray"),f=h?h.textContent.trim():"",d=a.querySelectorAll("div.text-brand-gray"),i=d.length>1?d[1]:null,c=d.length>2?d[2]:null,l=d.length>3?d[3]:null;o.push({city:g,address:f,type:i?i.textContent.trim():"",phone:c?c.textContent.trim():"",email:l?l.textContent.trim():"",coordinates:m})}}}),o.length>0&&(console.log("Собраны данные офисов из карточек:",o.length),C(o,k),r=!0)),!r&&window.officesData&&window.officesData.length>0&&(console.log("Использую предварительно загруженные данные офисов:",window.officesData.length),C(window.officesData,k),r=!0),!r){const a=document.querySelector(".map-info-panel .font-bold.text-2xl.text-brand-gray");if(a){console.log("Найдены данные для дефолтного офиса в DOM");const m=document.querySelector(".map-info-panel div:nth-of-type(2)"),g=document.querySelector(".map-info-panel div:nth-of-type(3)"),h=document.querySelector(".map-info-panel div:nth-of-type(4)"),f=document.querySelector(".map-info-panel div:nth-of-type(5)");let d=[56.010563,92.852572];const i=document.querySelector(".map-info-panel");if(i&&i.dataset.coordinates){const u=i.dataset.coordinates.split(",").map(p=>parseFloat(p.trim()));u.length===2&&(d=u)}const c={city:a.textContent,address:m?m.textContent:"",type:g?g.textContent:"",phone:h?h.textContent:"",email:f?f.textContent:"",coordinates:d};C([c],k)}else console.log("Данные не найдены на странице, инициализируем карту без маркеров"),C([],k)}},100));const t=window.location.pathname,e=t.split("/").pop();console.log(`Текущий путь: ${t}, определена страница: ${e||"главная (индекс)"}`),e===""||e==="index.html"?(console.log("Инициализация главной страницы..."),D()):e==="vacancies.html"?(console.log("Инициализация страницы вакансий..."),_()):e==="contacts.html"?(console.log("Инициализация страницы контактов..."),U()):e==="payments.html"?(console.log("Инициализация страницы платежей..."),Y()):e==="news.html"&&(console.log("Инициализация страницы новостей..."),new te),j(),console.log("=== Инициализация страницы завершена ===")}function K(){if(G||N){console.log("Инициализация уже выполнена или в процессе, пропускаем повторный вызов");return}console.log("Начинаем безопасную инициализацию страницы"),N=!0;try{ne(),G=!0}catch(n){console.error("Ошибка при инициализации страницы:",n)}finally{N=!1}}X(K),window.addEventListener("load",K)})();
