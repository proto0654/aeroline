(function(){"use strict";function Q(){const n=document.getElementsByTagName("script"),t=n[n.length-1];try{const e=t.src;if(e.includes("://")){const r=new URL(e).pathname.split("/");return r.pop(),r[r.length-1]==="js"&&r[r.length-2]==="assets"?(r.pop(),r.pop()):r[r.length-1]==="assets"&&r.pop(),r.join("/")+"/"}else{const i=e.split("/");return i.pop(),i.length>=2&&i[i.length-1]==="js"&&i[i.length-2]==="assets"?(i.pop(),i.pop()):i.length>=1&&i[i.length-1]==="assets"&&i.pop(),i.join("/")+"/"}}catch(e){return console.error("Ошибка при определении базового пути:",e),"./"}}function X(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function J(n,t){const e=document.createElement("script");e.src=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить скрипт: ${n}`))},document.head.appendChild(e)}function ee(n,t){const e=document.createElement("link");e.rel="stylesheet",e.href=n,e.onload=()=>{t&&t(null)},e.onerror=()=>{t&&t(new Error(`Не удалось загрузить стиль: ${n}`))},document.head.appendChild(e)}function I(){return window.innerWidth<768?"mobile":"desktop"}const P="#008DD2",$="#666666",E={initialView:{center:{desktop:[54.962902,73.38475],mobile:[53.224854,50.199879]},zoom:{desktop:4,mobile:3}},officeZoom:{desktop:15,mobile:13},maxBoundsZoom:{desktop:18,mobile:7},boundsPadding:[50,50],markerSizing:{minZoom:2,maxZoom:18,minSize:[16,18],maxSize:[36,42],minOffset:[-8,-18],maxOffset:[-18,-42]}};function x(n){const t=`
  <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M35.114 14.1578C33.014 4.91781 24.954 0.757812 17.874 0.757812C17.874 0.757812 17.874 0.757812 17.854 0.757812C10.794 0.757812 2.71397 4.89781 0.61397 14.1378C-1.72603 24.4578 4.59397 33.1978 10.314 38.6978C12.434 40.7378 15.154 41.7578 17.874 41.7578C20.594 41.7578 23.314 40.7378 25.414 38.6978C31.134 33.1978 37.454 24.4778 35.114 14.1578ZM17.874 24.1778C14.394 24.1778 11.574 21.3578 11.574 17.8778C11.574 14.3978 14.394 11.5778 17.874 11.5778C21.354 11.5778 24.174 14.3978 24.174 17.8778C24.174 21.3578 21.354 24.1778 17.874 24.1778Z" fill="${n}" />
  </svg>`;return`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(t)}`}function M(n){const t=I();return n[t]}function F(n){const t=I();return n[t]}function q(n){const{minZoom:t,maxZoom:e,minSize:i,maxSize:r,minOffset:d,maxOffset:g}=E.markerSizing;if(n<=t)return{size:i,offset:d};if(n>=e)return{size:r,offset:g};const f=(n-t)/(e-t),a=Math.round(i[0]+(r[0]-i[0])*f),p=Math.round(i[1]+(r[1]-i[1])*f),m=p/r[1],u=Math.round(d[0]+(g[0]-d[0])*m),l=Math.round(d[1]+(g[1]-d[1])*m);return{size:[a,p],offset:[u,l]}}function T(n){const t=document.querySelector(".map-info-panel");if(!t)return;let e=n.address||"";n.city&&e.trim().startsWith(n.city+",")&&(e=e.replace(n.city+",","").trim()),t.innerHTML=`
    <div class="flex justify-between items-center mb-2">
      <div class="font-bold text-2xl text-brand-gray">${n.city||""}</div>
      <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="text-brand-gray">${e}</div>
    <div class="hidden lg:block text-brand-gray">${n.type||""}</div>
    ${n.phone?`<div class="hidden lg:block text-brand-gray">${n.phone}</div>`:""}
    ${n.email?`<div class="hidden lg:block text-brand-gray">${n.email}</div>`:""}
    <button class="bg-brand-blue mt-2 md:mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
  `,t.classList.remove("hidden");const i=t.querySelector(".close-info-panel");i&&i.addEventListener("click",function(){t.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),L(null)})}function L(n,t=null,e=null,i=null){if(document.querySelectorAll(".office-card").forEach(r=>{r.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&T(t),e&&i&&(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),e.options)){const r=i.getZoom(),d=q(r),g=x(P);e.options.set({iconImageHref:g,iconImageSize:d.size,iconImageOffset:d.offset})}}function B(n,t=null,e=null,i=null,r=null){if(document.querySelectorAll(".office-card").forEach(d=>{d.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),t&&T(t),e&&i){if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),e.options){const d=i.getZoom(),g=q(d),f=x(P);e.options.set({iconImageHref:f,iconImageSize:g.size,iconImageOffset:g.offset})}if(r){const d=M(E.officeZoom);i.setCenter(r,d,{duration:300})}}}function k(n,t){try{ymaps.ready(function(){const e=M(E.initialView.zoom),i=F(E.initialView.center),r=new ymaps.Map("map",{center:i,zoom:e,controls:["zoomControl","fullscreenControl"],behaviors:["drag","multiTouch"]}),d=new ymaps.GeoObjectCollection,g={},f=q(e),a={iconLayout:"default#image",iconImageHref:x($),iconImageSize:f.size,iconImageOffset:f.offset};function p(l){const c=q(l);Object.values(g).forEach(o=>{const s=o.options.get("iconImageHref").includes(encodeURIComponent(P));o.options.set({iconImageSize:c.size,iconImageOffset:c.offset})})}window.resetAllMarkers=function(){const l=r.getZoom(),c=q(l);Object.values(g).forEach(o=>{const s=x($);o.options.set({iconImageHref:s,iconImageSize:c.size,iconImageOffset:c.offset})})},n.forEach((l,c)=>{if(!l.coordinates||l.coordinates.length!==2)return;const o=x($),s=new ymaps.Placemark(l.coordinates,{hintContent:l.city},{iconLayout:"default#image",iconImageHref:o,iconImageSize:f.size,iconImageOffset:f.offset});g[c]=s,d.add(s),s.events.add("click",()=>{B(null,l,s,r,s.geometry.getCoordinates())})}),r.geoObjects.add(d),r.events.add("boundschange",function(l){l.get("oldZoom")!==l.get("newZoom")&&p(l.get("newZoom"))}),d.getLength()>0&&(console.log(`${I()}: используем заданный масштаб и центр`,e),r.setCenter(i,e));const m=document.querySelector(".map-info-panel");fetch(`${t}assets/data/default-office.json`).then(l=>l.json()).then(l=>{if(!n.some(s=>s.city===l.city&&s.address===l.address)&&l.coordinates){n.push(l);const s=n.length-1,h=r.getZoom(),y=q(h),w=x($),b=new ymaps.Placemark(l.coordinates,{hintContent:l.city},{iconLayout:"default#image",iconImageHref:w,iconImageSize:y.size,iconImageOffset:y.offset});b.events.add("click",()=>{B(null,l,b,r,l.coordinates)}),g[s]=b,d.add(b),r.geoObjects.add(b)}const o=n.findIndex(s=>s.city===l.city&&s.address===l.address);if(o!==-1){const s=g[o];if(s){const h=document.querySelectorAll(".office-card");let y=null;h.forEach(w=>{const b=w.dataset.city,v=w.querySelector("h3 + div.text-brand-gray"),S=v?v.textContent.trim():"";b===l.city&&S.includes(l.address)&&(y=w)}),L(y,n[o],s,r)}}}).catch(l=>{console.error("Ошибка при загрузке дефолтного офиса:",l)}),document.querySelectorAll(".office-card").forEach((l,c)=>{l.addEventListener("click",function(){const o=this.dataset.index?parseInt(this.dataset.index,10):c,s=g[o];s&&B(this,n[o],s,r,s.geometry.getCoordinates())})}),document.querySelectorAll(".close-info-panel").forEach(l=>{l.addEventListener("click",function(){const c=this.closest(".map-info-panel");c&&(c.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),L(null))})}),window.addEventListener("resize",()=>{const l=r.getCenter();setTimeout(()=>{r.container.fitToViewport();const c=I(),o=M(E.initialView.zoom),s=F(E.initialView.center);r.setCenter(s,o,{duration:0})},200)})})}catch(e){console.error("Ошибка при инициализации карты:",e)}}function N(){if(typeof Swiper>"u"){console.error("Swiper не загружен!");return}if(new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,speed:800,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e4,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){console.log("Swiper инициализирован")}}}),document.querySelector(".news-swiper-container")){console.log("Инициализация Swiper для новостей с уже существующими слайдами...");const n=document.querySelector(".news-swiper-container .swiper-wrapper"),t=n?n.querySelectorAll(".swiper-slide"):[];console.log(`Найдено ${t.length} существующих слайдов новостей от шаблонизатора`),new Swiper(".news-swiper-container",{slidesPerView:1,spaceBetween:30,loop:t.length>1,speed:1100,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".news-swiper-pagination",clickable:!0},navigation:{nextEl:".news-swiper-button-next",prevEl:".news-swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:30}},on:{init:function(){console.log("Swiper новостей инициализирован")}}})}}function O(){return new Promise((n,t)=>{try{ee("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css",e=>{if(e){console.error("Не удалось загрузить стили Swiper:",e),t(e);return}J("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",i=>{if(i){console.error("Не удалось загрузить библиотеку Swiper:",i),t(i);return}console.log("Swiper успешно загружен"),typeof Swiper<"u"?(console.log("Инициализация Swiper..."),setTimeout(()=>{N(),n()},100)):t(new Error("Swiper не определен после загрузки"))})})}catch(e){console.error("Ошибка при загрузке Swiper:",e),t(e)}})}function D(){const n=document.getElementById("burger-menu-btn"),t=document.getElementById("mobile-close-btn"),e=document.getElementById("mobile-menu"),i=document.querySelectorAll(".burger-line");if(!e)return;const r=()=>{e.classList.remove("translate-x-full"),e.classList.add("translate-x-0"),i[0].classList.add("rotate-45","translate-y-2"),i[1].classList.add("opacity-0"),i[2].classList.add("-rotate-45","-translate-y-2"),document.body.classList.add("overflow-hidden")},d=()=>{e.classList.remove("translate-x-0"),e.classList.add("translate-x-full"),i[0].classList.remove("rotate-45","translate-y-2"),i[1].classList.remove("opacity-0"),i[2].classList.remove("-rotate-45","-translate-y-2"),document.body.classList.remove("overflow-hidden")};n&&n.addEventListener("click",r),t&&t.addEventListener("click",d)}function V(){const n=document.querySelectorAll(".animated-title"),t=document.querySelectorAll(".animated-subtitle");n.length===0&&t.length===0||setTimeout(()=>{n.forEach(e=>{e.classList.add("show")}),setTimeout(()=>{t.forEach(e=>{e.classList.add("show")})},300)},200)}function Z(){const n=document.querySelectorAll(".faq-toggle");n.length>0&&n.forEach(t=>{t.addEventListener("click",function(){const e=this.parentElement.querySelector(".faq-content"),i=this.querySelector("svg");e.classList.contains("hidden")?(e.classList.remove("hidden"),i.classList.add("rotate-180")):(e.classList.add("hidden"),i.classList.remove("rotate-180"))})})}function H(){const n=document.querySelector("form");n&&n.addEventListener("submit",t=>{t.preventDefault(),alert("Форма отправлена!")})}function j(){console.log("Инициализация табов на странице платежей...");const n=document.querySelectorAll(".payment-tab"),t=document.querySelectorAll(".payment-tab-content");n.length>0&&n.forEach(r=>{r.addEventListener("click",function(){const g=`tab-${this.getAttribute("data-tab")}`;n.forEach(f=>{f.classList.remove("bg-white"),f.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),t.forEach(f=>{f.classList.add("hidden")}),document.getElementById(g).classList.remove("hidden")})});const e=document.querySelectorAll(".delivery-tab"),i=document.querySelectorAll(".delivery-tab-content");e.length>0&&e.forEach(r=>{r.addEventListener("click",function(){const g=`tab-${this.getAttribute("data-tab")}`;e.forEach(f=>{f.classList.remove("bg-white"),f.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),i.forEach(f=>{f.classList.add("hidden")}),document.getElementById(g).classList.remove("hidden")})})}function R(){console.log("Инициализация главной страницы начата"),document.querySelector(".swiper-container")||document.querySelector(".news-swiper-container")?(console.log("Обнаружен контейнер Swiper, начинаю загрузку..."),O().catch(u=>{console.error("Не удалось загрузить Swiper:",u)})):console.log("Контейнеры Swiper не обнаружены на странице"),console.log("Используем новости, уже загруженные через шаблонизатор");const n=document.querySelector(".news-carousel"),t=document.querySelector(".news-carousel button.absolute.left-0"),e=document.querySelector(".news-carousel button.absolute.right-0");if(n&&t&&e){const u=n.querySelectorAll(".bg-brand-light");let l=0;const c=o=>{u.forEach(s=>{s.style.display="none"}),u[o].style.display="block"};t.addEventListener("click",()=>{l=(l-1+u.length)%u.length,c(l)}),e.addEventListener("click",()=>{l=(l+1)%u.length,c(l)}),c(l)}const i=document.querySelectorAll(".carousel-slide"),r=document.querySelector(".carousel-container .absolute.left-4"),d=document.querySelector(".carousel-container .absolute.right-4");if(i.length>0&&r&&d){let u=0;const l=c=>{i.forEach(o=>{o.classList.remove("active"),o.style.display="none"}),i[c].classList.add("active"),i[c].style.display="block"};r.addEventListener("click",()=>{u=(u-1+i.length)%i.length,l(u)}),d.addEventListener("click",()=>{u=(u+1)%i.length,l(u)}),l(u),setInterval(()=>{u=(u+1)%i.length,l(u)},5e3)}const g=document.querySelector(".track-form");if(g)g.addEventListener("submit",function(u){u.preventDefault();const l=this.querySelector('input[type="text"]').value;l.trim()!==""?(console.log("Отслеживание заказа:",l),alert(`Отслеживание заказа: ${l}`)):(console.warn("Пустой ввод в форме отслеживания заказа"),alert("Пожалуйста, введите номер заказа"))});else{const u=document.querySelector(".tracking-form-container, .p-4.rounded-lg.w-full.md\\:w-2\\/5");if(u){console.log("Найден контейнер формы отслеживания");const l=u.querySelectorAll("button");console.log(`В контейнере формы отслеживания найдено ${l.length} кнопок:`),l.forEach((o,s)=>{console.log(`Кнопка #${s+1}:`,{classes:o.className,text:o.textContent.trim()})});let c=u.querySelector("button.bg-brand-gray");c||(console.log('Не найдена кнопка по классу, ищем по тексту "Поиск"'),c=Array.from(u.querySelectorAll("button")).find(s=>s.textContent.trim().toLowerCase().includes("поиск"))),c?(console.log('Найдена кнопка "Поиск" для отслеживания:',{text:c.textContent.trim(),classes:c.className}),c.addEventListener("click",function(o){o.preventDefault(),console.log('Клик по кнопке "Поиск" для отслеживания');const s=u.querySelector('input[type="text"]');if(!s){console.error("Не найдено поле ввода для формы отслеживания");return}s.hasAttribute("required")||s.setAttribute("required",""),s.validity.valid?(console.log("Отслеживание номера:",s.value),alert(`Отслеживание номера: ${s.value}`)):s.reportValidity()})):console.warn('Не найдена кнопка "Поиск" в контейнере формы отслеживания')}else console.warn("Не найден контейнер формы отслеживания")}te();const f=document.querySelector(".price-form");let a=!1;if(f&&(a=!0,f.addEventListener("submit",function(u){if(u.preventDefault(),this.checkValidity()){const l=document.querySelector("#from-city-input"),c=document.querySelector("#to-city-input");console.log("Расчет стоимости доставки:",{from:l.value,to:c.value}),alert(`Расчет стоимости доставки: ${l.value} -> ${c.value}`)}else this.reportValidity()})),!a){const u=document.querySelector(".bg-brand-light.p-4.rounded-lg.w-full.md\\:w-3\\/5");if(u){console.log("Найден контейнер формы расчета, будем использовать клик по кнопке");const l=u.querySelectorAll("button");console.log(`В контейнере формы расчета найдено ${l.length} кнопок:`),l.forEach((o,s)=>{console.log(`Кнопка #${s+1}:`,{classes:o.className,text:o.textContent.trim()})});let c=u.querySelector("button.bg-brand-gray");c||(console.log('Не найдена кнопка по классу, ищем по тексту "Рассчитать"'),c=Array.from(u.querySelectorAll("button")).find(s=>s.textContent.trim().toLowerCase().includes("рассчитать"))),c?(console.log('Найдена кнопка "Рассчитать" для расчета стоимости:',{text:c.textContent.trim(),classes:c.className}),c.addEventListener("click",function(o){o.preventDefault(),console.log('Клик по кнопке "Рассчитать"');const s=document.querySelector("#from-city-input"),h=document.querySelector("#to-city-input");if(!s||!h){console.error("Не найдены поля ввода для формы расчета");return}s.validity.valid&&h.validity.valid?(console.log("Расчет стоимости доставки:",{from:s.value,to:h.value}),alert(`Расчет стоимости доставки: ${s.value} -> ${h.value}`)):s.validity.valid?h.validity.valid||h.reportValidity():s.reportValidity()})):console.warn('Не найдена кнопка "Рассчитать" в контейнере формы расчета')}}const p=document.querySelector(".relative.bg-brand-light button");p&&p.addEventListener("click",function(){alert("Форма для отправки заявки будет открыта")});const m=document.querySelector("form.space-y-4");m&&(m.querySelectorAll('input[type="text"], input[type="tel"], input[type="checkbox"]').forEach(l=>{l.hasAttribute("required")||l.setAttribute("required","")}),m.addEventListener("submit",function(l){if(l.preventDefault(),this.checkValidity()){const c=this.querySelector('input[type="text"]').value,o=this.querySelector('input[type="tel"]').value;alert(`Спасибо за заявку, ${c}! Мы свяжемся с вами по номеру ${o}`),this.reset()}else this.reportValidity()})),console.log("Инициализация главной страницы завершена")}function te(){console.log("Инициализация автокомплита для полей выбора городов");let n=[];if(window.officesData&&window.officesData.length>0){console.log("Получаем города из данных офисов:",window.officesData.length);const t=new Set;window.officesData.forEach(e=>{e.city&&t.add(e.city)}),n=Array.from(t),console.log("Получили уникальные города:",n.length)}else{console.log("Ищем данные офисов в DOM-структуре");const t=document.querySelectorAll("#offices-data .office-data");if(t&&t.length){console.log("Найдены элементы данных офисов:",t.length);const e=new Set;t.forEach(i=>{const r=i.dataset.city;r&&e.add(r)}),n=Array.from(e),console.log("Получили уникальные города из DOM:",n.length)}else console.log("Не найдены данные офисов, используем стандартный набор городов"),n=["Новосибирск","Красноярск","Иркутск","Абакан","Томск"]}console.log("Список городов для автокомплита:",n),ne(n)}function ne(n){console.log("Настройка полей ввода с автокомплитом");const t=document.querySelector(".flex.md\\:flex-row.flex-col .relative.w-full"),e=document.querySelectorAll(".flex.md\\:flex-row.flex-col .relative.w-full")[1];if(!t||!e){console.error("Не найдены контейнеры для полей выбора городов");const a=document.querySelectorAll(".flex.md\\:flex-row.flex-col");console.log("Найдено flex-контейнеров:",a.length),a.forEach((p,m)=>{const u=p.querySelectorAll(".relative.w-full");console.log(`Flex-контейнер #${m+1} содержит ${u.length} relative-контейнеров`)});return}console.log("Найдены контейнеры для полей выбора",{fromContainer:!!t,toContainer:!!e}),U(t,n,"from-city","Откуда"),U(e,n,"to-city","Куда");const i=document.querySelector(".flex.md\\:flex-row.flex-col button.w-12");i?(console.log("Найдена кнопка переключения городов"),i.addEventListener("click",function(){const a=document.querySelector("#from-city-input"),p=document.querySelector("#to-city-input");if(a&&p){const m=a.value;a.value=p.value,p.value=m,console.log("Выполнено переключение значений полей:",{newFromValue:a.value,newToValue:p.value})}else console.warn("Не найдены поля ввода для переключения")})):console.warn("Не найдена кнопка переключения городов");const d=t.parentElement.querySelectorAll(".cursor-pointer");d.length>0?(console.log(`Найдено ${d.length} ссылок быстрого выбора для поля "Откуда"`),d.forEach(a=>{a.addEventListener("click",function(){const p=document.querySelector("#from-city-input");if(p){p.value=this.textContent.trim(),console.log('Быстрый выбор города "Откуда":',p.value);const m=document.querySelector("#from-city-suggestions");m&&m.classList.add("hidden")}else console.warn('Не найдено поле ввода "Откуда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Откуда"');const f=e.parentElement.querySelectorAll(".cursor-pointer");f.length>0?(console.log(`Найдено ${f.length} ссылок быстрого выбора для поля "Куда"`),f.forEach(a=>{a.addEventListener("click",function(){const p=document.querySelector("#to-city-input");if(p){p.value=this.textContent.trim(),console.log('Быстрый выбор города "Куда":',p.value);const m=document.querySelector("#to-city-suggestions");m&&m.classList.add("hidden")}else console.warn('Не найдено поле ввода "Куда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Куда"')}function U(n,t,e,i){console.log(`Создание поля автокомплита ${e} с плейсхолдером "${i}"`);const r=n.querySelector("img");let d="";r?(d=`<img src="${r.src}" alt="" class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none z-10">`,console.log(`Найдена существующая иконка стрелки для ${e}`)):console.warn(`Не найдена иконка стрелки для ${e}`);const g=`
    <div class="relative w-full">
      <input 
        id="${e}-input" 
        type="text" 
        class="appearance-none bg-white border border-gray-200 rounded-lg px-4 py-3 w-full focus:outline-none focus:ring-1 focus:ring-brand-blue text-body-secondary"
        placeholder="${i}" 
        autocomplete="off"
        required
      >
      <button type="button" class="absolute right-0 top-0 h-full w-12 text-gray-400 focus:outline-none z-10"></button>
      ${d}
      <ul 
        id="${e}-suggestions" 
        class="absolute w-full bg-white border border-gray-200 rounded-md shadow-md mt-1 max-h-60 overflow-y-auto hidden z-20"
      ></ul>
    </div>
  `;n.innerHTML=g,console.log(`Вставлена HTML-разметка для поля ${e}`);const f=document.getElementById(`${e}-input`),a=document.getElementById(`${e}-suggestions`),p=n.querySelector("button");if(!f||!a||!p){console.error(`Не удалось создать элементы автокомплита для ${e}`,{input:!!f,list:!!a,toggleButton:!!p});return}console.log(`Созданы элементы автокомплита для ${e}`);let m=-1;function u(o){console.log(`Обновление списка подсказок для ${e}:`,o.length),a.innerHTML="",m=-1,o.forEach((s,h)=>{const y=document.createElement("li");y.textContent=s,y.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",y.addEventListener("click",()=>{f.value=s,a.classList.add("hidden"),console.log(`Выбран город "${s}" в поле ${e}`)}),a.appendChild(y)}),a.classList.remove("hidden")}function l(){console.log(`Показываем все города для ${e}:`,t.length),a.innerHTML="",m=-1,t.forEach((o,s)=>{const h=document.createElement("li");h.textContent=o,h.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",h.addEventListener("click",()=>{f.value=o,a.classList.add("hidden"),console.log(`Выбран город "${o}" в поле ${e} из полного списка`)}),a.appendChild(h)}),a.classList.remove("hidden")}p.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),a.classList.contains("hidden")?(l(),console.log(`Открыт полный список городов для ${e}`)):(a.classList.add("hidden"),console.log(`Закрыт список городов для ${e}`))}),f.addEventListener("input",()=>{const o=f.value.toLowerCase();if(!o){a.classList.add("hidden");return}const s=t.filter(h=>h.toLowerCase().startsWith(o));if(s.length===0){a.classList.add("hidden"),console.log(`Не найдено совпадений для "${o}" в поле ${e}`);return}u(s),console.log(`Найдено ${s.length} совпадений для "${o}" в поле ${e}`)}),f.addEventListener("keydown",o=>{const s=a.querySelectorAll("li");if(a.classList.contains("hidden")||s.length===0){if(o.key==="ArrowDown"&&f.value.trim()===""){o.preventDefault(),l(),console.log(`Показан полный список городов по нажатию стрелки вниз в поле ${e}`);return}return}o.key==="ArrowDown"?(o.preventDefault(),m=(m+1)%s.length,c(s),console.log(`Выделен следующий элемент (${m}) в списке ${e}`)):o.key==="ArrowUp"?(o.preventDefault(),m=(m-1+s.length)%s.length,c(s),console.log(`Выделен предыдущий элемент (${m}) в списке ${e}`)):o.key==="Enter"?(o.preventDefault(),m>=0&&m<s.length&&(f.value=s[m].textContent,a.classList.add("hidden"),console.log(`Выбран город "${s[m].textContent}" через Enter в поле ${e}`))):o.key==="Escape"&&(o.preventDefault(),a.classList.add("hidden"),console.log(`Закрыт список городов через Escape для ${e}`))});function c(o){if(o.forEach((s,h)=>{s.classList.toggle("bg-blue-100",h===m)}),m>=0){const s=o[m],h=a.getBoundingClientRect(),y=s.getBoundingClientRect();y.bottom>h.bottom?s.scrollIntoView(!1):y.top<h.top&&s.scrollIntoView(!0)}}document.addEventListener("click",o=>{!a.contains(o.target)&&o.target!==f&&o.target!==p&&a.classList.add("hidden")}),f.addEventListener("focus",()=>{const o=f.value.toLowerCase();if(!o)return;const s=t.filter(h=>h.toLowerCase().startsWith(o));s.length>0&&(u(s),console.log(`Показаны совпадения при фокусе для ${e}`))}),a.style.maxHeight="200px",a.style.overflowY="auto",a.style.overscrollBehavior="contain",console.log(`Инициализация поля ${e} завершена`)}function _(){const n=document.querySelectorAll(".office-card"),t=document.querySelector(".selected-office-card"),e=document.getElementById("close-selected-office");if(L(null),e&&t&&e.addEventListener("click",function(){t.style.display="none",L(null)}),n.length>0){n.forEach(a=>{a.addEventListener("mouseenter",function(){this.classList.add("shadow-md"),this.style.transform="translateY(-2px)",this.style.transition="transform 0.2s ease, box-shadow 0.2s ease"}),a.addEventListener("mouseleave",function(){this.classList.remove("shadow-md"),this.style.transform="translateY(0)"})});const f=document.querySelector(".map-info-panel");f&&f.classList.add("hidden"),setTimeout(()=>{L(null);const a=[];n.forEach(p=>{if(p.dataset.coordinates){const m=p.dataset.coordinates.split(",").map(u=>parseFloat(u.trim()));m.length===2&&a.push(m)}}),a.length>0&&typeof ymaps<"u"&&ymaps.ready(function(){var m;((m=document.querySelector("#map"))==null?void 0:m.__yamap)&&typeof window.resetAllMarkers=="function"&&window.resetAllMarkers()})},300)}document.querySelectorAll(".pagination-button");const i=document.querySelector(".offices-grid"),r=9;let d=1,g=[];if(i){let p=function(c,o){const s=document.querySelector(".pagination-container nav");if(!s)return;const h=s.querySelector("button:first-child"),y=s.querySelector("button:last-child");for(;s.children.length>2;)s.removeChild(s.children[1]);h&&(c===1?(h.setAttribute("disabled","disabled"),h.classList.add("opacity-50","cursor-not-allowed")):(h.removeAttribute("disabled"),h.classList.remove("opacity-50","cursor-not-allowed"))),y&&(c===o?(y.setAttribute("disabled","disabled"),y.classList.add("opacity-50","cursor-not-allowed")):(y.removeAttribute("disabled"),y.classList.remove("opacity-50","cursor-not-allowed")));let w=[];if(o<=5)for(let v=1;v<=o;v++)w.push(v);else w.push(1),c<=3?w.push(2,3,4):c>=o-2?w.push(o-3,o-2,o-1):w.push(c-1,c,c+1),w.push(o);w=[...new Set(w)].sort((v,S)=>v-S);let b=0;for(const v of w){if(v-b>1){const A=document.createElement("span");A.className="w-8 h-8 flex items-center justify-center",A.textContent="...",s.insertBefore(A,y)}const S=document.createElement("button");v===c?S.className="pagination-number pagination-button w-8 h-8 flex items-center justify-center rounded bg-brand-blue text-white font-bold":S.className="pagination-number pagination-button w-8 h-8 flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white transition-colors",S.textContent=v,S.addEventListener("click",function(){const A=parseInt(this.textContent);m(A)}),s.insertBefore(S,y),b=v}},m=function(c){L(null),g.forEach(h=>{h.classList.add("hidden")});const o=(c-1)*r,s=o+r;g.slice(o,s).forEach(h=>{h.classList.remove("hidden")}),p(c,a),d=c,setTimeout(()=>{if(document.querySelectorAll(".office-card.ring.ring-brand-blue:not(.hidden)").length===0){const y=Array.from(document.querySelectorAll(".office-card:not(.hidden)"));y.length>0&&y[0].click()}},50)};g=Array.from(document.querySelectorAll(".office-card"));const f=document.querySelector(".pagination-number.bg-brand-blue");f&&(d=parseInt(f.textContent));const a=Math.ceil(g.length/r),u=document.querySelector(".pagination-container");if(u){const c=u.querySelectorAll("button");if(c.length>0){c[0].classList.add("pagination-prev","pagination-button"),c[c.length-1].classList.add("pagination-next","pagination-button");for(let o=1;o<c.length-1;o++)c[o].textContent!=="..."&&c[o].classList.add("pagination-number","pagination-button");document.querySelectorAll(".pagination-button").forEach(o=>{o.addEventListener("click",function(){if(this.classList.contains("pagination-prev"))d>1&&m(d-1);else if(this.classList.contains("pagination-next"))d<a&&m(d+1);else if(this.classList.contains("pagination-number")){const s=parseInt(this.textContent);m(s)}})}),p(d,a),m(d)}}const l=document.getElementById("cityFilter");l&&l.addEventListener("change",function(){const c=this.value;c==="all"?g=Array.from(document.querySelectorAll(".office-card")):g=Array.from(document.querySelectorAll(".office-card")).filter(o=>o.getAttribute("data-city")===c),Math.ceil(g.length/r),document.querySelectorAll(".office-card").forEach(o=>{o.classList.remove("ring","ring-brand-blue")}),m(1)})}}function W(){const n=document.querySelectorAll(".vacancy-toggle");if(n.length>0){n.forEach(e=>{e.addEventListener("click",function(){const i=this.parentElement.querySelector(".vacancy-content"),r=this.querySelector("svg");i.classList.contains("hidden")?(i.classList.remove("hidden"),r.classList.add("rotate-180")):(i.classList.add("hidden"),r.classList.remove("rotate-180"))})});const t=document.getElementById("cityFilter");t&&t.addEventListener("change",function(){const e=this.value;document.querySelectorAll(".vacancy-item").forEach(r=>{const d=r.getAttribute("data-location");e==="all"||d.includes(e)?r.style.display="":r.style.display="none"})})}}function Y(){console.log("Инициализация страницы платежей..."),Z(),j();const n=document.getElementById("send-check-email"),t=document.getElementById("email-field"),e=document.getElementById("email-input");n&&t&&e&&(console.log("Инициализация функционала отображения поля email..."),n.checked&&(t.classList.remove("hidden"),e.setAttribute("required","")),n.addEventListener("change",function(){this.checked?(t.classList.remove("hidden"),e.setAttribute("required","")):(t.classList.add("hidden"),e.removeAttribute("required"))}));const i=document.getElementById("payment-form");i&&(console.log("Инициализация обработчика формы оплаты..."),i.addEventListener("submit",function(r){r.preventDefault();const d=document.getElementById("order-number").value,g=document.getElementById("send-check-email").checked;let f=null;if(!d){alert("Пожалуйста, введите номер заказа");return}if(g){if(f=document.getElementById("email-input").value,!f){alert("Пожалуйста, введите email для отправки чека");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)){alert("Пожалуйста, введите корректный email");return}}console.log("Отправка платежа:"),console.log("Номер заказа:",d),console.log("Отправить чек на email:",g),g&&console.log("Email для чека:",f),alert("Платеж отправлен! Проверьте консоль для деталей.")}))}class oe{constructor(){this.container=document.getElementById("modal-container"),this.overlay=this.container.querySelector(".modal-overlay"),this.modal=this.container.querySelector(".modal"),this.closeBtn=this.container.querySelector(".modal-close"),this.content=this.container.querySelector(".modal-content"),this.bindEvents()}bindEvents(){this.closeBtn.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",t=>{t.key==="Escape"&&!this.container.classList.contains("hidden")&&this.close()})}open(t){this.content.innerHTML=t,this.container.classList.remove("hidden"),requestAnimationFrame(()=>{this.overlay.classList.add("opacity-100"),this.modal.classList.add("opacity-100","scale-100"),this.modal.classList.remove("scale-95")}),document.body.style.overflow="hidden"}close(){this.overlay.classList.remove("opacity-100"),this.modal.classList.remove("opacity-100","scale-100"),this.modal.classList.add("scale-95"),setTimeout(()=>{this.container.classList.add("hidden"),this.content.innerHTML="",document.body.style.overflow=""},300)}}console.log("NewsPage: Модуль загружается...");class se{constructor(){console.log("NewsPage: Инициализация класса"),this.modal=new oe,this.init()}init(){console.log("NewsPage: Начало инициализации"),this.bindNewsDetailsButtons(),this.initMonthFilter(),console.log("NewsPage: Инициализация завершена")}bindNewsDetailsButtons(){const t=document.querySelectorAll(".news-details-btn");console.log("NewsPage: Найдено кнопок для новостей:",t.length),t.forEach((e,i)=>{console.log(`NewsPage: Добавление обработчика для кнопки ${i+1}`),e.addEventListener("click",r=>{var f,a,p,m,u;console.log('NewsPage: Клик по кнопке "Подробнее"'),r.preventDefault();const d=e.closest(".news-card");if(console.log("NewsPage: Найдена карточка новости:",d!==null),!d){console.error("NewsPage: Не удалось найти карточку новости");return}const g={title:(f=d.querySelector(".news-title"))==null?void 0:f.textContent,image:(a=d.querySelector("img"))==null?void 0:a.src,isPlaceholder:(p=d.querySelector("img"))==null?void 0:p.classList.contains("placeholder"),content:(m=d.querySelector(".news-content"))==null?void 0:m.textContent,date:(u=d.querySelector(".news-date"))==null?void 0:u.textContent};if(console.log("NewsPage: Собраны данные для модального окна:",g),!g.title||!g.content){console.error("NewsPage: Не удалось собрать все необходимые данные");return}this.openNewsModal(g)})})}openNewsModal(t){console.log("NewsPage: Открытие модального окна с контентом:",t);let e="";t.image&&!t.isPlaceholder&&(e=`
        <div class="rounded-2xl overflow-hidden">
          <img src="${t.image}" 
               alt="${t.title}" 
               class="w-full object-cover aspect-[1.85/1]">
        </div>
      `);const i=`
      <div class="space-y-6">
        <h2 class="text-h4 md:text-h3 font-bold text-brand-gray">${t.title}</h2>
        ${e}
        <div class="text-brand-gray">${t.content}</div>
        <div class="text-caption-form text-brand-gray">${t.date}</div>
      </div>
    `;this.modal.open(i)}initMonthFilter(){const t=document.querySelector(".month-filter");t?(console.log("NewsPage: Найден фильтр по месяцам"),t.addEventListener("change",e=>{const i=e.target.value;console.log("NewsPage: Выбран месяц:",i)})):console.warn("NewsPage: Фильтр по месяцам не найден")}}const le="";console.log("main.js: Начало загрузки");const C=Q();console.log("Определен базовый путь:",C),window.BASE_PATH=C,window.initMap=k,window.selectOfficeCard=B,window.selectOfficeCardNoFocus=L,window.updateInfoPanel=T,window.getZoomForDevice=M,window.getCenterForDevice=F,window.getMarkerSizeForZoom=q,window.createColoredMarkerIcon=x,window.mapConfig=E,window.loadSwiper=O,window.initSwiperSlider=N,window.initMobileMenu=D,window.initTitleAnimations=V,window.initForms=H,window.initFaqAccordion=Z,window.initPaymentTabs=j,window.initHomePage=R,window.initContactsPage=_,window.initVacanciesPage=W,window.initPaymentsPage=Y;let G=!1,z=!1;function ie(){console.log("=== Начало инициализации страницы ==="),D(),H(),document.getElementById("map")&&(console.log("Найден контейнер карты, начинаем инициализацию..."),setTimeout(()=>{let i=[];const r=document.querySelectorAll(".office-card");let d=!1;if(r&&r.length>0&&(console.log("Найдены карточки офисов на странице:",r.length),r.forEach(g=>{if(g.dataset.coordinates){const f=g.dataset.coordinates.split(",").map(a=>parseFloat(a.trim()));if(f.length===2){const a=g.dataset.city||"",p=g.querySelector("h3 + div.text-brand-gray"),m=p?p.textContent.trim():"",u=g.querySelectorAll("div.text-brand-gray"),l=u.length>1?u[1]:null,c=u.length>2?u[2]:null,o=u.length>3?u[3]:null;i.push({city:a,address:m,type:l?l.textContent.trim():"",phone:c?c.textContent.trim():"",email:o?o.textContent.trim():"",coordinates:f})}}}),i.length>0&&(console.log("Собраны данные офисов из карточек:",i.length),k(i,C),d=!0)),!d&&window.officesData&&window.officesData.length>0&&(console.log("Использую предварительно загруженные данные офисов:",window.officesData.length),k(window.officesData,C),d=!0),!d){const g=document.querySelector(".map-info-panel .font-bold.text-2xl.text-brand-gray");if(g){console.log("Найдены данные для дефолтного офиса в DOM");const f=document.querySelector(".map-info-panel div:nth-of-type(2)"),a=document.querySelector(".map-info-panel div:nth-of-type(3)"),p=document.querySelector(".map-info-panel div:nth-of-type(4)"),m=document.querySelector(".map-info-panel div:nth-of-type(5)");let u=[56.010563,92.852572];const l=document.querySelector(".map-info-panel");if(l&&l.dataset.coordinates){const s=l.dataset.coordinates.split(",").map(h=>parseFloat(h.trim()));s.length===2&&(u=s)}const c={city:g.textContent,address:f?f.textContent:"",type:a?a.textContent:"",phone:p?p.textContent:"",email:m?m.textContent:"",coordinates:u};k([c],C)}else console.log("Данные не найдены на странице, инициализируем карту без маркеров"),k([],C)}},100));const t=window.location.pathname,e=t.split("/").pop();console.log(`Текущий путь: ${t}, определена страница: ${e||"главная (индекс)"}`),e===""||e==="index.html"?(console.log("Инициализация главной страницы..."),R()):e==="vacancies.html"?(console.log("Инициализация страницы вакансий..."),W()):e==="contacts.html"?(console.log("Инициализация страницы контактов..."),_()):e==="payments.html"?(console.log("Инициализация страницы платежей..."),Y()):e==="news.html"&&(console.log("Инициализация страницы новостей..."),new se),V(),console.log("=== Инициализация страницы завершена ===")}function K(){if(G||z){console.log("Инициализация уже выполнена или в процессе, пропускаем повторный вызов");return}console.log("Начинаем безопасную инициализацию страницы"),z=!0;try{ie(),G=!0}catch(n){console.error("Ошибка при инициализации страницы:",n)}finally{z=!1}}X(K),window.addEventListener("load",K)})();
