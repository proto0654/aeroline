(function(){"use strict";function oe(){const n=document.getElementsByTagName("script"),e=n[n.length-1];try{const t=e.src;if(t.includes("://")){const i=new URL(t).pathname.split("/");return i.pop(),i[i.length-1]==="js"&&i[i.length-2]==="assets"?(i.pop(),i.pop()):i[i.length-1]==="assets"&&i.pop(),i.join("/")+"/"}else{const o=t.split("/");return o.pop(),o.length>=2&&o[o.length-1]==="js"&&o[o.length-2]==="assets"?(o.pop(),o.pop()):o.length>=1&&o[o.length-1]==="assets"&&o.pop(),o.join("/")+"/"}}catch(t){return console.error("Ошибка при определении базового пути:",t),"./"}}function ne(n){document.readyState!=="loading"?n():document.addEventListener("DOMContentLoaded",n)}function ie(n,e){const t=document.createElement("script");t.src=n,t.onload=()=>{e&&e(null)},t.onerror=()=>{e&&e(new Error(`Не удалось загрузить скрипт: ${n}`))},document.head.appendChild(t)}function se(n,e){const t=document.createElement("link");t.rel="stylesheet",t.href=n,t.onload=()=>{e&&e(null)},t.onerror=()=>{e&&e(new Error(`Не удалось загрузить стиль: ${n}`))},document.head.appendChild(t)}function $(){return window.innerWidth<768?"mobile":"desktop"}const A="#008DD2",B="#666666",v={initialView:{center:{desktop:[54.962902,73.38475],mobile:[53.224854,50.199879]},zoom:{desktop:4,mobile:3}},officeZoom:{desktop:15,mobile:13},maxBoundsZoom:{desktop:18,mobile:7},boundsPadding:[50,50],markerSizing:{minZoom:2,maxZoom:18,minSize:[16,18],maxSize:[36,42],minOffset:[-8,-18],maxOffset:[-18,-42]}};function P(n){const e=`
  <svg width="36" height="42" viewBox="0 0 36 42" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M35.114 14.1578C33.014 4.91781 24.954 0.757812 17.874 0.757812C17.874 0.757812 17.874 0.757812 17.854 0.757812C10.794 0.757812 2.71397 4.89781 0.61397 14.1378C-1.72603 24.4578 4.59397 33.1978 10.314 38.6978C12.434 40.7378 15.154 41.7578 17.874 41.7578C20.594 41.7578 23.314 40.7378 25.414 38.6978C31.134 33.1978 37.454 24.4778 35.114 14.1578ZM17.874 24.1778C14.394 24.1778 11.574 21.3578 11.574 17.8778C11.574 14.3978 14.394 11.5778 17.874 11.5778C21.354 11.5778 24.174 14.3978 24.174 17.8778C24.174 21.3578 21.354 24.1778 17.874 24.1778Z" fill="${n}" />
  </svg>`;return`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(e)}`}function L(n){const e=$();return n[e]}function O(n){const e=$();return n[e]}function E(n){const{minZoom:e,maxZoom:t,minSize:o,maxSize:i,minOffset:s,maxOffset:a}=v.markerSizing;if(n<=e)return{size:o,offset:s};if(n>=t)return{size:i,offset:a};const c=(n-e)/(t-e),u=Math.round(o[0]+(i[0]-o[0])*c),m=Math.round(o[1]+(i[1]-o[1])*c),p=m/i[1],f=Math.round(s[0]+(a[0]-s[0])*p),h=Math.round(s[1]+(a[1]-s[1])*p);return{size:[u,m],offset:[f,h]}}function V(n){const e=document.querySelector(".map-info-panel");if(!e)return;let t=n.address||"";n.city&&t.trim().startsWith(n.city+",")&&(t=t.replace(n.city+",","").trim()),e.innerHTML=`
    <div class="flex justify-between items-center mb-2">
      <div class="font-bold text-2xl text-brand-gray">${n.city||""}</div>
      <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="text-brand-gray">${t}</div>
    <div class="hidden lg:block text-brand-gray">${n.type||""}</div>
    ${n.phone?`<div class="hidden lg:block text-brand-gray">${n.phone}</div>`:""}
    ${n.email?`<div class="hidden lg:block text-brand-gray">${n.email}</div>`:""}
    <button class="bg-brand-blue mt-2 md:mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
  `,e.classList.remove("hidden");const o=e.querySelector(".close-info-panel");o&&o.addEventListener("click",function(){e.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),b(null)})}function b(n,e=null,t=null,o=null){if(document.querySelectorAll(".office-card").forEach(i=>{i.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),e&&V(e),t&&o&&(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),t.options)){const i=o.getZoom(),s=E(i),a=P(A);t.options.set({iconImageHref:a,iconImageSize:s.size,iconImageOffset:s.offset})}}function F(n,e=null,t=null,o=null,i=null){if(document.querySelectorAll(".office-card").forEach(s=>{s.classList.remove("ring","ring-brand-blue")}),n&&n.classList.add("ring","ring-brand-blue"),e&&V(e),t&&o){if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),t.options){const s=o.getZoom(),a=E(s),c=P(A);t.options.set({iconImageHref:c,iconImageSize:a.size,iconImageOffset:a.offset})}if(i){const s=L(v.officeZoom);o.setCenter(i,s,{duration:300})}}}function M(n,e){try{ymaps.ready(function(){const t=L(v.initialView.zoom),o=O(v.initialView.center),i=new ymaps.Map("map",{center:o,zoom:t,controls:["zoomControl","fullscreenControl"],behaviors:["drag","multiTouch"]}),s=new ymaps.GeoObjectCollection,a={};let c=null;const u=E(t),m={iconLayout:"default#image",iconImageHref:P(B),iconImageSize:u.size,iconImageOffset:u.offset};function p(r){const l=E(r);Object.values(a).forEach(d=>{const g=d.options.get("iconImageHref").includes(encodeURIComponent(A));d.options.set({iconImageSize:l.size,iconImageOffset:l.offset})})}window.resetAllMarkers=function(){const r=i.getZoom(),l=E(r);Object.values(a).forEach(d=>{const g=P(B);d.options.set({iconImageHref:g,iconImageSize:l.size,iconImageOffset:l.offset})})},n.forEach((r,l)=>{if(!r.coordinates||r.coordinates.length!==2)return;const d=P(B),g=new ymaps.Placemark(r.coordinates,{hintContent:r.city},{iconLayout:"default#image",iconImageHref:d,iconImageSize:u.size,iconImageOffset:u.offset});a[l]=g,s.add(g),g.events.add("click",()=>{console.log("Клик по маркеру");const w=i.getZoom(),x=L(v.officeZoom),S=L(v.initialView.zoom),y=Math.abs(w-x)<3;if(console.log("Текущий масштаб:",w),console.log("Масштаб офиса:",x),console.log("Начальный масштаб:",S),console.log("Маркер сейчас приближен:",y),console.log("Активный маркер:",c===g?"Текущий":c?"Другой":"Нет"),!(c===g))console.log("Действие: Выделяем новый маркер без фокусировки"),b(null,r,g,i),c=g;else if(!y)console.log("Действие: Приближаем маркер"),F(null,r,g,i,g.geometry.getCoordinates());else{console.log("Действие: Отдаляем маркер, сохраняем позицию и меняем только масштаб"),console.log("Целевой масштаб:",S);const k=i.getCenter();console.log("Сохраняем текущий центр карты:",k);const C=E(S),z=P(A);i.setZoom(S,{duration:300}),setTimeout(()=>{g&&g.options&&g.options.set({iconImageHref:z,iconImageSize:C.size,iconImageOffset:C.offset})},350)}})}),i.geoObjects.add(s),i.events.add("boundschange",function(r){if(r.get("oldZoom")!==r.get("newZoom")){p(r.get("newZoom"));const l=r.get("newZoom");console.log("Масштаб изменился на:",l)}}),s.getLength()>0&&(console.log(`${$()}: используем заданный масштаб и центр`,t),i.setCenter(o,t));const f=document.querySelector(".map-info-panel");fetch(`${e}assets/data/default-office.json`).then(r=>r.json()).then(r=>{if(!n.some(g=>g.city===r.city&&g.address===r.address)&&r.coordinates){n.push(r);const g=n.length-1,w=i.getZoom(),x=E(w),S=P(B),y=new ymaps.Placemark(r.coordinates,{hintContent:r.city},{iconLayout:"default#image",iconImageHref:S,iconImageSize:x.size,iconImageOffset:x.offset});y.events.add("click",()=>{console.log("Клик по дефолтному маркеру");const I=i.getZoom(),k=L(v.officeZoom),C=L(v.initialView.zoom),z=Math.abs(I-k)<3;if(console.log("Текущий масштаб:",I),console.log("Масштаб офиса:",k),console.log("Начальный масштаб:",C),console.log("Дефолтный маркер сейчас приближен:",z),console.log("Активный маркер:",c===y?"Текущий дефолтный":c?"Другой":"Нет"),!(c===y))console.log("Действие: Выделяем новый дефолтный маркер без фокусировки"),b(null,r,y,i),c=y;else if(!z)console.log("Действие: Приближаем дефолтный маркер"),F(null,r,y,i,r.coordinates);else{console.log("Действие: Отдаляем дефолтный маркер, сохраняем позицию и меняем только масштаб"),console.log("Целевой масштаб:",C);const he=i.getCenter();console.log("Сохраняем текущий центр карты:",he);const te=E(C),pe=P(A);i.setZoom(C,{duration:300}),setTimeout(()=>{y&&y.options&&y.options.set({iconImageHref:pe,iconImageSize:te.size,iconImageOffset:te.offset})},350)}}),a[g]=y,s.add(y),i.geoObjects.add(y)}const d=n.findIndex(g=>g.city===r.city&&g.address===r.address);if(d!==-1){const g=a[d];if(g){const w=document.querySelectorAll(".office-card");let x=null;w.forEach(S=>{const y=S.dataset.city,I=S.querySelector("h3 + div.text-brand-gray"),k=I?I.textContent.trim():"";y===r.city&&k.includes(r.address)&&(x=S)}),b(x,n[d],g,i),c=g}}}).catch(r=>{console.error("Ошибка при загрузке дефолтного офиса:",r)}),document.querySelectorAll(".office-card").forEach((r,l)=>{r.addEventListener("click",function(){const d=this.dataset.index?parseInt(this.dataset.index,10):l,g=a[d];g&&(F(this,n[d],g,i,g.geometry.getCoordinates()),c=g)})}),document.querySelectorAll(".close-info-panel").forEach(r=>{r.addEventListener("click",function(){const l=this.closest(".map-info-panel");l&&(l.classList.add("hidden"),typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),b(null),c=null)})}),window.addEventListener("resize",()=>{const r=i.getCenter();setTimeout(()=>{i.container.fitToViewport();const l=$(),d=L(v.initialView.zoom),g=O(v.initialView.center);i.setCenter(g,d,{duration:0})},200)}),i.events.add("click",r=>{r.get("target").options})})}catch(t){console.error("Ошибка при инициализации карты:",t)}}function D(){if(typeof Swiper>"u"){console.error("Swiper не загружен!");return}if(new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,loop:!0,speed:800,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e4,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){console.log("Swiper инициализирован")}}}),document.querySelector(".news-swiper-container")){console.log("Инициализация Swiper для новостей с уже существующими слайдами...");const n=document.querySelector(".news-swiper-container .swiper-wrapper"),e=n?n.querySelectorAll(".swiper-slide"):[];console.log(`Найдено ${e.length} существующих слайдов новостей от шаблонизатора`),new Swiper(".news-swiper-container",{slidesPerView:1,spaceBetween:30,loop:e.length>1,speed:1100,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:7e3,disableOnInteraction:!1},pagination:{el:".news-swiper-pagination",clickable:!0},navigation:{nextEl:".news-swiper-button-next",prevEl:".news-swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:1,spaceBetween:30}},on:{init:function(){console.log("Swiper новостей инициализирован")}}})}}function H(){return new Promise((n,e)=>{try{se("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css",t=>{if(t){console.error("Не удалось загрузить стили Swiper:",t),e(t);return}ie("https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",o=>{if(o){console.error("Не удалось загрузить библиотеку Swiper:",o),e(o);return}console.log("Swiper успешно загружен"),typeof Swiper<"u"?(console.log("Инициализация Swiper..."),setTimeout(()=>{D(),n()},100)):e(new Error("Swiper не определен после загрузки"))})})}catch(t){console.error("Ошибка при загрузке Swiper:",t),e(t)}})}function R(){const n=document.getElementById("burger-menu-btn"),e=document.getElementById("mobile-close-btn"),t=document.getElementById("mobile-menu"),o=document.querySelectorAll(".burger-line");if(!t)return;const i=()=>{t.classList.remove("translate-x-full"),t.classList.add("translate-x-0"),o[0].classList.add("rotate-45","translate-y-2"),o[1].classList.add("opacity-0"),o[2].classList.add("-rotate-45","-translate-y-2"),document.body.classList.add("overflow-hidden")},s=()=>{t.classList.remove("translate-x-0"),t.classList.add("translate-x-full"),o[0].classList.remove("rotate-45","translate-y-2"),o[1].classList.remove("opacity-0"),o[2].classList.remove("-rotate-45","-translate-y-2"),document.body.classList.remove("overflow-hidden")};n&&n.addEventListener("click",i),e&&e.addEventListener("click",s)}function j(){const n=document.querySelectorAll(".animated-title"),e=document.querySelectorAll(".animated-subtitle");n.length===0&&e.length===0||setTimeout(()=>{n.forEach(t=>{t.classList.add("show")}),setTimeout(()=>{e.forEach(t=>{t.classList.add("show")})},300)},200)}function U(){const n=document.querySelectorAll(".faq-toggle");n.length>0&&n.forEach(e=>{e.addEventListener("click",function(){const t=this.parentElement.querySelector(".faq-content"),o=this.querySelector("svg");t.classList.contains("hidden")?(t.classList.remove("hidden"),o.classList.add("rotate-180")):(t.classList.add("hidden"),o.classList.remove("rotate-180"))})})}function _(){const n=document.querySelector("form");n&&n.addEventListener("submit",e=>{e.preventDefault(),alert("Форма отправлена!")})}function W(){console.log("Инициализация табов на странице платежей...");const n=document.querySelectorAll(".payment-tab"),e=document.querySelectorAll(".payment-tab-content");n.length>0&&n.forEach(i=>{i.addEventListener("click",function(){const a=`tab-${this.getAttribute("data-tab")}`;n.forEach(c=>{c.classList.remove("bg-white"),c.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),e.forEach(c=>{c.classList.add("hidden")}),document.getElementById(a).classList.remove("hidden")})});const t=document.querySelectorAll(".delivery-tab"),o=document.querySelectorAll(".delivery-tab-content");t.length>0&&t.forEach(i=>{i.addEventListener("click",function(){const a=`tab-${this.getAttribute("data-tab")}`;t.forEach(c=>{c.classList.remove("bg-white"),c.classList.add("bg-brand-light","border-transparent","text-brand-gray")}),this.classList.remove("bg-brand-light"),this.classList.add("bg-white","border-transparent","text-brand-gray"),o.forEach(c=>{c.classList.add("hidden")}),document.getElementById(a).classList.remove("hidden")})})}function Y(){console.log("Инициализация главной страницы начата"),document.querySelector(".swiper-container")||document.querySelector(".news-swiper-container")?(console.log("Обнаружен контейнер Swiper, начинаю загрузку..."),H().catch(f=>{console.error("Не удалось загрузить Swiper:",f)})):console.log("Контейнеры Swiper не обнаружены на странице"),console.log("Используем новости, уже загруженные через шаблонизатор");const n=document.querySelector(".news-carousel"),e=document.querySelector(".news-carousel button.absolute.left-0"),t=document.querySelector(".news-carousel button.absolute.right-0");if(n&&e&&t){const f=n.querySelectorAll(".bg-brand-light");let h=0;const r=l=>{f.forEach(d=>{d.style.display="none"}),f[l].style.display="block"};e.addEventListener("click",()=>{h=(h-1+f.length)%f.length,r(h)}),t.addEventListener("click",()=>{h=(h+1)%f.length,r(h)}),r(h)}const o=document.querySelectorAll(".carousel-slide"),i=document.querySelector(".carousel-container .absolute.left-4"),s=document.querySelector(".carousel-container .absolute.right-4");if(o.length>0&&i&&s){let f=0;const h=r=>{o.forEach(l=>{l.classList.remove("active"),l.style.display="none"}),o[r].classList.add("active"),o[r].style.display="block"};i.addEventListener("click",()=>{f=(f-1+o.length)%o.length,h(f)}),s.addEventListener("click",()=>{f=(f+1)%o.length,h(f)}),h(f),setInterval(()=>{f=(f+1)%o.length,h(f)},5e3)}const a=document.querySelector(".track-form");if(a)a.addEventListener("submit",function(f){f.preventDefault();const h=this.querySelector('input[type="text"]').value;h.trim()!==""?(console.log("Отслеживание заказа:",h),alert(`Отслеживание заказа: ${h}`)):(console.warn("Пустой ввод в форме отслеживания заказа"),alert("Пожалуйста, введите номер заказа"))});else{const f=document.querySelector(".tracking-form-container, .p-4.rounded-lg.w-full.md\\:w-2\\/5");if(f){console.log("Найден контейнер формы отслеживания");const h=f.querySelectorAll("button");console.log(`В контейнере формы отслеживания найдено ${h.length} кнопок:`),h.forEach((l,d)=>{console.log(`Кнопка #${d+1}:`,{classes:l.className,text:l.textContent.trim()})});let r=f.querySelector("button.bg-brand-gray");r||(console.log('Не найдена кнопка по классу, ищем по тексту "Поиск"'),r=Array.from(f.querySelectorAll("button")).find(d=>d.textContent.trim().toLowerCase().includes("поиск"))),r?(console.log('Найдена кнопка "Поиск" для отслеживания:',{text:r.textContent.trim(),classes:r.className}),r.addEventListener("click",function(l){l.preventDefault(),console.log('Клик по кнопке "Поиск" для отслеживания');const d=f.querySelector('input[type="text"]');if(!d){console.error("Не найдено поле ввода для формы отслеживания");return}d.hasAttribute("required")||d.setAttribute("required",""),d.validity.valid?(console.log("Отслеживание номера:",d.value),alert(`Отслеживание номера: ${d.value}`)):d.reportValidity()})):console.warn('Не найдена кнопка "Поиск" в контейнере формы отслеживания')}else console.warn("Не найден контейнер формы отслеживания")}le();const c=document.querySelector(".price-form");let u=!1;if(c&&(u=!0,c.addEventListener("submit",function(f){if(f.preventDefault(),this.checkValidity()){const h=document.querySelector("#from-city-input"),r=document.querySelector("#to-city-input");console.log("Расчет стоимости доставки:",{from:h.value,to:r.value}),alert(`Расчет стоимости доставки: ${h.value} -> ${r.value}`)}else this.reportValidity()})),!u){const f=document.querySelector(".bg-brand-light.p-4.rounded-lg.w-full.md\\:w-3\\/5");if(f){console.log("Найден контейнер формы расчета, будем использовать клик по кнопке");const h=f.querySelectorAll("button");console.log(`В контейнере формы расчета найдено ${h.length} кнопок:`),h.forEach((l,d)=>{console.log(`Кнопка #${d+1}:`,{classes:l.className,text:l.textContent.trim()})});let r=f.querySelector("button.bg-brand-gray");r||(console.log('Не найдена кнопка по классу, ищем по тексту "Рассчитать"'),r=Array.from(f.querySelectorAll("button")).find(d=>d.textContent.trim().toLowerCase().includes("рассчитать"))),r?(console.log('Найдена кнопка "Рассчитать" для расчета стоимости:',{text:r.textContent.trim(),classes:r.className}),r.addEventListener("click",function(l){l.preventDefault(),console.log('Клик по кнопке "Рассчитать"');const d=document.querySelector("#from-city-input"),g=document.querySelector("#to-city-input");if(!d||!g){console.error("Не найдены поля ввода для формы расчета");return}d.validity.valid&&g.validity.valid?(console.log("Расчет стоимости доставки:",{from:d.value,to:g.value}),alert(`Расчет стоимости доставки: ${d.value} -> ${g.value}`)):d.validity.valid?g.validity.valid||g.reportValidity():d.reportValidity()})):console.warn('Не найдена кнопка "Рассчитать" в контейнере формы расчета')}}const m=document.querySelector(".relative.bg-brand-light button");m&&m.addEventListener("click",function(){alert("Форма для отправки заявки будет открыта")});const p=document.querySelector("form.space-y-4");p&&(p.querySelectorAll('input[type="text"], input[type="tel"], input[type="checkbox"]').forEach(h=>{h.hasAttribute("required")||h.setAttribute("required","")}),p.addEventListener("submit",function(h){if(h.preventDefault(),this.checkValidity()){const r=this.querySelector('input[type="text"]').value,l=this.querySelector('input[type="tel"]').value;alert(`Спасибо за заявку, ${r}! Мы свяжемся с вами по номеру ${l}`),this.reset()}else this.reportValidity()})),console.log("Инициализация главной страницы завершена")}function le(){console.log("Инициализация автокомплита для полей выбора городов");let n=[];if(window.officesData&&window.officesData.length>0){console.log("Получаем города из данных офисов:",window.officesData.length);const e=new Set;window.officesData.forEach(t=>{t.city&&e.add(t.city)}),n=Array.from(e),console.log("Получили уникальные города:",n.length)}else{console.log("Ищем данные офисов в DOM-структуре");const e=document.querySelectorAll("#offices-data .office-data");if(e&&e.length){console.log("Найдены элементы данных офисов:",e.length);const t=new Set;e.forEach(o=>{const i=o.dataset.city;i&&t.add(i)}),n=Array.from(t),console.log("Получили уникальные города из DOM:",n.length)}else console.log("Не найдены данные офисов, используем стандартный набор городов"),n=["Новосибирск","Красноярск","Иркутск","Абакан","Томск"]}console.log("Список городов для автокомплита:",n),re(n)}function re(n){console.log("Настройка полей ввода с автокомплитом");const e=document.querySelector(".flex.md\\:flex-row.flex-col .relative.w-full"),t=document.querySelectorAll(".flex.md\\:flex-row.flex-col .relative.w-full")[1];if(!e||!t){console.error("Не найдены контейнеры для полей выбора городов");const u=document.querySelectorAll(".flex.md\\:flex-row.flex-col");console.log("Найдено flex-контейнеров:",u.length),u.forEach((m,p)=>{const f=m.querySelectorAll(".relative.w-full");console.log(`Flex-контейнер #${p+1} содержит ${f.length} relative-контейнеров`)});return}console.log("Найдены контейнеры для полей выбора",{fromContainer:!!e,toContainer:!!t}),G(e,n,"from-city","Откуда"),G(t,n,"to-city","Куда");const o=document.querySelector(".flex.md\\:flex-row.flex-col button.w-12");o?(console.log("Найдена кнопка переключения городов"),o.addEventListener("click",function(){const u=document.querySelector("#from-city-input"),m=document.querySelector("#to-city-input");if(u&&m){const p=u.value;u.value=m.value,m.value=p,console.log("Выполнено переключение значений полей:",{newFromValue:u.value,newToValue:m.value})}else console.warn("Не найдены поля ввода для переключения")})):console.warn("Не найдена кнопка переключения городов");const s=e.parentElement.querySelectorAll(".cursor-pointer");s.length>0?(console.log(`Найдено ${s.length} ссылок быстрого выбора для поля "Откуда"`),s.forEach(u=>{u.addEventListener("click",function(){const m=document.querySelector("#from-city-input");if(m){m.value=this.textContent.trim(),console.log('Быстрый выбор города "Откуда":',m.value);const p=document.querySelector("#from-city-suggestions");p&&p.classList.add("hidden")}else console.warn('Не найдено поле ввода "Откуда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Откуда"');const c=t.parentElement.querySelectorAll(".cursor-pointer");c.length>0?(console.log(`Найдено ${c.length} ссылок быстрого выбора для поля "Куда"`),c.forEach(u=>{u.addEventListener("click",function(){const m=document.querySelector("#to-city-input");if(m){m.value=this.textContent.trim(),console.log('Быстрый выбор города "Куда":',m.value);const p=document.querySelector("#to-city-suggestions");p&&p.classList.add("hidden")}else console.warn('Не найдено поле ввода "Куда" для быстрого выбора')})})):console.warn('Не найдены ссылки быстрого выбора для поля "Куда"')}function G(n,e,t,o){console.log(`Создание поля автокомплита ${t} с плейсхолдером "${o}"`);const i=n.querySelector("img");let s="";i?(s=`<img src="${i.src}" alt="" class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none z-10">`,console.log(`Найдена существующая иконка стрелки для ${t}`)):console.warn(`Не найдена иконка стрелки для ${t}`);const a=`
    <div class="relative w-full">
      <input 
        id="${t}-input" 
        type="text" 
        class="appearance-none bg-white border border-gray-200 rounded-lg px-4 py-3 w-full focus:outline-none focus:ring-1 focus:ring-brand-blue text-body-secondary"
        placeholder="${o}" 
        autocomplete="off"
        required
      >
      <button type="button" class="absolute right-0 top-0 h-full w-12 text-gray-400 focus:outline-none z-10"></button>
      ${s}
      <ul 
        id="${t}-suggestions" 
        class="absolute w-full bg-white border border-gray-200 rounded-md shadow-md mt-1 max-h-60 overflow-y-auto hidden z-20"
      ></ul>
    </div>
  `;n.innerHTML=a,console.log(`Вставлена HTML-разметка для поля ${t}`);const c=document.getElementById(`${t}-input`),u=document.getElementById(`${t}-suggestions`),m=n.querySelector("button");if(!c||!u||!m){console.error(`Не удалось создать элементы автокомплита для ${t}`,{input:!!c,list:!!u,toggleButton:!!m});return}console.log(`Созданы элементы автокомплита для ${t}`);let p=-1;function f(l){console.log(`Обновление списка подсказок для ${t}:`,l.length),u.innerHTML="",p=-1,l.forEach((d,g)=>{const w=document.createElement("li");w.textContent=d,w.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",w.addEventListener("click",()=>{c.value=d,u.classList.add("hidden"),console.log(`Выбран город "${d}" в поле ${t}`)}),u.appendChild(w)}),u.classList.remove("hidden")}function h(){console.log(`Показываем все города для ${t}:`,e.length),u.innerHTML="",p=-1,e.forEach((l,d)=>{const g=document.createElement("li");g.textContent=l,g.className="px-4 py-2 hover:bg-blue-100 cursor-pointer",g.addEventListener("click",()=>{c.value=l,u.classList.add("hidden"),console.log(`Выбран город "${l}" в поле ${t} из полного списка`)}),u.appendChild(g)}),u.classList.remove("hidden")}m.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),u.classList.contains("hidden")?(h(),console.log(`Открыт полный список городов для ${t}`)):(u.classList.add("hidden"),console.log(`Закрыт список городов для ${t}`))}),c.addEventListener("input",()=>{const l=c.value.toLowerCase();if(!l){u.classList.add("hidden");return}const d=e.filter(g=>g.toLowerCase().startsWith(l));if(d.length===0){u.classList.add("hidden"),console.log(`Не найдено совпадений для "${l}" в поле ${t}`);return}f(d),console.log(`Найдено ${d.length} совпадений для "${l}" в поле ${t}`)}),c.addEventListener("keydown",l=>{const d=u.querySelectorAll("li");if(u.classList.contains("hidden")||d.length===0){if(l.key==="ArrowDown"&&c.value.trim()===""){l.preventDefault(),h(),console.log(`Показан полный список городов по нажатию стрелки вниз в поле ${t}`);return}return}l.key==="ArrowDown"?(l.preventDefault(),p=(p+1)%d.length,r(d),console.log(`Выделен следующий элемент (${p}) в списке ${t}`)):l.key==="ArrowUp"?(l.preventDefault(),p=(p-1+d.length)%d.length,r(d),console.log(`Выделен предыдущий элемент (${p}) в списке ${t}`)):l.key==="Enter"?(l.preventDefault(),p>=0&&p<d.length&&(c.value=d[p].textContent,u.classList.add("hidden"),console.log(`Выбран город "${d[p].textContent}" через Enter в поле ${t}`))):l.key==="Escape"&&(l.preventDefault(),u.classList.add("hidden"),console.log(`Закрыт список городов через Escape для ${t}`))});function r(l){if(l.forEach((d,g)=>{d.classList.toggle("bg-blue-100",g===p)}),p>=0){const d=l[p],g=u.getBoundingClientRect(),w=d.getBoundingClientRect();w.bottom>g.bottom?d.scrollIntoView(!1):w.top<g.top&&d.scrollIntoView(!0)}}document.addEventListener("click",l=>{!u.contains(l.target)&&l.target!==c&&l.target!==m&&u.classList.add("hidden")}),c.addEventListener("focus",()=>{const l=c.value.toLowerCase();if(!l)return;const d=e.filter(g=>g.toLowerCase().startsWith(l));d.length>0&&(f(d),console.log(`Показаны совпадения при фокусе для ${t}`))}),u.style.maxHeight="200px",u.style.overflowY="auto",u.style.overscrollBehavior="contain",console.log(`Инициализация поля ${t} завершена`)}class N{constructor(e){console.log("Pagination: Создание экземпляра пагинации"),this.containerSelector=e.containerSelector,this.itemSelector=e.itemSelector,this.paginationSelector=e.paginationSelector,this.itemsPerPage=e.itemsPerPage||9,this.onPageChange=e.onPageChange||null,this.afterPageRender=e.afterPageRender||null,this.beforePageChange=e.beforePageChange||null,this.filterSelector=e.filterSelector||null,this.filterAttribute=e.filterAttribute||"data-filter",this.useDisplayNone=e.useDisplayNone||!1,this.container=document.querySelector(this.containerSelector),this.paginationContainer=document.querySelector(this.paginationSelector),console.log("Pagination: Найден контейнер:",this.container!==null),console.log("Pagination: Найден контейнер пагинации:",this.paginationContainer!==null),this.currentPage=1,this.allItems=[],this.filteredItems=[],this.totalPages=0,this.container&&this.paginationContainer?this.init():(console.error("Pagination: Не удалось найти контейнер или контейнер пагинации"),console.error(`Pagination: Контейнер "${this.containerSelector}" найден: ${this.container!==null}`),console.error(`Pagination: Контейнер пагинации "${this.paginationSelector}" найден: ${this.paginationContainer!==null}`))}init(){try{console.log("Pagination: Начало инициализации"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),console.log("Pagination: Найдено элементов:",this.allItems.length),this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),console.log("Pagination: Общее количество страниц:",this.totalPages),this.createPaginationElements(),this.showPage(1),this.filterSelector&&this.initFilter(),console.log("Pagination: Инициализация завершена успешно")}catch(e){console.error("Pagination: Ошибка при инициализации:",e)}}createPaginationElements(){try{if(console.log("Pagination: Создание элементов пагинации"),this.paginationContainer.innerHTML="",this.totalPages<=1){console.log("Pagination: Всего одна страница, пагинация не требуется");return}const e=document.createElement("nav");e.className="inline-flex items-center justify-center space-x-2",e.setAttribute("aria-label","Pagination");const t=document.createElement("button");t.className="pagination-prev pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",t.innerHTML="&lt;",t.disabled=!0,t.setAttribute("aria-label","Предыдущая страница"),t.addEventListener("click",()=>{this.currentPage>1&&this.showPage(this.currentPage-1)}),e.appendChild(t),this.updatePaginationButtons(1,this.totalPages,e,t);const o=document.createElement("button");o.className="pagination-next pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors w-8 h-8",o.innerHTML="&gt;",o.setAttribute("aria-label","Следующая страница"),this.totalPages<=1&&(o.disabled=!0),o.addEventListener("click",()=>{this.currentPage<this.totalPages&&this.showPage(this.currentPage+1)}),e.appendChild(o);const i=document.createElement("div");i.className="flex justify-center items-center w-full",i.appendChild(e),this.paginationContainer.appendChild(i),console.log("Pagination: Элементы пагинации созданы успешно")}catch(e){console.error("Pagination: Ошибка при создании элементов пагинации:",e)}}updatePaginationButtons(e,t,o,i){try{o.querySelectorAll(".pagination-number, .pagination-ellipsis").forEach(c=>c.remove());const a=o.querySelector(".pagination-next");if(t<=7)for(let c=1;c<=t;c++)this.addPageButton(c,e,o,a);else{this.addPageButton(1,e,o,a);let c,u;if(e<=4){c=2,u=5;for(let m=c;m<=u;m++)this.addPageButton(m,e,o,a);this.addEllipsis(o,a),this.addPageButton(t,e,o,a)}else if(e>=t-3){c=t-4,u=t-1,this.addEllipsis(o,a);for(let m=c;m<=u;m++)this.addPageButton(m,e,o,a);this.addPageButton(t,e,o,a)}else{this.addEllipsis(o,a);for(let m=e-1;m<=e+1;m++)this.addPageButton(m,e,o,a);this.addEllipsis(o,a),this.addPageButton(t,e,o,a)}}i&&(e===1?(i.setAttribute("disabled","disabled"),i.classList.add("opacity-50","cursor-not-allowed")):(i.removeAttribute("disabled"),i.classList.remove("opacity-50","cursor-not-allowed"))),a&&(e===t||t===0?(a.setAttribute("disabled","disabled"),a.classList.add("opacity-50","cursor-not-allowed")):(a.removeAttribute("disabled"),a.classList.remove("opacity-50","cursor-not-allowed")))}catch(s){console.error("Pagination: Ошибка при обновлении кнопок пагинации:",s)}}addPageButton(e,t,o,i){const s=document.createElement("button");e===t?s.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-blue text-white font-bold w-8 h-8":s.className="pagination-number pagination-button flex items-center justify-center rounded bg-brand-light text-brand-gray hover:bg-brand-blue hover:text-white transition-colors w-8 h-8",s.textContent=e,s.addEventListener("click",()=>{const a=parseInt(s.textContent);this.showPage(a)}),o.insertBefore(s,i)}addEllipsis(e,t){const o=document.createElement("span");o.className="pagination-ellipsis flex items-center justify-center w-8 h-8 text-brand-gray",o.textContent="...",e.insertBefore(o,t)}showPage(e){try{console.log("Pagination: Показ страницы",e),this.beforePageChange&&this.beforePageChange(e),this.allItems.forEach(s=>{this.useDisplayNone?s.style.display="none":s.classList.add("hidden")});const t=(e-1)*this.itemsPerPage,o=t+this.itemsPerPage;this.filteredItems.slice(t,o).forEach(s=>{this.useDisplayNone?s.style.display="":s.classList.remove("hidden")});const i=this.paginationContainer.querySelector("nav");if(i){const s=i.querySelector(".pagination-prev");this.updatePaginationButtons(e,this.totalPages,i,s)}this.currentPage=e,this.onPageChange&&this.onPageChange(e),this.afterPageRender&&this.afterPageRender(e),console.log("Pagination: Страница",e,"показана успешно")}catch(t){console.error("Pagination: Ошибка при показе страницы:",t)}}initFilter(){try{console.log("Pagination: Инициализация фильтра");const e=document.querySelector(this.filterSelector);e?(console.log("Pagination: Фильтр найден:",this.filterSelector),e.addEventListener("change",()=>{const t=e.value;console.log("Pagination: Выбрано значение фильтра:",t),t==="all"?this.filteredItems=[...this.allItems]:this.filteredItems=this.allItems.filter(o=>{const i=o.getAttribute(this.filterAttribute);return i===t||(i==null?void 0:i.includes(t))}),console.log("Pagination: Отфильтровано элементов:",this.filteredItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)})):console.warn("Pagination: Фильтр не найден:",this.filterSelector)}catch(e){console.error("Pagination: Ошибка при инициализации фильтра:",e)}}updateItems(){try{console.log("Pagination: Обновление элементов"),this.allItems=Array.from(document.querySelectorAll(this.itemSelector)),this.filteredItems=[...this.allItems],console.log("Pagination: Обновлено элементов:",this.allItems.length),this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1)}catch(e){console.error("Pagination: Ошибка при обновлении элементов:",e)}}applyFilter(e){try{console.log("Pagination: Программное применение фильтра:",e);const t=document.querySelector(this.filterSelector);if(t){t.value=e;const o=new Event("change");t.dispatchEvent(o)}else console.warn("Pagination: Не удалось применить фильтр - элемент не найден:",this.filterSelector)}catch(t){console.error("Pagination: Ошибка при программном применении фильтра:",t)}}resetFilter(){try{console.log("Pagination: Сброс фильтра");const e=document.querySelector(this.filterSelector);e?(e.value="all",this.filteredItems=[...this.allItems],this.totalPages=Math.ceil(this.filteredItems.length/this.itemsPerPage),this.createPaginationElements(),this.showPage(1),console.log("Pagination: Фильтр сброшен успешно")):console.warn("Pagination: Не удалось сбросить фильтр - элемент не найден:",this.filterSelector)}catch(e){console.error("Pagination: Ошибка при сбросе фильтра:",e)}}}let T=null;function K(){const n=document.querySelectorAll(".office-card"),e=document.querySelector(".selected-office-card"),t=document.getElementById("close-selected-office");if(b(null),t&&e&&t.addEventListener("click",function(){e.style.display="none",b(null)}),ae(),n.length>0){n.forEach(i=>{i.addEventListener("mouseenter",function(){this.classList.add("shadow-md"),this.style.transform="translateY(-2px)",this.style.transition="transform 0.2s ease, box-shadow 0.2s ease"}),i.addEventListener("mouseleave",function(){this.classList.remove("shadow-md"),this.style.transform="translateY(0)"})});const o=document.querySelector(".map-info-panel");o&&o.classList.add("hidden"),setTimeout(()=>{b(null);const i=[];n.forEach(s=>{if(s.dataset.coordinates){const a=s.dataset.coordinates.split(",").map(c=>parseFloat(c.trim()));a.length===2&&i.push(a)}}),i.length>0&&typeof ymaps<"u"&&ymaps.ready(function(){var a;((a=document.querySelector("#map"))==null?void 0:a.__yamap)&&typeof window.resetAllMarkers=="function"&&window.resetAllMarkers()})},300)}de()}function ae(){const n=document.getElementById("cityFilter");n&&n.addEventListener("change",function(){const e=this.value;e==="all"?T?T.resetFilter():document.querySelectorAll(".office-card").forEach(t=>{t.classList.remove("hidden")}):T||document.querySelectorAll(".office-card").forEach(t=>{t.dataset.city===e?t.classList.remove("hidden"):t.classList.add("hidden")}),ce(e)})}function ce(n){typeof ymaps>"u"||ymaps.ready(function(){var t;if((t=document.querySelector("#map"))!=null&&t.__yamap)if(typeof window.resetAllMarkers=="function"&&window.resetAllMarkers(),n==="all"){const o=[];document.querySelectorAll(".office-card").forEach(i=>{if(i.dataset.coordinates){const s=i.dataset.coordinates.split(",").map(a=>parseFloat(a.trim()));s.length===2&&o.push(s)}}),typeof window.showAllOfficesOnMap=="function"&&o.length>0&&window.showAllOfficesOnMap(o)}else{const o=[];document.querySelectorAll(`.office-card[data-city="${n}"]`).forEach(i=>{if(i.dataset.coordinates){const s=i.dataset.coordinates.split(",").map(a=>parseFloat(a.trim()));s.length===2&&o.push(s)}}),typeof window.showAllOfficesOnMap=="function"&&o.length>0&&window.showAllOfficesOnMap(o)}})}function de(){document.querySelector(".pagination-container")&&(T=new N({containerSelector:".offices-grid",itemSelector:".office-card",paginationSelector:".pagination-container",itemsPerPage:9,filterSelector:"#cityFilter",filterAttribute:"data-city",beforePageChange:e=>{b(null)},afterPageRender:e=>{setTimeout(()=>{if(document.querySelectorAll(".office-card.ring.ring-brand-blue:not(.hidden)").length===0){const o=Array.from(document.querySelectorAll(".office-card:not(.hidden)"));o.length>0&&o[0].click()}},50)}}))}function Q(){console.log("VacanciesPage: Начало инициализации");const n=document.querySelectorAll(".vacancy-toggle");console.log("VacanciesPage: Найдено кнопок для вакансий:",n.length),n.length>0?(n.forEach(e=>{e.addEventListener("click",function(){const t=this.parentElement.querySelector(".vacancy-content"),o=this.querySelector("svg");t.classList.contains("hidden")?(t.classList.remove("hidden"),o.classList.add("rotate-180")):(t.classList.add("hidden"),o.classList.remove("rotate-180"))})}),console.log("VacanciesPage: Инициализация пагинации с задержкой..."),setTimeout(()=>{ue()},100)):console.warn("VacanciesPage: Не найдены кнопки для вакансий"),console.log("VacanciesPage: Инициализация завершена")}function ue(){console.log("VacanciesPage: Проверка контейнеров для пагинации...");const n=document.querySelector(".vacancies-container"),e=document.querySelectorAll(".vacancy-item"),t=document.querySelector(".pagination-container");if(console.log("VacanciesPage: Найден контейнер для вакансий:",n!==null),console.log("VacanciesPage: Найдено элементов вакансий:",e.length),console.log("VacanciesPage: Найден контейнер для пагинации:",t!==null),n&&e.length>0&&t){if(e.length<=5){console.log("VacanciesPage: Пагинация не требуется, количество элементов не превышает лимит на странице");return}new N({containerSelector:".vacancies-container",itemSelector:".vacancy-item",paginationSelector:".pagination-container",itemsPerPage:5,filterSelector:"#cityFilter",filterAttribute:"data-location",useDisplayNone:!0}),console.log("VacanciesPage: Пагинация успешно инициализирована")}else console.error("VacanciesPage: Невозможно инициализировать пагинацию - отсутствуют необходимые элементы")}function X(){console.log("Инициализация страницы платежей..."),U(),W();const n=document.getElementById("send-check-email"),e=document.getElementById("email-field"),t=document.getElementById("email-input");n&&e&&t&&(console.log("Инициализация функционала отображения поля email..."),n.checked&&(e.classList.remove("hidden"),t.setAttribute("required","")),n.addEventListener("change",function(){this.checked?(e.classList.remove("hidden"),t.setAttribute("required","")):(e.classList.add("hidden"),t.removeAttribute("required"))}));const o=document.getElementById("payment-form");o&&(console.log("Инициализация обработчика формы оплаты..."),o.addEventListener("submit",function(i){i.preventDefault();const s=document.getElementById("order-number").value,a=document.getElementById("send-check-email").checked;let c=null;if(!s){alert("Пожалуйста, введите номер заказа");return}if(a){if(c=document.getElementById("email-input").value,!c){alert("Пожалуйста, введите email для отправки чека");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)){alert("Пожалуйста, введите корректный email");return}}console.log("Отправка платежа:"),console.log("Номер заказа:",s),console.log("Отправить чек на email:",a),a&&console.log("Email для чека:",c),alert("Платеж отправлен! Проверьте консоль для деталей.")}))}class ge{constructor(){this.container=document.getElementById("modal-container"),this.overlay=this.container.querySelector(".modal-overlay"),this.modal=this.container.querySelector(".modal"),this.closeBtn=this.container.querySelector(".modal-close"),this.content=this.container.querySelector(".modal-content"),this.bindEvents()}bindEvents(){this.closeBtn.addEventListener("click",()=>this.close()),this.overlay.addEventListener("click",()=>this.close()),document.addEventListener("keydown",e=>{e.key==="Escape"&&!this.container.classList.contains("hidden")&&this.close()})}open(e){this.content.innerHTML=e,this.container.classList.remove("hidden"),requestAnimationFrame(()=>{this.overlay.classList.add("opacity-100"),this.modal.classList.add("opacity-100","scale-100"),this.modal.classList.remove("scale-95")}),document.body.style.overflow="hidden"}close(){this.overlay.classList.remove("opacity-100"),this.modal.classList.remove("opacity-100","scale-100"),this.modal.classList.add("scale-95"),setTimeout(()=>{this.container.classList.add("hidden"),this.content.innerHTML="",document.body.style.overflow=""},300)}}console.log("NewsPage: Модуль загружается...");class fe{constructor(){console.log("NewsPage: Инициализация класса"),this.modal=new ge,this.pagination=null,this.init()}init(){console.log("NewsPage: Начало инициализации"),this.bindNewsDetailsButtons(),this.initMonthFilter(),console.log("NewsPage: Инициализация пагинации..."),this.initPagination(),console.log("NewsPage: Инициализация завершена")}initPagination(){const e=document.querySelector(".news-grid"),t=document.querySelectorAll(".news-card"),o=document.querySelector(".pagination-container");if(console.log("NewsPage: Контейнер для новостей найден:",!!e),console.log("NewsPage: Найдено новостей:",t.length),console.log("NewsPage: Контейнер для пагинации найден:",!!o),!e||t.length===0||!o){console.error("NewsPage: Не удалось найти необходимые элементы для пагинации");return}this.pagination=new N({containerSelector:".news-grid",itemSelector:".news-card",paginationSelector:".pagination-container",itemsPerPage:5,filterSelector:".month-filter",filterAttribute:"data-month",useDisplayNone:!1}),console.log("NewsPage: Пагинация инициализирована")}bindNewsDetailsButtons(){const e=document.querySelectorAll(".news-details-btn");console.log("NewsPage: Найдено кнопок для новостей:",e.length),e.forEach((t,o)=>{console.log(`NewsPage: Добавление обработчика для кнопки ${o+1}`),t.addEventListener("click",i=>{var c,u,m,p,f;console.log('NewsPage: Клик по кнопке "Подробнее"'),i.preventDefault();const s=t.closest(".news-card");if(console.log("NewsPage: Найдена карточка новости:",s!==null),!s){console.error("NewsPage: Не удалось найти карточку новости");return}const a={title:(c=s.querySelector(".news-title"))==null?void 0:c.textContent,image:(u=s.querySelector("img"))==null?void 0:u.src,isPlaceholder:(m=s.querySelector("img"))==null?void 0:m.classList.contains("placeholder"),content:(p=s.querySelector(".news-content"))==null?void 0:p.textContent,date:(f=s.querySelector(".news-date"))==null?void 0:f.textContent};if(console.log("NewsPage: Собраны данные для модального окна:",a),!a.title||!a.content){console.error("NewsPage: Не удалось собрать все необходимые данные");return}this.openNewsModal(a)})})}openNewsModal(e){console.log("NewsPage: Открытие модального окна с контентом:",e);let t="";e.image&&!e.isPlaceholder&&(t=`
        <div class="rounded-2xl overflow-hidden">
          <img src="${e.image}" 
               alt="${e.title}" 
               class="w-full object-cover aspect-[1.85/1]">
        </div>
      `);const o=`
      <div class="space-y-6">
        <h2 class="text-h4 md:text-h3 font-bold text-brand-gray">${e.title}</h2>
        ${t}
        <div class="text-brand-gray">${e.content}</div>
        <div class="text-caption-form text-brand-gray">${e.date}</div>
      </div>
    `;this.modal.open(o)}initMonthFilter(){document.querySelector(".month-filter")?console.log("NewsPage: Найден фильтр по месяцам"):console.warn("NewsPage: Фильтр по месяцам не найден")}}const ye="";console.log("main.js: Начало загрузки");const q=oe();console.log("Определен базовый путь:",q),window.BASE_PATH=q,window.initMap=M,window.selectOfficeCard=F,window.selectOfficeCardNoFocus=b,window.updateInfoPanel=V,window.getZoomForDevice=L,window.getCenterForDevice=O,window.getMarkerSizeForZoom=E,window.createColoredMarkerIcon=P,window.mapConfig=v,window.loadSwiper=H,window.initSwiperSlider=D,window.initMobileMenu=R,window.initTitleAnimations=j,window.initForms=_,window.initFaqAccordion=U,window.initPaymentTabs=W,window.initHomePage=Y,window.initContactsPage=K,window.initVacanciesPage=Q,window.initPaymentsPage=X,window.Pagination=N;let J=!1,Z=!1;function me(){console.log("=== Начало инициализации страницы ==="),R(),_(),document.getElementById("map")&&(console.log("Найден контейнер карты, начинаем инициализацию..."),setTimeout(()=>{let o=[];const i=document.querySelectorAll(".office-card");let s=!1;if(i&&i.length>0&&(console.log("Найдены карточки офисов на странице:",i.length),i.forEach(a=>{if(a.dataset.coordinates){const c=a.dataset.coordinates.split(",").map(u=>parseFloat(u.trim()));if(c.length===2){const u=a.dataset.city||"",m=a.querySelector("h3 + div.text-brand-gray"),p=m?m.textContent.trim():"",f=a.querySelectorAll("div.text-brand-gray"),h=f.length>1?f[1]:null,r=f.length>2?f[2]:null,l=f.length>3?f[3]:null;o.push({city:u,address:p,type:h?h.textContent.trim():"",phone:r?r.textContent.trim():"",email:l?l.textContent.trim():"",coordinates:c})}}}),o.length>0&&(console.log("Собраны данные офисов из карточек:",o.length),M(o,q),s=!0)),!s&&window.officesData&&window.officesData.length>0&&(console.log("Использую предварительно загруженные данные офисов:",window.officesData.length),M(window.officesData,q),s=!0),!s){const a=document.querySelector(".map-info-panel .font-bold.text-2xl.text-brand-gray");if(a){console.log("Найдены данные для дефолтного офиса в DOM");const c=document.querySelector(".map-info-panel div:nth-of-type(2)"),u=document.querySelector(".map-info-panel div:nth-of-type(3)"),m=document.querySelector(".map-info-panel div:nth-of-type(4)"),p=document.querySelector(".map-info-panel div:nth-of-type(5)");let f=[56.010563,92.852572];const h=document.querySelector(".map-info-panel");if(h&&h.dataset.coordinates){const d=h.dataset.coordinates.split(",").map(g=>parseFloat(g.trim()));d.length===2&&(f=d)}const r={city:a.textContent,address:c?c.textContent:"",type:u?u.textContent:"",phone:m?m.textContent:"",email:p?p.textContent:"",coordinates:f};M([r],q)}else console.log("Данные не найдены на странице, инициализируем карту без маркеров"),M([],q)}},100));const e=window.location.pathname,t=e.split("/").pop();console.log(`Текущий путь: ${e}, определена страница: ${t||"главная (индекс)"}`),t===""||t==="index.html"?(console.log("Инициализация главной страницы..."),Y()):t==="vacancies.html"?(console.log("Инициализация страницы вакансий..."),Q()):t==="contacts.html"?(console.log("Инициализация страницы контактов..."),K()):t==="payments.html"?(console.log("Инициализация страницы платежей..."),X()):t==="news.html"&&(console.log("Инициализация страницы новостей..."),new fe),j(),console.log("=== Инициализация страницы завершена ===")}function ee(){if(J||Z){console.log("Инициализация уже выполнена или в процессе, пропускаем повторный вызов");return}console.log("Начинаем безопасную инициализацию страницы"),Z=!0;try{me(),J=!0}catch(n){console.error("Ошибка при инициализации страницы:",n)}finally{Z=!1}}ne(ee),window.addEventListener("load",ee)})();
