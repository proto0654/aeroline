<!-- Секция с картой -->
<section class="{{#if isHomePage}}mt-8 md:mt-16 lg:mt-20 max-w-[1200px] mx-auto w-full my-[60px]{{else}}mb-4 md:mb-8{{/if}} px-4 md:px-0">
  {{#if isHomePage}}<h2 class="text-h4 md:text-h2 font-bold text-brand-gray mb-4">Контакты</h2>
  <p class="text-body-secondary text-brand-gray mb-6">{{#if pageDescription}}{{pageDescription}}{{else}}Описание, например сколько представительств или выберите одну из отмеченных точек на карте{{/if}}</p>{{/if}}
  
  <!-- Интерактивная карта -->
  <div class="relative {{#if isHomePage}}w-full min-h-[90vh] md:h-[500px] rounded-lg{{else}} relative rounded-2xl overflow-hidden shadow mb-6 md:mb-10{{/if}}">
    <!-- Контейнер для Leaflet карты -->
    <div id="map" class="w-full h-[90vh] md:h-[550px] rounded-2xl bg-gray-100"></div>
    
    <!-- Информационная панель с данными офиса -->
    <div class="map-info-panel absolute left-1/2 -translate-x-1/2 bottom-5 md:top-5 md:bottom-5 md:right-6 md:left-auto md:translate-x-0 w-[95%] md:w-[30%] max-w-full bg-white rounded-2xl shadow-lg p-4 md:p-10 flex flex-col gap-1 md:gap-2 {{#unless selectedOffice}}{{#unless defaultOffice}}hidden{{/unless}}{{/unless}} z-10">
      {{#if selectedOffice}}
      <div class="flex justify-end items-center mb-2">
        <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="font-bold text-2xl text-brand-gray">{{selectedOffice.city}}</div>
      <div class="text-brand-gray">{{selectedOffice.address}}</div>
      <div class="text-brand-gray">{{selectedOffice.type}}</div>
      <div class="text-brand-gray">{{selectedOffice.phone}}</div>
      <div class="text-brand-gray">{{selectedOffice.email}}</div>
      <button class="bg-brand-blue mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
      {{else}}
      {{#if defaultOffice}}
      <div class="flex justify-end items-center mb-2">
        <button class="text-brand-gray hover:text-brand-blue transition-colors close-info-panel">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="font-bold text-2xl text-brand-gray">{{defaultOffice.city}}</div>
      <div class="text-brand-gray">{{defaultOffice.address}}</div>
      <div class="text-brand-gray">{{defaultOffice.type}}</div>
      <div class="text-brand-gray">{{defaultOffice.phone}}</div>
      <div class="text-brand-gray">{{defaultOffice.email}}</div>
      <button class="bg-brand-blue mt-5 text-white rounded-lg py-3 text-buttons text-regular hover:bg-blue-700 transition-colors">Подробнее</button>
      {{else}}
      <!-- Содержимое будет заполнено через JavaScript -->
      {{/if}}
      {{/if}}
    </div>
  </div>
  
  <!-- Подключение стилей и скриптов для карты -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="{{basePath}}assets/js/map.js"></script>
</section> 